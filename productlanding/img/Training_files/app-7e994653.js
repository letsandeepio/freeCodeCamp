/**
 * @ngdoc overview
 * @name fw-ui
 *
 * @description
 * Generated by Yo men
 *
 * **Note:** This is a headless module. It provides routes, services and directives to applications. The index.html in this project is just a demo app to demo the module's exports.
 *
 */
function alpha(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}angular.module("fw-ui",["ngMaterial","restangular","fw-core","fw-common","fw-location","angular-md5","ui.tree","ng.deviceDetector","highcharts-ng"]).value("ccLangList",[{code:"en",label:"English"},{code:"fr",label:"French"},{code:"es",label:"Spanish"},{code:"ar",label:"Arabic"}]).config(["$translatePartialLoaderProvider",function(e){e.addPart("fw-ui")}]).config(["$fwConfigProvider","$mdThemingProvider","$mdDateLocaleProvider",function(e,t){var n=e.$get(),a=n.tenant;t.theme("default").accentPalette("grey",{"default":"900"}),"BK"==a&&t.theme("default").primaryPalette("orange",{"default":"700"})}]).run(["$rootScope","$state","$mdDateLocale","$filter","$locale","$fw.core.locale",function(e,t,n,a,i,o){var r=o.getActive();r&&null!=r&&o.setActive(r).then(function(){var e=i.DATETIME_FORMATS.SHORTDAY.map(function(e){return"zh-cn"==r?e:e.substring(0,1).toUpperCase()});n.shortDays=e}),n.formatDate=function(e){var t=a("date")(e,"mediumDate");return void 0!==t?t:""}}]),angular.module("fw-ui").directive("fwSmartFilterInput",["$filter",function(){"use strict";return{scope:{fwFilterValue:"=",fwFilterType:"=",fwValidItems:"=",fwIsReadOnly:"="},templateUrl:"routes/filters/directives/smart-filter-input/smart-filter-input.html",controller:"fw.ui.smartFilterInput",controllerAs:"ctl",link:function(){}}}]),angular.module("fw-ui").controller("fw.ui.smartFilterInput",["$scope","$q",function(e,t){function n(t){if(t=t||a.searchText,!e.fwFilterType||!e.fwValidItems[e.fwFilterType])return null;var n=e.fwValidItems[e.fwFilterType];return n.search?n.search(t):n.filter(function(e){return-1===e.label.toLowerCase().indexOf(a.searchText.toLowerCase())?!1:a.selectedItems.indexOf(e)>=0?!1:!0})}var a=this,i=[],o=e.ngModel,r=e.fwFilterType;if(e.fwFilterValue){var l=e.fwFilterValue.split(",").reduce(function(e,t){return e[t]=1,e},{}),s=e.fwValidItems[e.fwFilterType];s.select?(i=i||[],t.when(s.select(Object.keys(l))).then(function(e){i.splice.apply(i,[0,i.length].concat(e))})):i=s.filter(function(e){return l.hasOwnProperty(e.value)})}e.$watchCollection("ctl.selectedItems",function(t,n){t!==n&&(e.fwFilterValue=t.reduce(function(e,t){return e.push(t.value),e},[]).join(","))}),e.$watch("fwFilterType",function(e){e!==r&&(r=e,a.selectedItems=[])}),angular.extend(a,{searchText:o,selectedItems:i,query:n})}]),angular.module("fw-ui").factory("$fw.equipment.lookTemperatureProfile",["$resource","$fwConfig",function(e,t){"use strict";var n=t.urls.svcBase+"/log/lookTemperatureHandlingProfile/:temperatureProfileCd",a=e(n,{temperatureProfileCd:"@temperatureProfileCd"},{query:{isArray:!0,method:"GET",transformResponse:function(e){return e=angular.fromJson(e),e.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),e}}});return a}]),angular.module("fw-ui").factory("$fw.equipment.lookTemperatureHoldingProfile",["$resource","$fwConfig",function(e,t){"use strict";var n=t.urls.svcBase+"/log/lookTemperatureHoldingProfile/:temperatureProfileCd",a=e(n,{temperatureProfileCd:"@temperatureProfileCd"},{query:{isArray:!0,method:"GET",transformResponse:function(e){return e=angular.fromJson(e),e.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),e}}});return a}]),angular.module("fw-ui").factory("$fw.equipment.lookLocationZone",["$resource","$fwConfig",function(e,t){"use strict";var n=t.urls.svcBase+"/equipment/looklocationzone/:locationZoneId",a=e(n,{locationZoneId:"@locationZoneId"},{update:{method:"PUT",url:n}});return a}]),angular.module("fw-ui").factory("$fw.equipment.lookEquipment",["$resource","$fwConfig","$fw.common.rest.mediaLinkFactory",function(e,t,n){"use strict";var a=t.urls.svcBase+"/equipment/lookequipment/:equipmentId",i=a+"/dagChangeImpact/:dagId/:newDagId",o=e(a,{equipmentId:"@equipmentId",dagId:"@dagId",newDagId:"@newDagId"},{update:{method:"PUT",transformRequest:function(e){return e.hasOwnProperty("mediaLinks")&&delete e.mediaLinks,angular.toJson(e)}},create:{method:"POST",url:a},getAll:{method:"GET",isArray:!0,url:t.urls.svcBase+"/equipment/lookequipment/all"},getAllForLocation:{method:"GET",isArray:!0,url:t.urls.svcBase+"/equipment/lookequipment/location/:locationId"},dagChangeImpact:{method:"GET",url:i,isArray:!1}});return angular.extend(o.prototype,{$fwMediaLinkFactory:n(a)}),o}]),angular.module("fw-ui").factory("$fw.equipment.lookType",["$resource","$fwConfig",function(e,t){"use strict";var n=t.urls.svcBase+"/equipment/lookequipmenttype/:typeId",a=e(n,{typeId:"@typeId"},{update:{method:"PUT",transformRequest:function(e){return e.hasOwnProperty("edit")&&(delete e.edit,delete e.$$hashKey),angular.toJson(e)}},create:{method:"POST",url:n}});return a}]),angular.module("fw-ui").factory("$fw.equipment.lookSection",["$resource","$fwConfig",function(e,t){"use strict";var n=t.urls.svcBase+"/equipment/lookequipmentsection/:sectionId",a=e(n,{sectionId:"@sectionId"},{update:{method:"PUT",transformRequest:function(e){return e.hasOwnProperty("edit")&&(delete e.edit,delete e.$$hashKey),angular.toJson(e)}},create:{method:"POST",url:n}});return a}]),angular.module("fw-ui").factory("$fw.equipment.lookManufacturer",["$resource","$fwConfig",function(e,t){"use strict";var n=t.urls.svcBase+"/equipment/lookmanufacturer/:manufacturerId",a=e(n,{manufacturerId:"@manufacturerId"},{update:{method:"PUT",transformRequest:function(e){return e.hasOwnProperty("edit")&&(delete e.edit,delete e.$$hashKey),angular.toJson(e)}},create:{method:"POST",url:n}});return a}]),angular.module("fw-ui").factory("$fw.location.service.rest.locationEquipment",["$resource","$fwConfig","$fw.core.httpPaginationInterceptor",function(e,t,n){"use strict";var a=t.urls.svcBase+"/equipment/location/:locationId/equipment",i=e(a,{equipmentId:"@equipmentId",locationId:"@locationId",results:20},{search:{method:"GET",url:a,isArray:!0,interceptor:{response:n.response}},add:{method:"POST",url:a,isArray:!0}});return i}]),angular.module("fw-ui").factory("$fw.ui.validItems",[function(){"use strict";function e(e,t,n,a,i,o,r,l,s,c,u,d,f,m){var p={LOCATION_CD:[],LOC_GROUP:[],LOCATION_TYPE:[],COUNTRY:[],PROVINCE:[],ROLE:[],LOCATION_ATTR:[],DAY_ATTR:[],HAS_SOME_MENU_ITEM:[],HAS_SOME_EQUIPMENT_TYPE_MFR:[],LOCATION_HAS_SOME_EQUIPMENT_TYPE_MFR:[],LOCATION_HAS_SOME_MENU_ITEM:[],HAS_SOME_EQUIPMENT_TYPE:[],MENU_TEMP_LOG_CATEGORY:[],EQUIP_TEMP_LOG_CATEGORY:[]};return p.LOCATION_CD=e,m.forEach(function(e){p.MENU_TEMP_LOG_CATEGORY.push({value:e.id,label:e.name}),p.EQUIP_TEMP_LOG_CATEGORY.push({value:e.id,label:e.name})}),t.forEach(function(e){p.LOC_GROUP.push({value:e.id,label:e.name})}),n.forEach(function(e){p.LOCATION_TYPE.push({value:e.id,label:e.name})}),a.forEach(function(e){p.COUNTRY.push({value:e.cd,label:e.name})}),i.forEach(function(e){p.PROVINCE.push({value:e.country+"_"+e.cd,label:e.name+", "+e.country})}),o.forEach(function(e){p.ROLE.push({value:e.roleCd,label:e.name})}),r.forEach(function(e){var t=p.LOCATION_ATTR;if("BOOLEAN"===e.type)t.push({value:e.cd,label:e.name});else{if(!e.valueListStr)return;var n=e.valueListStr.split(",");n.forEach(function(n){t.push({value:e.cd,label:e.name+"/"+n})})}}),l.forEach(function(e){p.DAY_ATTR.push({value:e.cd,label:e.name})}),p.HAS_SOME_MENU_ITEM=s,p.HAS_SOME_EQUIPMENT_TYPE_MFR=c,u.forEach(function(e){p.LOCATION_HAS_SOME_EQUIPMENT_TYPE_MFR.push({value:e.type.id+"_"+e.manu.id,label:e.type.name+"/"+e.manu.name})}),d.forEach(function(e){p.LOCATION_HAS_SOME_MENU_ITEM.push({value:e.id,label:e.name})}),f.forEach(function(e){p.HAS_SOME_EQUIPMENT_TYPE.push({value:e.id,label:e.name})}),p}return{build:e}}]),angular.module("fw-ui").service("$fw.modal.simpleConfirmTextModal",["$mdDialog","$translate",function(e,t){function n(n,a,i){return e.show({templateUrl:"modals/simple-confirm-text-modal/simple-confirm-text-modal.html",controller:"fw.ui.modal.simpleConfirmTextModalController",locals:{title:t(n),dialogText:t(a)},bindToController:!0,controllerAs:"ctl",clickOutsideToClose:0!=i,escapeToClose:0!=i})}var a=angular.extend({show:n});return a}]),angular.module("fw-ui").service("$fw.ui.dagLCA",["$q",function(){function e(e){for(var t=[e];e;e=e.parent)t.unshift(e);return t}function t(t,n){var a=e(t),i=e(n);if(a[0].id!=i[0].id)return null;for(var o=0;o<a.length;o++)if(a[o].id!=i[o].id)return a[o-1];return a[0]}return{commonAncestor:t}}]),angular.module("fw-ui").directive("fwDonutChart",function(){return{scope:{fwPct:"="},controller:"fw.donut.chart",controllerAs:"ctl",templateUrl:"directives/charts/donut-chart/donut-chart.html",link:function(e){e.fwPct=Math.round(e.fwPct),console.log("from donut",e.fwPct)}}}),angular.module("fw-ui").controller("fw.donut.chart",["$scope","$timeout",function(e){var t=this,n=e.fwPct;console.log("pct",n);var a={options:{chart:{type:"solidgauge",spacingTop:0,spacingBottom:0,backgroundColor:"transparent",height:150},pane:{center:["50%","50%"],size:"100%",startAngle:0,endAngle:360,background:{backgroundColor:"#000",innerRadius:"60%",outerRadius:"100%",shape:"circle"}},tooltip:{enabled:!1}},title:{style:{display:"none"}},legend:{enable:!1},series:[{data:[{y:n,color:"green"}],dataLabels:{enabled:!1}}],yAxis:[{min:0,max:100,lineWidth:0,tickPositions:[],labels:{enabled:!1},minorTickColor:"transparent",minorTickInterval:0}],loading:!1};angular.extend(t,{chartConfig:a})}]),angular.module("fw-ui").service("$fw.ui.ToastService",["$mdToast","$translate",function(e,t){function n(n,a,i,o){return e.show(e.simple().content(t.instant(n)).position(o||"top right").toastClass(i||"fw-toast").hideDelay(a||3e3))}var a=this;return angular.extend(a,{show:n}),a}]),angular.module("fw-ui").provider("$fw.ui.pluggableState",[function(){function e(e,o){var r=angular.copy(e);return o?(r=a.reduce(function(e,n){return o.hasOwnProperty(n)&&(e=t(e,n,o[n])),e},r),r=i.reduce(function(e,t){return o.hasOwnProperty(t)&&(e[t]=e.hasOwnProperty(t)?n(e[t],o[t]):o[t]),e},r)):r}function t(e,t,n){return null===n&&e.hasOwnProperty(t)?delete e[t]:e[t]=n,e}function n(e,n){return angular.forEach(n,function(n,a){t(e,a,n)}),e}var a=["template","templateUrl","templateProvider","controller","controllerProvider","controllerAs","parent","url","abstract","onEnter","onExit","reloadOnSearch"],i=["resolve","views","data","params"];return{create:e,$get:function(){return{create:e}}}}]),angular.module("fw-ui").provider("$fw.ui.help.help",[function(){function e(e){i.push(e)}function t(e){a=e}var n=this,a=null,i=[],o={controller:"fw.ui.help.HelpController",controllerAs:"ctl",templateUrl:"services/help/help.html",clickOutsideToClose:!0},r=["$mdDialog","$q","$injector","$fw.core.locale",function(e,t,n,r){function l(e){var t=r.getActive(),n=e.lastIndexOf("."),a=e.substring(0,n),i=e.substring(n,e.length),o=a+"-"+t+i;return o}function s(){return 0==i.length?t.reject():t.all(i.map(n.invoke)).then(function(e){return e.reduce(function(e,t){return t?(t.priority=t.priority||1,!e||t.priority>e.priority?t:e):e},null)}).then(function(e){return e||t.reject(),l(e.url)})}function c(){return e.show(angular.merge({},o,{resolve:{imgUrl:function(){return s()}}}))}function u(){return e.hide()}return a&&(a.priority=0,i.push(a)),{show:c,hide:u}}];angular.extend(n,{$get:r,addResolver:e,setDefaultResolver:t})}]),angular.module("fw-ui").controller("fw.ui.help.HelpController",["imgUrl","$fw.ui.help.help",function(e,t){var n=this;angular.extend(n,{hide:t.hide,imgUrl:e})}]),angular.module("fw-ui").factory("$fw.ui.rest.service.dag",["$resource","$fwConfig",function(e,t){"use strict";var n=t.urls.svcBase+"/core/dag/:dagId/",a=n+"children",i=a+"/:childDagId",o=n+"path",r=t.urls.svcBase+"/core/dag/companyOrFranchise?",l=e(n,{dagId:"@dagId"},{update:{method:"PUT",url:n},getChildren:{method:"GET",url:a,isArray:!0},createChild:{method:"POST",url:a},isChild:{method:"GET",url:i,isArray:!1},isCompanyOrFranchise:{method:"GET",url:r,isArray:!0},getPath:{method:"GET",url:o,isArray:!1,interceptor:{response:function(e){return e.data}}}});return l}]),angular.module("fw-ui").service("$fw.ui.ConfirmDelete",["$mdDialog",function(e){function t(){return e.show({templateUrl:"services/confirm-delete/confirm-delete-modal.html",controller:"fw.ui.ConfirmDeleteController",controllerAs:"ctl",bindToController:!0})}var n=this;return angular.extend(n,{openModal:t}),n}]),angular.module("fw-ui").controller("fw.ui.ConfirmDeleteController",["$mdDialog",function(e){var t=this;t.confirm=function(){e.hide()},t.cancel=function(){e.cancel()}}]),angular.module("fw-ui").factory("$fw.ui.breadcrumb",["$rootScope","$window","$state","$location",function(e,t,n){"use strict";function a(e){return"function"==typeof e}function i(e){t.sessionStorage.setItem("fw-breadcrumbs",JSON.stringify(e))}function o(e,t){var i=u(),o=i[i.length-1];if(o==n.href(n.$current.name,n.params,{absolute:!0})){i.pop();var o=i[i.length-1]}return e&&a(e)&&e(),t&&t.reload===!0?void r(o):void(i.length>0&&l(o))}function r(e){l(e),location.reload(!0)}function l(e){t.location.href=e}function s(e){return e.data&&e.data.hasOwnProperty("shouldBeInBreadcrumbs")&&e.data.shouldBeInBreadcrumbs===!0}function c(e,n,a,o){var r=t.sessionStorage.getItem("fw-breadcrumbs-candidate");if(s(n)&&t.sessionStorage.setItem("fw-breadcrumbs-candidate",o),r&&r!==o){var l=t.sessionStorage.getItem("fw-breadcrumbs")?t.sessionStorage.getItem("fw-breadcrumbs"):JSON.stringify(d),c=JSON.parse(l),u=c.length,f=c[u-1];f!==o?f!==r&&(c.push(r),i(c)):(c.pop(),i(c))}}function u(){return t.sessionStorage.getItem("fw-breadcrumbs")?JSON.parse(t.sessionStorage.getItem("fw-breadcrumbs")):(t.sessionStorage.setItem("fw-breadcrumbs",JSON.stringify(d)),JSON.parse(t.sessionStorage.getItem("fw-breadcrumbs")))}var d=[];return{getBreadcrumbs:u,goLocation:l,appendBreadcrumbs:c,goBack:o}}]),angular.module("fw-ui").run(["$rootScope","$fw.ui.breadcrumb","$state",function(e,t,n){e.$on("$stateChangeSuccess",function(e,a,i,o,r){var l=n.href(o.name,r,{absolute:!0}),s=n.href(a.name,i,{absolute:!0});t.appendBreadcrumbs(o,a,l,s)})}]),angular.module("fw-ui").constant("fw.ui.menu-search.state",{views:{"main@ui":{templateUrl:"routes/menu-search/menu.html",controller:"fw.ui.menu.searchPageController",controllerAs:"ctl"},"search@ui":{templateUrl:"routes/menu-search/search.html",controller:"fw.ui.menu.searchController",controllerAs:"ctl"},"results@ui":{templateUrl:"routes/menu-search/results.html",controller:"fw.ui.menu.searchResultsController",controllerAs:"ctl"}},reloadOnSearch:!0,resolve:{searchResults:["$q","$location","$fw.common.rest.lookMenuItem","locationId",function(e,t,n,a){var i=t.search();return a&&(i.locationId=a),i.cookOutCategory&&(i.cookOutCategories=[i.cookOutCategory]),n.query(i).$promise.then(function(e){return e}).catch(function(t){return e.reject(t)})}],locationId:["$stateParams",function(e){return e.locationId||null}],location:["locationId","$fw.location.rest.service",function(e,t){return e?t.get({locationId:e}).$promise:null}],locationMenuItems:["$stateParams","$fw.common.rest.locationMenuItems",function(e,t){return e.locationId?t.query({locationId:e.locationId}).$promise:[]}],locationMenuItemsIdx:["locationMenuItems",function(e){return e.reduce(function(e,t){return e[t.menuItem]=!0,e},{})}],lookTemperatureProfile:["$fw.equipment.lookTemperatureProfile",function(e){return e.query().$promise}],lookTempProfIdx:["lookTemperatureProfile",function(e){return e.reduce(function(e,t){return e[t.cd]=t,e},{})}],config:[function(){return{location:{actionState:"admin.add-equipment-additional",buttonText:"menu.label.add"},repository:{actionState:"equipment.details.view",buttonText:"menu.label.delete"}}}]}}),angular.module("fw-ui").controller("fw.ui.menu.searchController",["$location","$state","$stateParams","$rootScope","lookTemperatureProfile","lookCookOutCategory","lookHoldingCategory","location","lookMenuItemGroups",function(e,t,n,a,i,o,r,l,s){function c(){-1===f.searchCriteria.menuGroup?delete f.searchCriteria.menuGroup:0===f.searchCriteria.menuGroup&&(f.searchCriteria.menuGroup=null,f.searchCriteria.isAllMenu="false"),l&&(f.searchCriteria.locationId=l.id),e.search(f.searchCriteria),e.search("page",1),e.search("results",20)}function u(){f.searchCriteria={},f.search()}function d(){var t=angular.extend({},e.search());return"true"===t.isAllMenu&&"undefined"==typeof t.menuGroup?t.menuGroup=-1:"false"===t.isAllMenu&&"undefined"==typeof t.menuGroup&&(t.menuGroup=0),t}var f=this;f.location=l,f.dag=a.currentUser.activeDag,f.searchCriteria={page:1,results:20},f.searchCriteria.dag=f.dag;var m=[];o&&(m=o),r&&(m=m.concat(r)),angular.extend(f,{search:c,clear:u,searchCriteria:d(),lookTemperatureProfile:i,logCategories:m,lookMenuItemGroups:s}),l&&(f.dag=l.dags,f.searchCriteria.dag||(f.searchCriteria.dag=f.dag))}]),angular.module("fw-ui").controller("fw.ui.menu.searchResultsController",["$rootScope","$state","$mdToast","$mdDialog","$fw.common.rest.locationMenuItems","$fw.common.rest.lookMenuItem","locationId","searchResults","config","$translate","locationMenuItemsIdx","lookCookOutCatIdx","lookHoldingCatIdx","lookMenuItemGroups","lookMenuItemGroupMap",function(e,t,n,a,i,o,r,l,s,c,u,d,f,m,p){function g(e){"location"===T?t.go("admin.menu.details",{menuItemId:e}):t.go("menu.details.view",{menuItemId:e})}function h(e){i.save({locationId:r},{menuItem:e.id}).$promise.then(function(){k.locationMenuItemsIdx[e.id]=!0,n.show(n.simple().content(c.instant("menu.messages.adding-menu-item.success")).position("top right").toastClass("fw-toast").hideDelay(3e3))}).catch(function(){n.show(n.simple().content(c.instant("menu.messages.adding-menu-item.failed")).position("top right").toastClass("fw-toast fw-toast-error").hideDelay(3e3))})}function w(e){a.show({templateUrl:"routes/menu-search/confirm-delete-modal.html",controller:["$scope","$mdDialog",function(e,t){var n=this;n.confirm=function(){t.hide()},n.cancel=function(){t.cancel()}}],controllerAs:"ctl"}).then(function(){y(e)})}function v(e){i.delete({locationId:r,menuItemId:e.id},{menuItem:e.id}).$promise.then(function(){u[e.id]=!1,n.show(n.simple().content(c.instant("menu.messages.deleting-menu-item.success")).position("top right").toastClass("fw-toast").hideDelay(3e3))}).catch(function(){n.show(n.simple().content(c.instant("menu.messages.deleting-menu-item.failed")).position("top right").toastClass("fw-toast fw-toast-error").hideDelay(3e3))})}function y(e){o.delete({menuItemId:e.id}).$promise.then(function(){n.show(n.simple().content(c.instant("menu.messages.deleting-menu-item.success")).position("top right").toastClass("fw-toast").hideDelay(3e3)).then(function(){return t.reload()})}).catch(function(){return n.show(n.simple().content(c.instant("menu.messages.deleting-menu-item.failed")).position("top right").toastClass("fw-toast fw-toast-error").hideDelay(3e3)).then(function(){return t.reload()})})}function b(e){"location"===T?h(e):w(e)}function x(e){var t={};return d&&angular.merge(t,d),f&&angular.merge(t,f),e.map(function(e){return t[e]?t[e].name:void 0}).join(", ")}var k=this,C=s[t.current.data.callingApp],T=t.current.data.callingApp;angular.extend(k,{userClickedViewMenuItem:g,sharedActionButton:b,deleteLocationMenuItem:v,searchResults:l,page_data:l._searchMeta,currentAppConfig:C,callingApp:T,locationMenuItemsIdx:u,canViewDetails:t.current.data.canViewDetails||!1,displayCats:x,lookMenuItemGroupMap:p})}]),angular.module("fw-ui").controller("fw.ui.menu.searchPageController",["$fw.action.ActionButton","$rootScope","$state",function(e,t,n){var a=n.current.data.callingApp;"repository"===a?(e.reset(),e.getConfig().add.state="show"):e.reset()}]),angular.module("fw-ui").constant("fw.ui.filters.state.filter",{url:"/filter",controller:"fw.ui.filters.entityFilterController",controllerAs:"ctl",templateUrl:"routes/filters/filter.html",params:{enableBackButton:!1,maxSearchResults:20},resolve:{bitmaskMap:[function(){return{INDIVIDUALS:16384,TEAM_MEMBERS:32,MANAGERS:16,OWNERS:8,OPERATIONS:4,EXECUTIVES:2,SYSADMINS:1,ROOT:8192}}],filterConfig:[function(){return[{name:"LOCATION",active:!0},{name:"USER",active:!0}]}],validFilterTypes:[function(){return{LOCATION:["COUNTRY","PROVINCE","PROV_CITY","CITY","LOCATION_CD","LOCATION_ATTR","LOCATION_TYPE","DAY_ATTR","HAS_SOME_MENU_ITEM","HAS_SOME_EQUIPMENT_TYPE_MFR","HAS_SOME_EQUIPMENT_TYPE","LOC_GROUP","MENU_TEMP_LOG_CATEGORY","EQUIP_TEMP_LOG_CATEGORY"],USER:["LOCATION_CD","CITY","PROVINCE","COUNTRY","ROLE","RIGHT","LOCATION_TYPE","USER_ATTR","V_MASK_MATCHES","LOCATION_HAS_SOME_EQUIPMENT_TYPE_MFR","LOCATION_HAS_SOME_MENU_ITEM"]}}],validFilterTypesIdx:["validFilterTypes",function(e){var t={LOCATION:{},USER:{}};return angular.forEach(e,function(e,n){t[n]=e.reduce(function(e,t){return e[t]=1,e},{})}),t}],locationGroups:["$fw.location.locationGroup.rest","validFilterTypesIdx",function(e,t){return t.LOCATION.LOC_GROUP?e.search().$promise:[]}],locationCds:["$fw.location.rest.Location","validFilterTypesIdx","$fwConfig","$q",function(e,t,n){function a(t){return e.getList({locationCd:t},o).then(function(e){return e.map(function(e){return{value:e.locationCd,label:e.locationCd}})})}function i(e){return e.map(function(e){return{value:e,label:e}})}if(t.LOCATION.hasOwnProperty("LOCATION_CD")){var o={};return o[n.interceptorConfig.watchedHeaders["FW-Busy-Request"]]=!1,{search:a,select:i}}return[]}],locationTypes:["$fw.location.rest.LookLocationType","validFilterTypesIdx",function(e,t){return t.LOCATION.hasOwnProperty("LOCATION_TYPE")?e.getList():[]}],countryCds:["$fw.core.rest.LookCountry","validFilterTypesIdx",function(e,t){return t.LOCATION.hasOwnProperty("COUNTRY")?e.getList():[]}],provinceCds:["$fw.core.rest.LookProvince","validFilterTypesIdx",function(e,t){return t.LOCATION.hasOwnProperty("PROVINCE")?e.getList():[]}],roles:["$fw.user.rest.LookRole","validFilterTypesIdx",function(e,t){return t.USER.hasOwnProperty("ROLE")?e.getList():[]}],tempLogsCategories:["$stateParams","$fw.common.rest.lookTempLogCategory",function(e,t){return t.getAll().$promise}],locationAttributes:["$fw.location.rest.LookLocationAttribute","validFilterTypesIdx",function(e,t){return t.LOCATION.hasOwnProperty("LOCATION_ATTR")?e.getList():[]}],lookDayAttributes:["validFilterTypesIdx","$fw.common.lookAttributes",function(e,t){return e.LOCATION.hasOwnProperty("DAY_ATTR")?t.query().$promise:[]}],lookMenuItemsData:["$fw.common.rest.lookMenuItem","validFilterTypesIdx",function(e,t){return t.LOCATION.hasOwnProperty("HAS_SOME_MENU_ITEM")?e.getAll().$promise.then():[]}],lookMenuItemIdx:["lookMenuItemsData",function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})}],lookMenuItems:["lookMenuItemsData","lookMenuItemIdx","$stateParams",function(e,t,n){function a(t){for(var a=[],i=0;i<e.length;i++){var o=e[i];if(o.name.toLowerCase().indexOf(t.toLowerCase())>=0&&!o.deletedDateTime&&(a.push({value:o.id,label:o.name}),a.length>=n.maxSearchResults))return a}return a}function i(e){return e.map(function(e){var n=t[e],a=n.deletedDateTime?'<span class="fw-cross-over">'+n.name+"</span>":n.name;return{value:e,label:a}})}return{search:a,select:i}}],lookEquipment:["$fw.equipment.lookEquipment","validFilterTypesIdx",function(e,t){return t.LOCATION.hasOwnProperty("HAS_SOME_EQUIPMENT_TYPE_MFR")?e.getAll().$promise:[]}],lookManufacturer:["$fw.equipment.lookManufacturer",function(e){return e.query().$promise.then(function(e){return e.sort(alpha)})}],lookType:["$fw.equipment.lookType",function(e){return e.query().$promise.then(function(e){return e.sort(alpha)})}],lookManuIdx:["lookManufacturer",function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})}],lookTypeIdx:["lookType",function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})}],lookEquipTypeManu:["lookType","lookManufacturer","validFilterTypesIdx","$stateParams",function(e,t,n,a){function i(e){var t=[];for(var n in r){var i=r[n];if(i.label.toLowerCase().indexOf(e.toLowerCase())>=0&&(t.push(i),t.length>=a.maxSearchResults))return t}return t}function o(e){return e.map(function(e){return r[e]})}var r={};return n.LOCATION.hasOwnProperty("HAS_SOME_EQUIPMENT_TYPE_MFR")&&t.forEach(function(t){e.forEach(function(e){var n={value:e.id+"_"+t.id,label:e.name+"/"+t.name};r[n.value]=n})}),{search:i,select:o}}],lookEquipmentLocation:["$fw.location.service.rest.locationEquipment","$rootScope","validFilterTypesIdx",function(e,t,n){return n.USER.hasOwnProperty("LOCATION_HAS_SOME_EQUIPMENT_TYPE_MFR")?e.query({locationId:t.currentUser.homeLocation}).$promise:[]}],lookEquipTypeManuLocation:["lookEquipmentLocation","lookManuIdx","lookTypeIdx",function(e){var t=[];return e.length>0&&e.forEach(function(e){e.equipment.manufacturer&&e.equipment.equipmentType&&t.push({manu:e.equipment.manufacturer,type:e.equipment.equipmentType})}),t}],lookMenuItemLocation:["$fw.common.rest.locationMenuItems","$rootScope","validFilterTypesIdx","lookMenuItemIdx",function(e,t,n,a){return n.USER.hasOwnProperty("LOCATION_HAS_SOME_MENU_ITEM")?e.query({locationId:t.currentUser.homeLocation}).$promise.then(function(e){return e.reduce(function(e,t){return e=[],a[t.menuItem]&&e.push(a[t.menuItem]),e},[])}):[]}],validItems:["$fw.ui.validItems","locationCds","locationGroups","locationTypes","countryCds","provinceCds","roles","locationAttributes","lookDayAttributes","lookMenuItems","lookEquipTypeManu","lookEquipTypeManuLocation","lookMenuItemLocation","lookType","tempLogsCategories",function(e,t,n,a,i,o,r,l,s,c,u,d,f,m,p){return e.build(t,n,a,i,o,r,l,s,c,u,d,f,m,p)}]}}),angular.module("fw-ui").controller("fw.ui.filters.entityFilterController",["$translate","$mdToast","$scope","entityObj","filterConfig","validFilterTypes","$fw.action.ActionButton","isEditable","$q","bitmaskMap","$fw.ui.breadcrumb","validItems","$fw.common.arrayIncludes","$stateParams","$window",function(e,t,n,a,i,o,r,l,s,c,u,d,f,m){function p(e){var t=parseInt(e),n=[];for(var a in c)(t&c[a])===c[a]&&n.push(a);return n}function g(){angular.forEach(O,function(e){for(var t=e.length-1;t>=0;t--)e[t].filterValue||e.splice(t,1)})}function h(){angular.forEach(O,function(e,t){angular.copy(T[t],e)}),w()}function w(){u.goBack()}function v(e,t){C.filters[e].splice(t,1)}function y(){g();var n=[];if(x("LOCATION")){var i=a.$fwLocationFilter().save(O.location).$promise.then(function(e){return angular.copy(e,T.location),e});n.push(i)}if(x("USER")){var o=a.$fwUserFilter().save(O.user).$promise.then(function(e){return angular.copy(e,T.user),e});n.push(o)}s.all(n).then(function(n){return a.filterCount=_.reduce(O,function(e,t){return e+t.length},0),e("message.filter.saved").then(function(e){t.show(t.simple().content(e).position("bottom right").hideDelay(3e3))}),n})}function b(e){if("location"===e){var t=new(a.$fwLocationFilter());C.filters.location.push(t)}else"user"===e&&C.filters.user.push(new(a.$fwUserFilter()))}function x(e){for(var t=e||n.fwFilterName,a=0;a<i.length;a++)if(i[a].name==t)return i[a].active}function k(e){for(var t=e||n.fwFilterName,a=0;a<i.length;a++)if(i[a].name==t)return"readonly"==i[a].active;return!1}var C=this,T={user:[],location:[]},O={user:[],location:[]},I={visibility:{dismiss:[],visibilityReset:{val:!0}}};r.reset();var A=o.LOCATION,S=["I","E"],M=o.USER;x("LOCATION")&&a.$fwLocationFilter().query().$promise.then(function(e){angular.copy(e,T.location),angular.copy(e,O.location)}),x("USER")&&a.$fwUserFilter().query().$promise.then(function(e){angular.copy(e,T.user),angular.copy(e,O.user)}),angular.extend(C,{entityObj:a,filters:O,locationFilterTypes:A,isFilterActive:x,add:b,save:y,"delete":v,userFilterTypes:M,flags:S,cancel:h,validItems:d,isEditable:l,visibilityConfig:I,createVisibilityArray:p,bitmaskMap:c,isFilterReadOnly:k,goBack:w,enableBackButton:!!m.enableBackButton})}]),angular.module("fw-ui").constant("fw.ui.equipment-search.state",{resolve:{lookSection:["$fw.equipment.lookSection",function(e){return e.query().$promise.then(function(e){return e.filter(function(e){return null==e.parentId})})}],lookType:["$fw.equipment.lookType",function(e){return e.query().$promise.then(function(e){return e})}],lookTypeId:["lookType",function(e){return e.reduce(function(e,t){return e[t.id]=t.name,e},{})}],lookManufacturer:["$fw.equipment.lookManufacturer",function(e){return e.query().$promise.then(function(e){return e})}],manufacturerId:["lookManufacturer",function(e){return e.reduce(function(e,t){return e[t.id]=t.name,e},{})}],locationId:["$stateParams",function(e){return e.locationId||null}],location:["locationId","$fw.location.rest.service",function(e,t){return e?t.get({locationId:e}).$promise:null}],searchResults:["$q","$location","$fw.equipment.lookEquipment","locationId",function(e,t,n,a){var i=t.search();return a&&(i.locationId=a),n.query(i).$promise.then(function(e){return e}).catch(function(t){return e.reject(t)})}],lookTemperatureProfile:["$fw.equipment.lookTemperatureProfile",function(e){return e.query().$promise}],lookTempProfId:["lookTemperatureProfile",function(e){return e.reduce(function(e,t){return e[t.cd]=t,e},{})}],config:["$fw.action.ActionButton",function(e){return{location:{actionState:"admin.add-equipment-additional",actionParams:function(e){return{equipmentId:e}},buttonText:"button.add",actionButtonFn:function(){e.reset(),e.getConfig().cancel.state="show"},unlisted:!1,createState:"admin.add-unlisted",createParams:function(){return{}}},repository:{actionState:"equipment.details.view",actionParams:function(e){return{equipmentId:e}},buttonText:"button.details",actionButtonFn:function(){},unlisted:!1,createState:"",createParams:function(){return{}}}}}]},data:{},views:{search:{templateUrl:"routes/equipment-search/equipment-search.html",controller:"fw.ui.equipment.searchController",controllerAs:"ctl"},results:{templateUrl:"routes/equipment-search/equipment-results.html",controller:"fw.ui.equipment.searchResultsController",controllerAs:"ctl"}},reloadOnSearch:!0}),angular.module("fw-ui").controller("fw.ui.equipment.searchController",["$location","$state","lookSection","lookType","lookManufacturer","config","$rootScope","location","lookTemperatureProfile",function(e,t,n,a,i,o,r,l,s){function c(){t.go(m.createState,m.createParams())}function u(){for(var t in e.search())e.search(t,null);l&&(f.searchCriteria.locationId=l.id);for(var t in f.searchCriteria){var n=f.searchCriteria[t];n&&e.search(t,n)}e.search("page",1),e.search("results",20)}function d(){f.searchCriteria={},f.search()}var f=this;f.location=l;var m=o[t.current.data.callingApp];m.actionButtonFn(),f.currentUser=r.currentUser,f.rootDag=f.currentUser.activeDag,angular.extend(f,{create:c,search:u,clear:d,lookSection:n,lookType:a,lookManufacturer:i,callingApp:m,searchCriteria:angular.extend({},e.search()),lookTemperatureProfile:s}),l&&l.id&&(f.rootDag=l.dags[0],f.searchCriteria.dag||(f.searchCriteria.dag=l.dag))}]),angular.module("fw-ui").controller("fw.ui.equipment.searchResultsController",["$rootScope","$state","config","searchResults","manufacturerId","lookTempProfId","lookTypeId","$fw.equipment.lookEquipment","$fw.ui.ConfirmDelete","$fw.ui.ToastService",function(e,t,n,a,i,o,r,l,s,c){function u(e){t.go(p.actionState,p.actionParams(e))}function d(e){s.openModal().then(function(){var t={equipmentId:e};l.delete(t)}).then(function(){m.searchResults.splice(_.findIndex(m.searchResults,{id:e}),1),c.show("equipment.messages.deleting.success")}).catch(function(){c.show("equipment.messages.deleting.failed")})}function f(e){return e?o[e].name:""}var m=this,p=n[t.current.data.callingApp],g=t.current.data.callingApp;angular.extend(m,{action:u,displayHandlingProfile:f,callingApp:p,searchResults:a,page_data:a._searchMeta,callingAppType:g,manufacturerId:i,lookTypeId:r,deleteEquipment:d})}]),angular.module("fw-ui").controller("fw.ui.modal.simpleConfirmTextModalController",["$mdDialog","title","dialogText",function(e,t,n){function a(){e.hide()}var i=this;i.title=t,i.dialogText=n,angular.extend(i,{confirm:a})}]),angular.module("fw-ui").controller("fw.ui.modal.infoModalController",["$scope","$rootScope","$mdDialog","title","textObj","showTextTitles","isBulleted",function(e,t,n,a,i,o,r){function l(){n.hide()}var s=this;s.title=a,s.textObj=i,s.showTextTitle=o,s.isBulleted=r?"":"info-modal-bullets-none",angular.extend(s,{cancel:l})}]),angular.module("fw-ui").directive("fwUiVideoPlayer",["$fw.ui.videoplayer.rest.cc","ccLangList","$rootScope","$fw.ui.videoplayer.error","$location","$fw.core.locale","$filter","$timeout","$fw.core.bandwidthDetection",function(e,t,n,a,i,o,r,l,s){return{scope:{src:"@",config:"=?",videoPoster:"@",showControls:"@",disableScrubber:"@",activityEnded:"&",small:"@",autoplay:"@",ccOverlay:"@"},restrict:"AE",templateUrl:"directives/video-player/video-player.html",link:function(c,u,d){function f(){m()
}function m(){var e=r("translate")("lc.videoplayer.pause");b.attr("title",e).find("i").removeClass("fa-play").addClass("fa-pause"),y.play()}function p(){var e=r("translate")("lc.videoplayer.play");b.attr("title",e).find("i").removeClass("fa-pause").addClass("fa-play"),y.pause()}function g(e){if(v)if(v[c.lang]){var t=v[c.lang].cuePoints;if(!t)return;for(var n=0;n<t.length;n++)e>=t[n].ccTime&&e<t[n].endTime&&(c.cc=t[n].ccText)}else{var t=v.cuePoints;if(!t)return;for(var n=0;n<t.length;n++)e>=t[n].ccTime&&e<t[n].endTime&&(c.cc=t[n].ccText)}}function h(){for(var e=[],n=0;n<t.length;n++)v[t[n].code]&&e.push(t[n]);return e}function w(e){var t=parseInt(e,10),n=Math.floor(t/3600),a=Math.floor((t-3600*n)/60),i=t-3600*n-60*a,o=10>n?"0"+n:n,r=10>a?"0"+a:a,l=10>i?"0"+i:i,e=n>0?o+":"+r+":"+l:r+":"+l;return e}c.bandwidth=s.getBandwidth();var v,y=u.find("video")[0],b=angular.element(u[0].querySelector(".btn-play-pause")),x=o.getLocales();c.lang=n.lang,i.search().debug&&(c.debug=!0),c.flexButtons=c.showScrubber?10:25,c.flexScrubber=c.showScrubber?55:40,y.oncontextmenu=function(){return!1},y.addEventListener("loadedmetadata",function(){c.small?(u.find("video").css("width",y.videoWidth/2+"px").css("height",y.videoHeight/2+"px"),angular.element(u[0].querySelector(".fw-video-player__cc")).css("width",y.videoWidth/2-10+"px")):(u.find("video").css("width",y.videoWidth+"px").css("height",y.videoHeight+"px"),angular.element(u[0].querySelector(".fw-video-player__cc")).css("width",y.videoWidth-10+"px")),c.videoDuration=w(y.duration)}),y.addEventListener("canplay",function(){c.autoplay!==!1&&"false"!==c.autoplay&&f()}),y.addEventListener("click",function(){f()}),y.addEventListener("progress",function(){var e=this.buffered;0!=e.length&&(c.loaded=this.buffered.end(0)/this.duration*100)}),c.src?e.getUrl(c.src).then(function(e){v=e,c.langList=h(),y.src=v[c.lang].mediaPath,c.autoplay!==!1&&"false"!==c.autoplay&&y.setAttribute("autoplay",!0)},function(){c.lang="en",c.cc="Error loading CC"}):c.$watch("config",function(e){e&&(v=e,c.langList=h(),y.src=v[c.lang]?v[c.lang].mediaPath:v.mediaPath,c.autoplay!==!1&&"false"!==c.autoplay&&y.setAttribute("autoplay",!0))}),b.on("click",function(){y.paused?m():p()}),angular.element(u[0].querySelector(".btn-back")).on("click",function(){y.currentTime=0,p()}),angular.element(u[0].querySelector(".btn-rewind")).on("click",function(){y.currentTime-=10}),y.addEventListener("timeupdate",function(){g(y.currentTime),c.scrubber=Math.round(100*y.currentTime/y.duration),c.videoCurrentTime=w(y.currentTime),c.$apply()}),c.setCurrentTime=function(e){/iPad|iPhone|iPod/.test(navigator.platform)?y.paused?y.currentTime=y.duration*e/100:(y.pause(),l(function(){y.currentTime=y.duration*e/100,y.play()},50)):y.currentTime=y.duration*e/100},y.addEventListener("ended",function(){p(),c.activityEnded()}),y.addEventListener("error",function(){a.error("fw-video-player: file "+y.src+" could not be played"),c.activityEnded()}),c.$watch("lang",function(e,t){e&&e!=t&&(p(),y.src=v[c.lang].mediaPath,y.currentTime=0,m(),g(y.currentTime),d.$set("dir",x[e].dir))})}}}]),angular.module("fw-ui").service("$fw.ui.videoplayer.error",["Restangular","$fwConfig",function(){return{error:function(e){console.log("ERROR: "+e)},warning:function(e){console.log("WARNING: "+e)},info:function(e){console.log("INFO: "+e)}}}]),angular.module("fw-ui").service("$fw.ui.videoplayer.rest.cc",["Restangular","$fwConfig",function(e){return{getUrl:function(t){return e.oneUrl("cc",t).get()}}}]),angular.module("fw-ui").directive("fwInputIntegerValidator",[function(){return{require:"ngModel",link:function(e,t,n,a){function i(e){if(e){var t=e.replace(/[^0-9]/g,"");return t!==e&&(a.$setViewValue(t),a.$render()),t}return void 0}a.$parsers.push(i)}}}]),angular.module("fw-ui").directive("fwUserVisibility",[function(){var e={scope:{fwActive:"@",fwDisabled:"=",fwResetVisibility:"=",fwResetTrigger:"=",fwLowerVisibility:"=",fwHideLabel:"=",fwDefaultBackground:"=",fwBitmaskValue:"=",fwBitmaskMap:"=",fwIsReadOnly:"="},replace:!0,restrict:"AE",controller:"fw-ui.user-visibility-controller",templateUrl:"directives/user-visibility/user-visibility.html",controllerAs:"ctl",link:function(e){var t=e.$watch("fwResetTrigger",function(t,n){t!=n&&t&&t.val&&(e.fwResetVisibility(),e.fwResetTrigger.val=!1)});e.$on("$destroy",function(){t()})}};return e}]),angular.module("fw-ui").controller("fw-ui.user-visibility-controller",["$scope","$filter",function(e,t){var n=this;e.fwActive="string"==typeof e.fwActive?JSON.parse(e.fwActive):e.fwActive;var a={visibilities:[]},i={visibilityDelegates:["EXECUTIVES","OPERATIONS","OWNERS","MANAGERS","TEAM_MEMBERS","INDIVIDUALS"],visibilityLowest:"SYSADMINS",visibilityNonDelegates:["SYSADMINS"]},o=function(t){var n=[];angular.forEach(t,function(e){e.value&&n.push(e.role)}),e.fwActive=n},r=function(){var n=[];angular.forEach(i.visibilityNonDelegates,function(t){n.push({role:t,value:-1!==e.fwActive.indexOf(t),show:t==i.visibilityLowest,order:n.length})}),angular.forEach(i.visibilityDelegates,function(t){-1===e.fwDisabled.indexOf(t)&&n.push({role:t,value:-1!==e.fwActive.indexOf(t),show:!0,order:n.length})}),a.visibilities=n,a.visibilities=t("orderBy")(a.visibilities,"order",!1),o(n)},l=function(t){if(!e.fwIsReadOnly){angular.forEach(a.visibilities,function(e){e.value=e.role==i.visibilityLowest?!0:e==t?!t.value:e.order<t.order}),o(a.visibilities)}};r(),e.$watchCollection("fwActive",function(t){t="string"==typeof t?JSON.parse(t):t;var n=0;t.forEach(function(t){n|=e.fwBitmaskMap[t]}),e.fwBitmaskValue=n.toString()}),angular.extend(n,{visibility:a,changeVisibility:l})}]),angular.module("fw-ui").directive("stickyWrapper",["$window",function(e){var t=[],n=function(){angular.forEach(t,function(t){var n=(t[0],t.data("pos"));n<=e.pageYOffset?t.addClass("fixed"):t.removeClass("fixed")})},a=function(e,n){var a=n.children()[0],i=angular.element(a);i.data("pos",a.offsetTop),t.push(i)};return angular.element(e).off("scroll",n).on("scroll",n),{restrict:"E",transclude:!0,template:"<sticky-content ng-transclude></sticky-content>",link:a}}]),angular.module("fw-ui").service("$fw.button.StickyBarButton",[function(){var e={};return{config:function(t){e=t},getConfig:function(){return e},getEventHandler:function(e){return"on"+e.substr(0,1).toUpperCase()+e.substr(1)},reset:function(){for(var t in e){e[t].state="hide";var n=this.getEventHandler(t);delete e[t][n]}}}}]),angular.module("fw-ui").directive("fwStickyBarButtons",function(){return{scope:{config:"=",onConfig:"=",onAdd:"=",onSave:"=",onCancel:"=",onEdit:"=",onCopy:"=",onSearch:"=",onPrint:"=",onHelp:"=",onComplete:"=",test:"="},controller:"fw.ui.StickyBarButtonController",controllerAs:"ctl",templateUrl:"directives/sticky-bar-buttons/sticky-bar-buttons.html",link:function(e,t,n,a){e.$watch("onConfig",function(e,t){e!==t&&(a.config=e)},!0)}}}),angular.module("fw-ui").controller("fw.ui.StickyBarButtonController",["$q","$scope","$state","$window","$fw.button.StickyBarButton",function(e,t,n,a,i){function o(e){var n="on"+e.action.substr(0,1).toUpperCase()+e.action.substr(1);s.config[e.action][n]?s.config[e.action][n].call():angular.isDefined(t[n])?t[n].call():console.log("No such action method",e.action)}function r(e){var t=("show"===e.state||"disabled"===e.state||"hide-mobile-only"===e.state&&a.innerWidth>=450)&&e.security&&e.editRights;return t}function l(){var e=!1;return angular.forEach(i.getConfig(),function(t){r(t)&&(e=!0)}),e}var s=this;angular.extend(s,{config:i.getConfig(),buttonClick:o,showButton:r,showStickyBar:l})}]),angular.module("fw-ui").directive("fwStackBar",[function(){return{scope:{barList:"="},restrict:"AE",replace:!0,templateUrl:"directives/stack-bar/stack-bar.html",link:function(e){var t=["fw-bar-bg-1","fw-bar-bg-2"];e.getColor=function(e,n){return n.colourClass?n.colourClass:t[e]},e.getStyle=function(e){return{width:e.percent+"%"}}}}}]),angular.module("fw-ui").service("$fw.repository.schedulerService",["$filter",function(e){var t=e("translate"),n={isSet:!1,daysOfWeek:["task.schedule.sun","task.schedule.mon","task.schedule.tue","task.schedule.wed","task.schedule.thur","task.schedule.fri","task.schedule.sat"],monthsOfYear:["task.schedule.jan","task.schedule.feb","task.schedule.mar","task.schedule.apr","task.schedule.may","task.schedule.jun","task.schedule.jul","task.schedule.aug","task.schedule.sep","task.schedule.oct","task.schedule.nov","task.schedule.dec"],monthsOfQtr:["task.schedule.1st","task.schedule.2nd","task.schedule.3rd"],monthsOfSemiAnnual:["task.schedule.1st","task.schedule.2nd","task.schedule.3rd","task.schedule.4th","task.schedule.5th","task.schedule.6th"],getHours:function(){for(var e=[],n=0;13>n;n++){var a;a=0==n?t("task.schedule.one_time"):1==n?n+" "+t("task.schedule.hour"):n+" "+t("task.schedule.hours"),e.push({value:n,ui:a})}return e},getTimes:function(e){for(var n=[],a=0,i=0;2330>=a;){if(i%60===0&&i>=60&&(a+=40),0===a)n.push({military:"0000",ui:"12:00 "+t("task.schedule.am")});else if(10>a)n.push({military:"000"+a,ui:"12:0"+a+" "+t("task.schedule.am")});else if(100>a)n.push({military:"00"+a,ui:"12:"+a+" "+t("task.schedule.am")});else if(1e3>a){var o="0"+a,r=o.charAt(1),l=o.substr(2);n.push({military:o,ui:r+":"+l+" "+t("task.schedule.am")})}else{var o=a.toString(),r=o.substr(0,2),l=o.substr(2),s=parseInt(r)<12?"task.schedule.am":"task.schedule.pm",c=12>=r?r:r-12;n.push({military:o,ui:c+":"+l+" "+t(s)})}a+=e,i+=e}return n},getOffsets:function(){for(var e=[{intVal:0,ui:"0 "+t("task.schedule.mins")+" ("+t("task.schedule.ontime")+")"}],n=720,a=30;n>a;){if(60>a&&e.push({intVal:a,ui:a+" "+t("task.schedule.mins")}),a%60===0){var i=a/60,o=t(i>1?"task.schedule.hours":"task.schedule.hour");e.push({intVal:a,ui:i+" "+o})}if(a%60!==0&&a>60){var r=a%60,i=Math.floor(a/60),o=t(i>1?"task.schedule.hours":"task.schedule.hour");e.push({intVal:a,ui:i+" "+o+" "+r+" "+t("task.schedule.mins")})}a+=30}return e},getFrequencies:function(){return[{frequency:"task.schedule.daily"},{frequency:"task.schedule.weekly"},{frequency:"task.schedule.monthly"},{frequency:"task.schedule.quarterly"},{frequency:"task.schedule.semiAnnually"},{frequency:"task.schedule.yearly"}]},getWeekdays:function(){return this.daysOfWeek.map(function(e){return{day:e}})},getDays:function(){return Array.apply(null,Array(31)).map(function(e,t){return{day:t+1}})},getMonths:function(){return this.monthsOfYear.map(function(e){return{month:e}})},getQtrOptions:function(){return this.monthsOfQtr.map(function(e){return{option:e}})},getSemiAnnualOptions:function(){return this.monthsOfSemiAnnual.map(function(e){return{option:e}})},getOptions:function(){var e=["task.schedule.first","task.schedule.second","task.schedule.third","task.schedule.fourth","task.schedule.fifth"],t=e.map(function(e,t){return{option:e,intVal:t+1}});return t.push({option:"task.schedule.last",intVal:-1}),t},intToStrTime:function(e){return e=10>e?"000"+e:100>e?"00"+e:1e3>e?"0"+e:e.toString()},getAltFreqDays:function(){return["task.schedule.day"]},getTimeMap:function(e){var t=this.getTimes(e),n={};return t.forEach(function(e){n[e.military]=e.ui}),n},getWeekdaysMap:function(){var e=this.getWeekdays(),t={};return e.forEach(function(e,n){t[n]=e.day}),t},getOrdinalMap:function(){var e=this.getOptions(),n={};return e.forEach(function(e){n[e.intVal]=t(e.option)}),n},getDefaultEmptySchedule:function(e){var t=e.map(function(e){return e=e.map(function(e){return e=!e})});return{daysOfWeekArray:e[0],daysOfMonthArray:e[1],monthsArray:e[2],originalDaysOfWeekArray:t[0],originalDaysOfMonthArray:t[1],originalMonthsArray:t[2],timeType:"time",customFrequency:!1,frequency:null,allDay:null,monthWeekNumOffset:null,offsetMin:null,offsetEvent:null,fixedTimeHHMM:null,string:!1,offsetDirection:"Neutral",id:null}},transformResponse:function(e){var t=e;t.frequency||(t.frequency="task.schedule.daily"),t.originalDaysOfWeekArray=angular.copy(t.daysOfWeekArray),t.originalDaysOfMonthArray=angular.copy(t.daysOfMonthArray),t.originalMonthsArray=angular.copy(t.monthsArray),t.everyHourDaily=t.everyHourDaily/60;var n=t.fixedTimeHHMM;null!==n&&void 0!==n&&"string"!=typeof n?(t.fixedTimeHHMM=this.intToStrTime(n),t.timeType="time",null!=t.endTime&&(t.endTime=this.intToStrTime(t.endTime))):t.offsetEvent?(t.offsetDirection=t.offsetMin>=0&&null!=t.offsetMin?"task.schedule.after":t.offsetMin<0?"task.schedule.before":"task.schedule.ontime",t.offsetMin=Math.abs(t.offsetMin),t.offsetDirectionEnd=t.endOffsetMin>=0?"task.schedule.after":t.endOffsetMin<0?"task.schedule.before":"task.schedule.ontime",t.endOffsetMin=Math.abs(t.endOffsetMin),t.timeType="offset"):t.allDay&&(t.fixedTimeHHMM=!0,t.timeType="time");var a={"task.schedule.weekly":{model:[t.originalDaysOfWeekArray],thresholdCnt:7},"task.schedule.monthly":{model:[t.originalDaysOfMonthArray],thresholdCnt:31},"task.schedule.yearly":{model:[t.originalMonthsArray,t.originalDaysOfMonthArray],thresholdCnt:43},"task.schedule.quarterly":{model:[t.originalMonthsArray,t.originalDaysOfMonthArray],thresholdCnt:43},"task.schedule.semiAnnually":{model:[t.originalMonthsArray,t.originalDaysOfMonthArray],thresholdCnt:43}};if("task.schedule.daily"!==t.frequency&&!t.monthWeekNumOffset){var i=a[t.frequency].model.reduce(function(e,t){return e+t.reduce(function(e,t){return e+t},0)},0);i>=a[t.frequency].thresholdCnt&&(t.frequency="task.schedule.daily",t.originalDaysOfWeekArray=Array.apply(null,Array(7)).map(function(){return!0}))}var o=[t.daysOfWeekArray,t.daysOfMonthArray,t.monthsArray],r={yearly:{value:["task.schedule.yearly","task.schedule.quarterly","task.schedule.semiAnnually"],model:t.originalMonthsArray},monthly:{value:["task.schedule.monthly"],model:t.originalDaysOfMonthArray},weekly:{value:["task.schedule.weekly"],model:t.originalDaysOfWeekArray},daily:{value:["task.schedule.daily"],model:!1}},l={"task.schedule.daily":{weight:0,model:[],shouldBePreserved:!1,mainMapKey:"daily"},"task.schedule.weekly":{weight:1,model:t.originalDaysOfWeekArray,shouldBePreserved:!1,mainMapKey:"weekly"},"task.schedule.monthly":{weight:2,model:t.originalDaysOfMonthArray,shouldBePreserved:!1,mainMapKey:"monthly"},"task.schedule.quarterly":{weight:3,model:t.originalMonthsArray,shouldBePreserved:!1,mainMapKey:"yearly"},"task.schedule.semiAnnually":{weight:3,model:t.originalMonthsArray,shouldBePreserved:!1,mainMapKey:"yearly"},"task.schedule.yearly":{weight:3,model:t.originalMonthsArray,shouldBePreserved:!1,mainMapKey:"yearly"}};angular.forEach(l,function(e){e.weight<=l[t.frequency].weight&&(e.shouldBePreserved=!0)}),t.customFrequency=!!t.monthWeekNumOffset;for(var s in r)if(r[s].value.indexOf(t.frequency)<0)if(r[s].model){if("monthly"===s&&l["task.schedule.monthly"].shouldBePreserved)continue;if(t.monthWeekNumOffset&&"weekly"===s)break;r[s].model=r[s].model.map(function(){return!1})}else o.map(function(e){e=e.map(function(){return!1})});return angular.forEach(l,function(e,n){n!==t.frequency||e.shouldBePreserved||(r[e.mainMapKey].model=r[e.mainMapKey].model.map(function(){return!1}))}),t.customFrequency&&(r.monthly.model=new Array(31).map(function(e){return e=!1})),t.daysOfMonthArray=r.monthly.model,t.daysOfWeekArray=r.weekly.model,t.monthsArray=r.yearly.model,t.monthWeekNumOffset&&(t.originalDaysOfWeekArray.forEach(function(e,n){e&&(t.weekdaySelectedIdx=n)}),t.weekdaySelected=this.getWeekdaysMap()[t.weekdaySelectedIdx]),t.allDay&&(t.fixedTimeHHMM=!0),t},createStringFromSched:function(e,a){var i="",o=", ";if(!e||e.string===!1)return i=t("task.schedule.noCurrent");if(e.allDay===!0)i+=t("task.schedule.allDay");else if(e.fixedTimeHHMM){var r=n.getTimeMap(30)[e.fixedTimeHHMM];null!=e.endTime&&(i+=t("task.schedule.from")),i+=" "+r+" "}else{var l=t(e.offsetDirection),s=Math.abs(e.offsetMin)/60,c=t(s>1?"task.schedule.hours":"task.schedule.hour");"task.schedule.daily"==e.frequency&&(i+=t("task.schedule.from")),i+=" "+s+" "+c+" "+l+" "+a[e.offsetEvent]}var u={daysOfWeek:{responseArray:e.daysOfWeekArray,ourArray:[],translation:"task.schedule.allDaysOfWeek",translationTwo:"",translationTwoAlt:"",translationThree:"",meta:n.daysOfWeek,endOfStatement:"-"},daysOfMonth:{responseArray:e.daysOfMonthArray,ourArray:[],translation:"task.schedule.allDaysOfMonth",translationTwo:"task.schedule.onDays",translationTwoAlt:"task.schedule.onDay",translationThree:"",meta:[],endOfStatement:"-"},monthsOfYear:{responseArray:e.monthsArray,ourArray:[],translation:"task.schedule.allMonthsOfYear",translationTwo:"task.schedule.in",translationTwoAlt:"task.schedule.in",translationThree:"",meta:n.monthsOfYear,endOfStatement:"-"}};if(e.monthWeekNumOffset){var d=n.getOrdinalMap()[e.monthWeekNumOffset];i+=t("task.schedule.onThe")+d+" "}var f=i;for(var m in u){u[m].responseArray.forEach(function(e,t){e&&u[m].ourArray.push(u[m].meta.length>0?u[m].meta[t]:t+1)});var p=u[m].ourArray.map(function(e){return"string"==typeof e?t(e):e});if("task.schedule.daily"!==e.frequency){var g;p.length<1&&(g=" "),1===p.length&&(g=u[m].translationTwoAlt),p.length>1&&(g=u[m].translationTwo),i+=t(g)+p.join(", ")+t(u[m].translationThree)+u[m].endOfStatement}}var h="";"task.schedule.daily"!=e.frequency||null==e.everyHourDaily||isNaN(e.everyHourDaily)||0==e.everyHourDaily||(h=" "+t("task.schedule.every")+" "+e.everyHourDaily,h=1==e.everyHourDaily?h+" "+t("task.schedule.hour")+" ":h+" "+t("task.schedule.hours")+" ");var w="";if("task.schedule.daily"!=e.frequency||"time"!=e.timeType||null==e.endTime||isNaN(e.endTime)||(w+=" "+t("task.schedule.to")+" ",w+=n.getTimeMap(30)[e.endTime]),"task.schedule.daily"==e.frequency&&"offset"==e.timeType&&0!=e.everyHourDaily&&null!=e.endOffsetMin&&null!=e.endOffsetEvent){w+=" "+t("task.schedule.to")+" ";var l=t(e.offsetDirectionEnd),v=Math.abs(e.endOffsetMin)/60,c=t(v>1?"task.schedule.hours":"task.schedule.hour");w+=v+" "+c+" "+l+" "+a[e.endOffsetEvent]}return"task.schedule.daily"===e.frequency?i=f+w+h+o+" "+t("task.schedule.daily"):i+=w+h+o+" "+t(e.frequency),i}};return n}]),angular.module("fw-ui").directive("fwScheduler",["$fw.repository.schedulerService",function(e){"use strict";return{scope:{fwSchedulableEntity:"=",fwEditable:"=?",fwContext:"@",fwEvents:"=?",fwIsCreate:"=",fwDefaultAllday:"@fwDefaultAllday",fwEndDateInt:"@fwEndDateInt",fwTitle:"@fwTitle",fwForceSchedule:"=?",fwNoEndDate:"@fwNoEndDate"},templateUrl:"directives/scheduler/scheduler.html",controller:"fw.ui.scheduler",controllerAs:"ctl",link:function(t){t.fwTimes=e.getTimes(30),t.fwOffsets=e.getOffsets(),t.fwFrequencies=e.getFrequencies(),t.fwWeekdays=e.getWeekdays(),t.fwMonths=e.getMonths(),t.fwDays=e.getDays(),t.fwHours=e.getHours(),t.fwAlternativeFrequencyOptions=e.getOptions(),t.fwAlternativeFrequencyDays=e.getAltFreqDays(),t.fwQtrOptions=e.getQtrOptions(),t.fwSemiAnnualOptions=e.getSemiAnnualOptions()}}}]),angular.module("fw-ui").controller("fw.ui.scheduler",["$scope","$filter","$state","$fw.repository.schedulerService","$fw.common.utilities",function(e,t,n,a,i){function o(){r(!1,!0),v=!1;var t=[I.daysOfWeekArray.model,I.daysOfMonthArray.model,I.monthsArray.model];x=a.getDefaultEmptySchedule(t),e.fwSchedulableEntity.schedule?h=a.transformResponse(e.fwSchedulableEntity.schedule):(x.timeType="none",h=x),y=angular.copy(h),b={},e.fwEvents&&(e.fwEvents=e.fwEvents.concat(T),e.fwEvents.forEach(function(e){b[e.cd]=e.name})),w=a.createStringFromSched(h,b),angular.forEach(O,function(e,t){var n="original"+t[0].toUpperCase()+t.slice(1);O[t].model=h[n]})}function r(e,t){for(var n in I){var a=I[n].truthiesCnt;if(1>a||t){I[n].model=[],I[n].truthiesCnt=0;for(var i=0;i<I[n].length;i++)I[n].model.push(e)}}}function l(e){return Array.prototype.slice.call(arguments,1).some(function(t){return e&&e===t})}function s(e,t,n,a,i){a.active=n[e]&&!k.currentSchedule.customFrequency,I[t].truthiesCnt=I.getTruthiesCnt(n),O[t].edited=!0,v=!0,"monthsArray"===t||i||(k.currentSchedule.customFrequency=!1),n&&n.length>0?(n[e]=!(a.active||n[e]),I[t].model=n):I[t].model[e]=!a.active,a.active?I[t].truthiesCnt--:I[t].truthiesCnt++,a.active=n&&n.length>0?n[e]:!a.active}function c(e,t){O[t].edited=!0,v=!0,k.currentSchedule.customFrequency=!0,I[t].model=I[t].model.map(function(t,n){return e===n}),I[t].truthiesCnt=1}function u(e,t){return function(){for(var n=e.length/t,a=e.slice(0,n),i=[],o=0;t>o;o++)i=i.concat(a);return outSum=i.reduce(function(e,t){return e+t},0),1>outSum?i.map(function(e){return e=!0}):i}}function d(t,n){if((t.customFrequency===!1||"task.schedule.daily"===t.frequency)&&(t.monthWeekNumOffset=null),t.fixedTimeHHMM===!0?(t.allDay=!0,t.fixedTimeHHMM=null,t.endTime=null):t.fixedTimeHHMM&&(t.allDay=!1),"offset"===t.timeType?(t.fixedTimeHHMM=null,t.allDay=!1,t.offsetMin=A[n.offsetDirection]*n.offsetMin,t.endOffsetMin=A[n.offsetDirectionEnd]*n.endOffsetMin,t.endTime=null):(t.offsetMin=t.offsetEvent=null,t.endOffsetMin=t.endOffsetEvent=null),t.offsetEvent||(t.offsetMin=null),t.endOffsetEvent||(t.endOffsetMin=null),"task.schedule.quarterly"===t.frequency){var a=u(t.monthsArray,4);t.monthsArray=a()}if("task.schedule.semiAnnually"===t.frequency){var i=u(t.monthsArray,2);t.monthsArray=i()}if(1==t.customFrequency){var o=t.monthsArray.reduce(function(e,t){return e+t},0),r=t.daysOfWeekArray.reduce(function(e,t){return e+t},0),l=t.daysOfMonthArray.reduce(function(e,t){return e+t},0);1>o&&(t.monthsArray=Array.apply(null,Array(12)).map(function(){return!0})),1>r&&(t.daysOfWeekArray=Array.apply(null,Array(7)).map(function(){return!0})),l>0&&(t.daysOfMonthArray=Array.apply(null,Array(31)).map(function(){return!0}))}"calendar"==e.fwContext&&"task.schedule.daily"==k.currentSchedule.frequency&&(t.allDay=!0,t.everyHourDaily=0)}function f(){e.fwSchedulableEntity.schedule=null}function m(){return k.currentSchedule.allDay!=y.allDay||k.currentSchedule.fixedTimeHHMM!=y.fixedTimeHHMM||k.currentSchedule.offsetMin!=y.offsetMin||k.currentSchedule.endOffsetMin!=y.endOffsetMin||k.currentSchedule.offsetEvent!=y.offsetEvent||k.currentSchedule.endOffsetEvent!=y.endOffsetEvent||k.currentSchedule.monthWeekNumOffset!=y.monthWeekNumOffset||k.currentSchedule.frequency!=y.frequency||k.currentSchedule.customFrequency!=y.customFrequency}function p(){if("task.schedule.daily"===k.currentSchedule.frequency?r(!0,!0):r(!0),"none"===k.currentSchedule.timeType)return void f();var t=angular.copy(k.currentSchedule);"task.schedule.daily"!==k.currentSchedule.frequency&&(t.endTime=null,t.everyHourDaily=null,t.endOffsetMin=null,t.endOffsetEvent=null),null!=k.currentSchedule.endTime&&(t.endTime=k.currentSchedule.endTime),null!=k.currentSchedule.everyHourDaily&&0!=k.currentSchedule.everyHourDaily&&(t.everyHourDaily=60*k.currentSchedule.everyHourDaily),0===k.currentSchedule.everyHourDaily&&(t.endTime=null,t.endOffsetMin=null,t.endOffsetEvent=null),v||m()?(t.daysOfWeekArray=I.daysOfWeekArray.model,t.daysOfMonthArray=I.daysOfMonthArray.model,t.monthsArray=I.monthsArray.model,t.string=!0,"task.schedule.daily"!==k.currentSchedule.frequency&&angular.forEach(O,function(e,n){e.edited||(t[n]=e.model)}),d(t,k.currentSchedule),e.fwSchedulableEntity.schedule=t):(t.daysOfWeekArray=k.currentSchedule.originalDaysOfWeekArray,t.daysOfMonthArray=k.currentSchedule.originalDaysOfMonthArray,t.monthsArray=k.currentSchedule.originalMonthsArray,d(t,k.currentSchedule),e.fwIsCreate||(e.fwSchedulableEntity.schedule=t))}function g(e){var t=i.convertDateToUrlParameter(e);k.currentSchedule.endDateInt=t}var h,w,v,y,b,x,k=this,C=t("translate"),T=[{name:C("task.schedule.locationArrivalTime"),cd:"ARRIVAL_TIME"},{name:C("task.schedule.locationOpenTime"),cd:"OPEN_TIME"},{name:C("task.schedule.locationCloseTime"),cd:"CLOSE_TIME"}],O={daysOfWeekArray:{edited:!1,model:[]},daysOfMonthArray:{edited:!1,model:[]},monthsArray:{edited:!1,model:[]}},I={getTruthiesCnt:function(e){return e.reduce(function(e,t){return e+t},0)},daysOfWeekArray:{length:7,model:[],truthiesCnt:0},daysOfMonthArray:{length:31,model:[],truthiesCnt:0},monthsArray:{length:12,model:[],truthiesCnt:0}},A={"task.schedule.before":-1,"task.schedule.after":1,Neutral:0};o(),e.$watch("ctl.currentSchedule",p,!0),"true"===e.fwDefaultAllday&&(h.fixedTimeHHMM=!0,h.timeType="time"),angular.extend(k,{init:o,shouldShowDayMonthOptions:l,setBool:s,setCustomBool:c,resetMetaMap:r,userChangedEndDate:g,defaultAllDay:"true"===e.fwDefaultAllday?!0:!1,noEndDate:"true"===e.fwNoEndDate?!0:!1,currentSchedule:h,currentScheduleText:w,daysOfWeekArray:h.daysOfWeekArray,daysOfMonthArray:h.daysOfMonthArray,monthsArray:h.monthsArray,endDate:e.fwEndDateInt?i.convertUrlDateToDateObject(e.endDateInt):h.endDateInt?i.convertUrlDateToDateObject(h.endDateInt):null})}]),angular.module("fw-ui").factory("$fw.saml.ServiceProvider",["$resource","$fwConfig",function(e,t){var n=t.urls.svcBase+"/saml/sp/:name",a={name:"@name"},i={update:{method:"PUT"}},o=e(n,a,i);return o}]),angular.module("fw-ui").directive("fwSamlSp",["$rootScope","$q","$timeout","$fw.core.locale","$sce",function(e,t,n,a,i){return{scope:{spId:"@",target:"@",label:"@",warn:"@",relayState:"@",preFlight:"&"},restrict:"E",transclude:!0,controller:"fw.saml-sp.controller as ctl",templateUrl:"directives/saml-sp/saml-sp.html",link:function(o,r,l,s,c){function u(){var e=f.reduce(function(e,t){return e.then(function(e){return t.call(self,e)})},t.resolve());e.then(function(){n(function(){d.submit()},300)})}o.access_token=sessionStorage.getItem("fw-auth"),o.locale=a.getActive().replace("-","_"),o.country=e.currentUser._homeLocationCountryCd;var d=r[0].getElementsByTagName("form")[0];null==o.target&&(o.target="_blank");var f=[],m=o.preFlight();null!=m&&f.push(m),o.warn=angular.isDefined(o.warn)?o.warn:"true","true"==o.warn&&f.push(s.warning);var p=function(){return s.getSp(o.spId).then(function(e){return null!=o.relayState&&(e.relayState=o.relayState),o.sp=e,e})};f.push(p);var g=function(){return s.getIdp().then(function(e){return o.idpUrl=i.getTrustedResourceUrl(e),e})};f.push(g),o.doSubmit=u,c(o,function(e){o.hasTransclusion=e.length>0,o.hasTransclusion?r.append(e):null==o.label&&u()})}}}]),angular.module("fw-ui").controller("fw.saml-sp.controller",["$scope","$q","$fwConfig","$fw.core.rest.LookSystemProperty","$fw.saml.ServiceProvider","$mdDialog",function(e,t,n,a,i,o){"use strict";var r=this,l="/idp/ontracksso/go";return r.getSp=function(e){return i.get({name:e}).$promise},r.getIdp=function(){return a.one("idp.url").get().then(function(e){return e+l},function(){return l})},r.warning=function(){var e=o.confirm().title("WARNING!").textContent("You are about to launch an external application. This application is not covered by the Ontrack Terms of Use. Press OK if you wish to proceed.").ok("OK").cancel("Cancel");return o.show(e)},r}]),angular.module("fw-ui").directive("fwProgressBar",[function(){return{scope:{percent:"@",colors:"=",colorsLogicConfig:"="},restrict:"AE",replace:!0,templateUrl:"directives/progress-bar/progress-bar.html",link:function(e){var t=e.percent/100,n={warningThreshold:.5,cautionThreshold:.9};n=e.colorsLogicConfig?e.colorsLogicConfig:n,e.getProgressColor=function(){return e.colors?t<n.warningThreshold?"fw-warning-bg":t<n.cautionThreshold?"fw-caution-bg":"fw-success-bg":""},e.getProgressStyle=function(){return{width:e.percent+"%"}}}}}]),angular.module("fw-ui").directive("fwPassword",[function(){"use strict";return{restrict:"A",require:"ngModel",scope:{confirmPassword:"=?"},link:function(e,t,n,a){function i(e,t){if(String.codePointAt)return e.codePointAt(t);if(null==e)throw TypeError();var n=e.length,t=t?Number(t):0;if(t!=t&&(t=0),0>t||t>=n)return void 0;var a,i=e.charCodeAt(t);return i>=55296&&56319>=i&&n>t+1&&(a=string.charCodeAt(t+1),a>=56320&&57343>=a)?1024*(i-55296)+a-56320+65536:i}function o(){if(String.fromCodePoint)return String.fromCodePoint.apply(null,arguments);var e,t,n=16384,a=[],i=-1,o=arguments.length;if(!o)return"";for(var r="";++i<o;){var l=Number(arguments[i]);if(!isFinite(l)||0>l||l>1114111||Math.floor(l)!=l)throw RangeError("Invalid code point: "+l);65535>=l?a.push(l):(l-=65536,e=(l>>10)+55296,t=l%1024+56320,a.push(e,t)),(i+1==o||a.length>n)&&(r+=String.fromCharCode.apply(null,a),a.length=0)}return r}function r(e,t){for(var n=!1,a=o(t),i=0;i<e.length;i++)if(XRegExp("\\p{"+e[i]+"}").test(a)){n=!0;break}return n}function l(e){return r(w,e)}function s(e){return r(y,e)}function c(e){return r(v,e)}function u(e){return r(b,e)}function d(e){var t=!1;return(12294==e||12295==e||e>=12321&&12329>=e||e>=12344&&12346>=e||e>=13312&&19893>=e||e>=19968&&40938>=e||e>=63744&&64217>=e||e>=64112&&64217>=e||e>=94208&&100332>=e||e>=100352&&101106>=e||e>=110960&&111355>=e||e>=131072&&173782>=e||e>=173824&&177972>=e||e>=177984&&178461>=e||e>=178208&&183969>=e||e>=183984&&191456>=e||e>=194560&&195101>=e)&&(t=!0),t}function f(e){return e.length>=8&&e.length<=50}function m(e){var t=[0,0,0,0,0];if(!f(e))return!1;for(var n=0;;n++){var a=i(e,n);if(void 0===a)break;l(a)?t[0]++:c(a)?t[1]++:s(a)?t[2]++:u(a)?t[3]++:d(a)&&t[4]++}for(var o=0,n=0;n<t.length;n++)t[n]>0&&o++;return o>=2}function p(e){return a.$setValidity("requirements",m(e)),e}function g(e,t){var n=!0;return t?e!==t&&(n=!1):n=!0,n}function h(t){return a.$setValidity("match",g(t,e.confirmPassword)),t}var w=["Nd"],v=["Lu"],y=["Ll","Lo"],b=["Pd","Ps","Pe","Po","Sc","Sm"];a.$parsers.push(p),a.$parsers.push(h)}}}]),angular.module("fw-ui").directive("fwPagination",[function(){return{scope:{setPageData:"=",autoUpdate:"@",onPageChange:"&",hideButtons:"=",hideMessage:"=",extraMessage:"=",isBottom:"="},restrict:"E",controller:"fw.ui.pagination.paginationController",controllerAs:"ctl",templateUrl:"directives/pagination/pagination.html",link:function(e,t,n,a){angular.isDefined(e.autoUpdate)&&"true"==e.autoUpdate&&e.$watch("setPageData",function(e){null!=e&&e["X-RowCount"]&&a.updateState(e)})}}}]),angular.module("fw-ui").controller("fw.ui.pagination.paginationController",["$scope","$location","$filter","$rootScope",function(e,t,n,a){function i(t){p=0,g=[],h=-1;var n="";if(f.total=Number(t["X-RowCount"]||t["x-rowcount"]),f.first_row=Number(t["X-FirstRowNum"]||t["x-firstrownum"]||0)+1,f.of_total=Number(t["X-LastRowNum"]||t["x-lastrownum"]),f.current_page=Number(t["X-Page"]||t["x-page"]||1),f.of_total>f.total)return void c(1);1===f.current_page&&f.of_total===f.total&&(f.hideButtons=!0),"tr-tr"==a.lang?(n=d(1==f.of_total?"label.totalresult":"label.totalresults"),f.paginationString=d("label.of")+" "+f.total+" "+d("label.inside")+" "+f.first_row+" "+d("label.to")+" "+f.of_total+" "+n):(n=d(1==f.total?"label.result":"label.results"),f.paginationString=e.hideButtons?d("label.displaying")+" "+f.first_row+" - "+f.of_total+" "+d("label.of")+" "+f.total+" "+n:f.first_row+" "+d("label.to")+" "+f.of_total+" "+d("label.of")+" "+f.total+" "+n);var i=Math.ceil(f.total/Number(t["X-ResultsPerPage"]||t["x-resultsperpage"]||20));if(p!=i){p=i,g=[];for(var o=[],r=1;i>=r;r++)o.push(r);for(;o.length;)g.push(o.splice(0,m))}var l=Math.floor((f.current_page-1)/m);h!=l&&(h=l,f.hasNextGroup=l<g.length-1,f.hasPreviousGroup=l>0,f.current_group.pop(),f.current_group.push(g[l])),f.hasPreviousPage=f.current_page>1,f.hasNextPage=f.current_page<p}function o(){f.current_group=[],h+=1,f.current_group.push(g[h]),f.hasNextGroup=h<g.length-1,f.hasPreviousGroup=h>0}function r(){f.current_group=[],h-=1,f.current_group.push(g[h]),f.hasNextGroup=h<g.length-1,f.hasPreviousGroup=h>0}function l(){c(parseInt(f.current_page)+1)}function s(){c(parseInt(f.current_page)-1)}function c(n){t.search("page",n),e.onPageChange&&e.onPageChange()&&e.onPageChange()(n)}var u,d=n("translate"),f=this,m=3,p=0,g=[],h=-1;angular.extend(f,{setPage:c,nextGroup:o,prevGroup:r,nextPage:l,prevPage:s,paginationString:u,current_group:[],current_page:void 0,total:void 0,first_row:void 0,of_total:void 0,hasPreviousPage:!1,hasNextPage:!1,hasPreviousGroup:!1,hasNextGroup:!1,updateState:i,isBottom:1==e.isBottom,hideButtons:1==e.hideButtons||!e.isBottom,hideMessage:1==e.hideMessage||e.isBottom,extraMessage:e.extraMessage}),f.updateState(e.setPageData)}]),angular.module("fw-ui").directive("ownerSelector",[function(){return{scope:{value:"="},restrict:"AE",controller:"fw.newsfeed.owner-selector.controller",controllerAs:"ctl",templateUrl:"directives/owner-selector/owner-selector.html",link:function(){}}
}]),angular.module("fw-ui").controller("fw.newsfeed.owner-selector.controller",["$scope","$fw.ui.location-list.service","$filter","$rootScope","$translate",function(e,t,n,a){"use strict";var i=this,o={},r=a.currentUser,l=r.userId,s=n("orderBy"),c=function(){t.getLocationList(null).then(function(e){var t={};o=e.map(function(e){return{ownerId:e.ownerId,ownerNameFirst:e.ownerNameFirst,ownerNameLast:e.ownerNameLast,fullFirstLastName:e.ownerNameFirst+" "+e.ownerNameLast,fullLastFirstName:e.ownerNameLast+", "+e.ownerNameFirst,locationCd:e.locationCd,locations:[]}}),o=o.filter(function(e){return e.ownerId in t||null===e.ownerId?(null!==e.ownerId&&t[e.ownerId].locations.push(e.locationCd),!1):(t[e.ownerId]=e,t[e.ownerId].locations.push(e.locationCd),!0)}),o=s(o,"-fullLastFirstName",!0);var a=n("translate");o.unshift({fullFirstLastName:a("common.all.masc"),fullLastFirstName:a("common.all.masc"),ownerId:l,locations:{length:r.locationCount}}),i.owner.list=o}),u()},u=function(){console.log("OWNER SEKLECTED ->",i.owner.selected),e.value=i.owner.selected};angular.extend(i,{owner:{list:null,selected:l},userId:l,setInput:u}),c()}]),angular.module("fw-ui").directive("fwOpslinkSurvey",[function(){return{scope:{fwCard:"=?",fwIsQuiz:"=",fwId:"=",fwCloseDateTime:"=",fwIsToday:"=",fwOnAnswer:"=",fwFull:"=",fwFromMandatory:"=",fwForceResponse:"=",fwForceQuestions:"=",fwDisableButtons:"=",fwMandatoryCardHandler:"="},restrict:"E",templateUrl:"directives/opslink-survey/opslink-survey.html",link:function(){}}}]),angular.module("fw-ui").directive("fwOpslinkQuiz",["$fw.common.resource.survey","$rootScope","$q","$fw.opslink.mandatoryCardsService","$fw.ui.pollsquiz.service",function(e,t,n,a,i){return{scope:{fwCard:"=?",fwId:"=",fwCloseDateTime:"=",fwIsToday:"=",fwOnAnswer:"=",fwFromMandatory:"=",fwFull:"=",fwForceResponse:"=",fwForceQuestions:"=",fwDisableButtons:"=",fwMandatoryCardHandler:"="},restrict:"E",templateUrl:"directives/opslink-quiz/opslink-quiz.html",controllerAs:"ctl",controller:"fw.opslink.quiz",link:function(a){function o(t){var n=c?e.getForCard({id:t,cardId:c.id,choices:!0}):e.get({id:t,choices:!0});return n.$promise.then(function(e){return a.fwSurvey=e})}function r(t){var i;return i=t instanceof Number?e.getChoices({id:t}).$promise:n.when(t).then(function(t){if(t.choices){var n=t.choices;return delete t.choices,n}return e.getChoices({id:t.id}).$promise}),i.then(function(e){return a.fwChoices=e,a.fwChoiceIdx=e.reduce(function(e,t){return e[t.id]=t,e},{}),{choices:a.fwChoices,choiceIdx:a.fwChoiceIdx}})}function l(t){return e.getResponse({id:t}).$promise.then(function(e){var t=Object.keys(e).filter(function(t){return"number"==typeof e[t]}).reduce(function(t,n){return t[n]=e[n],t},{}),n=Object.keys(t).reduce(function(t,n){return t+e[n]},0);a.fwResponse=Object.keys(t).map(function(t){var a=0===n?0:i.distributeRounds(e,t,n);return{id:t,pct:a}})})}function s(t,n){return e.getUserResponse({id:t,userId:n}).$promise}var c=a.fwFull||a.fwCard;return a.fwFull?(a.fwChoiceIdx=c.choices.choiceIdx,a.fwChoices=c.choices.choices,a.fwSurvey=c.survey,a.showQuestions=!0,void(a.fwId=c.survey.id)):void(a.fwId&&!function(e,t){var i={};i.survey=o(e),i.choices=r(i.survey),a.showQuestions=!0,n.all(i).then(function(n){return a.fwForceResponse===!0?(a.showQuestions=!1,void l(e)):a.fwForceQuestions===!0?void(a.showQuestions=!0):a.fwCloseDateTime<=Date.now()?(a.showQuestions=!1,void l(e)):void s(e,t).then(function(){l(e),a.showQuestions=!1}).catch(function(e){404===e.status&&(a.fwIsToday&&!a.fwFromMandatory?(n.what="survey",a.fwMandatoryCardHandler.$emit("mandatoryCardDetected",n)):a.fwInStream=!0,a.showQuestions=!0)})})}(a.fwId,t.currentUser.id))}}}]),angular.module("fw-ui").controller("fw.opslink.quiz",["$scope","$rootScope","$filter","$fw.common.resource.survey","$interval",function(e,t,n,a,i){function o(){return e.showQuestions===!0}function r(n){return a.postResponse({id:e.fwId},{userId:t.currentUser.id,quickSurveyChoice:n.id}).$promise.then(function(){a.getResponse({id:e.fwId}).$promise.then(function(t){var n=Object.keys(t).filter(function(e){return"number"==typeof t[e]}).reduce(function(e,n){return e[n]=t[n],e},{});d=Object.keys(n).reduce(function(e,n){return e+t[n]},0),e.fwResponse=Object.keys(n).map(function(e){return{id:e,pct:Math.round(t[e]/d*100)}}),e.fwFromMandatory&&s(),e.showQuestions=!1})})}function l(){return e.showQuestions===!1}function s(){u.isHideable=!0;var e=i(function(){0===u.secondsLeft&&(i.cancel(e),u.secondsLeft=5,c()),u.secondsLeft--},1e3);p.push(e)}function c(){for(u.isHideable=!1;p.length;)i.cancel(p.pop());e.fwOnAnswer&&e.fwOnAnswer()}var u=this,d=0,f=5,m=!1,p=[];angular.extend(u,{answer:r,showQuestions:o,showResults:l,secondsLeft:f,isHideable:m,next:c})}]),angular.module("fw-ui").directive("fwOpslinkPoll",["$fw.common.resource.survey","$rootScope","$q","$fw.opslink.mandatoryCardsService","$fw.ui.pollsquiz.service",function(e,t,n,a,i){return{scope:{fwCard:"=?",fwId:"=",fwCloseDateTime:"=",fwIsToday:"=",fwOnAnswer:"=",fwFromMandatory:"=",fwFull:"=",fwForceResponse:"=",fwForceQuestions:"=",fwDisableButtons:"=",fwMandatoryCardHandler:"="},restrict:"E",templateUrl:"directives/opslink-poll/opslink-poll.html",controllerAs:"ctl",controller:"fw.opslink.poll",link:function(a){function o(t){var n=c?e.getForCard({id:t,cardId:c.id,choices:!0}):e.get({id:t,choices:!0});return n.$promise.then(function(e){return a.fwSurvey=e})}function r(t){var i;return i=t instanceof Number?e.getChoices({id:t}).$promise:n.when(t).then(function(t){if(t.choices){var n=t.choices;return delete t.choices,n}return e.getChoices({id:t.id}).$promise}),i.then(function(e){return a.fwChoices=e,a.fwChoiceIdx=e.reduce(function(e,t){return e[t.id]=t,e},{}),{choices:a.fwChoices,choiceIdx:a.fwChoiceIdx}})}function l(t){return e.getResponse({id:t}).$promise.then(function(e){var t=Object.keys(e).filter(function(t){return"number"==typeof e[t]}).reduce(function(t,n){return t[n]=e[n],t},{}),n=Object.keys(t).reduce(function(t,n){return t+e[n]},0);a.fwResponse=Object.keys(t).map(function(t){var a=0===n?0:i.distributeRounds(e,t,n);return{id:t,pct:a}})})}function s(t,n){return e.getUserResponse({id:t,userId:n}).$promise}var c=a.fwFull||a.fwCard;return a.fwFull?(a.fwChoiceIdx=c.choices.choiceIdx,a.fwChoices=c.choices.choices,a.fwSurvey=c.survey,a.showQuestions=!0,void(a.fwId=c.survey.id)):void(a.fwId&&!function(e,t){var i={};i.survey=o(e),i.choices=r(i.survey),a.showQuestions=!0,n.all(i).then(function(n){return a.fwForceResponse===!0?(a.showQuestions=!1,void l(e)):a.fwForceQuestions===!0?void(a.showQuestions=!0):a.fwCloseDateTime<=Date.now()?(a.showQuestions=!1,void l(e)):void s(e,t).then(function(){l(e),a.showQuestions=!1}).catch(function(e){404===e.status&&(a.fwIsToday&&!a.fwFromMandatory?(n.what="survey",a.fwMandatoryCardHandler.$emit("mandatoryCardDetected",n)):a.fwInStream=!0,a.showQuestions=!0)})})}(a.fwId,t.currentUser.id))}}}]),angular.module("fw-ui").controller("fw.opslink.poll",["$scope","$rootScope","$filter","$fw.common.resource.survey","$interval",function(e,t,n,a,i){function o(){return e.showQuestions===!0}function r(n){return a.postResponse({id:e.fwId},{userId:t.currentUser.id,quickSurveyChoice:n.id}).$promise.then(function(){a.getResponse({id:e.fwId}).$promise.then(function(t){var n=Object.keys(t).filter(function(e){return"number"==typeof t[e]}).reduce(function(e,n){return e[n]=t[n],e},{});d=Object.keys(n).reduce(function(e,n){return e+t[n]},0),e.fwResponse=Object.keys(n).map(function(e){return{id:e,pct:Math.round(t[e]/d*100)}}),e.fwFromMandatory&&s(),e.showQuestions=!1})})}function l(){return e.showQuestions===!1}function s(){u.isHideable=!0;var e=i(function(){0===u.secondsLeft&&(i.cancel(e),u.secondsLeft=5,c()),u.secondsLeft--},1e3);p.push(e)}function c(){for(u.isHideable=!1;p.length;)i.cancel(p.pop());e.fwOnAnswer&&e.fwOnAnswer()}var u=this,d=0,f=5,m=!1,p=[];angular.extend(u,{answer:r,showQuestions:o,showResults:l,secondsLeft:f,isHideable:m,next:c})}]),angular.module("fw-ui").directive("fwOnPageBottom",["$timeout",function(e){function t(e,t){r=t[0],r.addEventListener("scroll",o(1e3/60,function(t){if(t(Date.now())){var i=a(window,r);250>i&&n(e)}}))}function n(t){e(function(){t.$broadcast("fwOnPageBottom")})}function a(e,t){e.pageYOffset,t.clientHeight,e.innerHeight;return t.scrollHeight-(t.scrollTop+t.getBoundingClientRect().height)}function i(e,t){function n(){var n=[].slice.call(arguments);return t.apply(this,[e].concat(n))}return n}function o(e,t){function n(t){var n=t-a;return e>n?!1:(a=t,!0)}var a;return i(n,t)}var r;return t}]),angular.module("fw-ui").directive("fwMediaPreview",[function(){return{scope:{media:"=",layoutAlign:"@",fwReadOnly:"="},restrict:"AE",controller:"fw.ui.MediaPreviewController",controllerAs:"preview",templateUrl:"directives/media-preview/media-preview.html",link:function(){}}}]),angular.module("fw-ui").controller("fw.ui.MediaPreviewController",["$scope","$sce",function(e){var t=[{type:"image",mimes:["image/png","image/gif","image/bmp","image/jpeg","image/jpg"]},{type:"video",mimes:["video/mp4","video/avi","video/quicktime","video/x-flv","video/x-ms-wmv","video/mpeg"]},{type:"pdf",mimes:["application/pdf"]},{type:"excel",mimes:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]},{type:"word",mimes:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]},{type:"powerpoint",mimes:["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"]},{type:"text",mimes:["text/plain","text/html"]}].reduce(function(e,t){var n=t.type;return t.mimes.reduce(function(e,t){return e[t]=n,e},e),e},{}),n=this;angular.extend(n,{removeMedia:function(t){var n=e.media.indexOf(t);n>=0&&e.media.splice(n,1)},mediaType:function(e){return e.type?t[e.type]:e.media.mediaType?t[e.media.mediaType]:null}})}]),angular.module("fw-ui").directive("fwMultiCheck",[function(){"use strict";return{restrict:"EA",require:"?ngModel",link:function(e,t,n,a){a&&(a.$isEmpty=function(e){return 1>e})}}}]),angular.module("fw-ui").service("$fw.ui.Media",["md5","$fwConfig",function(e,t){"use strict";function n(e){var n=t.sysParams["cdn.token"];return a(e)?s(e,"h="+l(n,e)):e}function a(e){var t=r(e);return t&&o(i(t))?void 0:!0}function i(e){var t=e.split("&").map(function(e){return e.split("=")}).reduce(function(e,t){return e[t[0]]=t[1],e},{});return t}function o(e){return!!e.h}function r(e){var t=e.indexOf("?"),n=e.indexOf("#"),a=e.substr(t+1,n>t?n-t-1:e.length);return a}function l(t,n){var a=n.split(/[?#]/g),i=a[0];return e.createHash(t+i)}function s(e,t){var n=e.indexOf("?")>=0,a=e.indexOf("#"),i=a>=0?e.substr(a+1):"",o=e.replace(/\#.*/,"");return[o,n?"&":"?",t].concat(a>=0?["#",i]:[]).join("")}return{getLink:n}}]),angular.module("fw-ui").directive("fwMediaList",function(){var e={scope:{of:"=",fwOnDelete:"&",fabMode:"@",layoutAlign:"@",fwOnBlur:"&",fwIsReadOnly:"=",fwCanDelete:"=?"},restrict:"AE",controller:"fw.ui.MediaListController",controllerAs:"media",templateUrl:"directives/media-list/media-list.html",link:function(){}};return e}),angular.module("fw-ui").controller("fw.ui.MediaListController",["$scope",function(e){"use strict";function t(e){var t=a[e];return null==t?"fa-file-o":t}var n=this;e.of&&e.of.tempMediaLinks&&e.of.tempMediaLinks.forEach(function(t){e.of.mediaLinks.push(t)}),angular.extend(n,{list:(e.of||{}).mediaLinks||[],getIcon:function(e){return e?t(e.mediaType):void 0},blur:function(t,n){var a=e.fwOnBlur?e.fwOnBlur():null;a&&a(t,n)},removeMedia:function(t){e.fwOnDelete&&e.fwOnDelete({mediaId:t})},canDelete:e.fwCanDelete===!1?e.fwCanDelete:!0}),e.$watch("of.mediaLinks",function(e){n.list=e});var a={"image/png":"fa-file-image-o","image/jpg":"fa-file-image-o","image/jpeg":"fa-file-image-o","image/bmp":"fa-file-image-o","video/mpeg":"fa-file-video-o","video/avi":"fa-file-video-o","video/mp4":"fa-file-video-o","video/quicktime":"fa-file-video-o","video/x-flv":"fa-file-video-o","video/x-ms-wmv":"fa-file-video-o","video/webm":"fa-file-video-o","application/vnd.ms-powerpoint":"fa-file-powerpoint-o","application/vnd.openxmlformats-officedocument.presentationml.presentation":"fa-file-powerpoint-o","application/pdf":"fa-file-pdf-o","application/msword":"fa-file-word-o","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"fa-file-word-o","application/vnd.ms-excel":"fa-file-excel-o","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"fa-file-excel-o","application/octet-stream":"fa-file-o","text/html":"fa-external-link","text/plain":"fa-file-text-o"}}]),angular.module("fw-ui").directive("fwMediaDisplay",[function(){var e={scope:{media:"="},restrict:"AE",controller:"MediaDisplayController",controllerAs:"display",templateUrl:"directives/media-display/media-display.html",link:function(){}};return e}]),angular.module("fw-ui").controller("MediaDisplayController",[function(){"use strict";function e(e){var t=new RegExp("^"+e+"\\/","i");return function(e){return t.test(e)}}var t=this;angular.extend(t,{canPreview:function(e){var n=e.mediaType;return t.isImage(n)||t.isVideo(n)},isImage:e("image"),isVideo:e("video")})}]),angular.module("fw-ui").directive("fwMaxlengthValidator",[function(){return{scope:{fwInputText:"=",fwMaxlength:"="},restrict:"A",link:function(e){e.$watch("fwInputText",function(t,n){void 0===t&&n&&(e.fwInputText=n.length>=e.fwMaxlength?n.slice(0,-1):1===n.length?"":n)})}}}]),angular.module("fw-ui").directive("fwLocationSelector",[function(){"use strict";return{restrict:"E",transclude:!0,replace:!0,scope:{ngModel:"=?",fwLocationCd:"=?",fwLabel:"@?",fwForUser:"@?",fwForDags:"=?",fwOnChange:"&?",fwIncludePreopen:"@?",isRequired:"@?required",inputName:"@?name",fwDisplayMode:"@?",returnId:"@?",fwMaxResults:"@?"},templateUrl:"directives/location-selector/location-selector.html",controller:"fw.ui.location-selector.locationSelectorController",controllerAs:"ctl",link:function(){}}}]),angular.module("fw-ui").controller("fw.ui.location-selector.locationSelectorController",["$scope","$fw.location.rest.Location","$fw.location.rest.details","$fw.location.rest.locationResource","$fwConfig","$fw.ui.rest.service.dag","$q",function(e,t,n,a,i,o,r){"use strict";function l(){if(d.selectedLocation&&d.queryStr===d.selectedLocation.locationCd)return r.resolve([d.selectedLocation]);var n={locationCd:d.queryStr,userId:e.fwForUser,dag:e.fwForDags};return _.isUndefined(e.fwIncludePreopen)||(n.status=["ACTIVE","PREOPEN"]),angular.isDefined(e.fwMaxResults)&&(n.results=e.fwMaxResults),n.dag&&n.userId&&delete n.userId,n.view||(n.view="basic"),t.getList(n,f)}function s(){d.selectedLocation?(e.ngModel=d.selectedLocation.id,e.fwLocationCd=d.selectedLocation.locationCd):(e.ngModel=null,e.fwLocationCd=null);var t=e.fwOnChange?e.fwOnChange():null;t&&t(d.selectedLocation)}function c(t){(!angular.isDefined(t)|null===t||0===t.length)&&(e.ngModel=null,d.queryStr=null,e.fwLocationCd=null)}function u(){e.ngModel=null,d.queryStr=null}var d=this,f={},m=[];f[i.interceptorConfig.watchedHeaders["FW-Busy-Request"]]=!1,e.ngModel&&a.get({locationId:e.ngModel}).$promise.then(function(t){e.fwLocationCd=t.locationCd,d.queryStr=t.locationCd,e.ngModel=t.id}),m.push(e.$watch("ngModel",function(t,n){null!=t&&t!=n&&a.get({locationId:t}).$promise.then(function(t){d.selectedLocation=t,d.queryStr=t.locationCd,e.fwLocationCd=t.locationCd,e.ngModel=t.id})})),m.push(e.$watch("fwForDags",u,1)),e.$on("$destroy",function(){m.forEach(function(e){e()})}),angular.extend(d,{query:l,select:s,queryStr:e.fwLocationCd,selectedLocation:null,searchTxtChange:c})}]),angular.module("fw-ui").directive("fwAutocompleteForceSelect",[function(){function e(e,t,n,a){t.ready(function(){var n=t.find("input"),i=n.controller("ngModel"),o=t.find("md-virtual-repeat-container");o.on("blur",function(){a.scope.selectedItem||e.$apply(i.$setValidity("required",!1))})})}return{link:e,require:"mdAutocomplete",restrict:"A"}}]),angular.module("fw-ui").directive("fwFilter",["$rootScope",function(){return{restrict:"E",controller:"fw.ui.filters.filterController",controllerAs:"ctl",templateUrl:"directives/filters/filters.html",scope:{fwEntity:"=",fwState:"@",fwShowBackButton:"@",fwIsDisabled:"@"}}}]),angular.module("fw-ui").controller("fw.ui.filters.filterController",["$scope","$state",function(e,t){function n(){t.go(e.fwState||".filter",{enableBackButton:e.fwShowBackButton})}var a=this,i=0;i=e.fwEntity?e.fwEntity.filterCount:0,angular.extend(a,{filterCount:i,filter:n,fwIsDisabled:"true"===e.fwIsDisabled?!0:!1})}]),angular.module("fw-ui").service("$fw.ui.location-details",["$resource",function(e){"use strict";return e("/service/location/locationDetails")}]),angular.module("fw-ui").directive("fwLocationDetails",["$mdDialog","$fw.ui.location-details","$rootScope",function(e,t,n){return{scope:{locationId:"="},restrict:"AE",template:'<i class="fa fa-info-circle fa-2x"></i>',link:function(a,i){a.currentUser=n.currentUser,a.finalScore={},i.on("click",function(){a.locationId&&t.get({locationId:a.locationCd}).$promise.then(function(t){a.location=t,e.show({templateUrl:"directives/location-details/location-details-modal.html",scope:a,clickOutsideToClose:!0,escapeToClose:!0})},function(){console.log("ERROR: fw-location-details")})}),a.hide=function(){e.hide()}}}}]),angular.module("fw-ui").directive("fwLazyStyle",[function(){function e(e){var t=[];e.fwSrc&&(e.href=e.fwSrc.toLowerCase()),t.push(e.$watch("fwSrc",function(t,n){t!==n&&(e.href=t?t.toLowerCase():null)})),e.$on("$destroy",function(){t.forEach(function(e){e()})})}return{restrict:"E",replace:!0,scope:{fwSrc:"@"},template:'<link rel="stylesheet" type="text/css" ng-attr-href="{{href}}"></link>',link:e}}]),angular.module("fw-ui").directive("fwImageEditor",["$q","$timeout",function(e,t){function n(e){return function(t){var n=this;if(t instanceof MouseEvent){var a={x:t.clientX,y:t.clientY};return void e.apply(n,[t,a])}if(t instanceof TouchEvent){var i=t.touches?t.touches[0]:null;if(i){var a={x:i.pageX,y:i.pageY};return void e.apply(n,[t,a])}}e.apply(n,[t])}}function a(e,t,a){var i={dragStart:{el:a,name:l?"touchstart":"mousedown",fn:n(t.onCanvasDown)},dragEnd:{el:document,name:l?"touchend":"mouseup",fn:n(t.onCanvasUp)},dragMove:{el:a,name:l?"touchmove":"mousemove",fn:n(t.onCanvasMove)}};for(var o in i){var r=i[o];r.el.addEventListener(r.name,r.fn,!0)}e.$on("$destroy",function(){for(var e in i)r.el.removeEventListener(r.name,r.fn,!0)})}function i(){var t=e.defer(),n=document.createElement("input");return n.type="file",n.onchange=function(){t.resolve([].slice.call(n.files))},n.onerror=function(){t.reject()},n.$promise=t.promise,n}var o=null,r={string:window.navigator.userAgent,test:function(e){var t=this.string;return e.test(t)},isChrome:/chrome\/[\d\.]*\s+(?:mobile\s+)?safari\/5\d{2}/i,isFireFox:/gecko(?:\/[\d]*)?\s+(?:(?!firefox).*\s+)?firefox(\/[\d\.\-a-z])?/i,isWindowsVistaThrough8orAbove:/windows nt [67]{1}\.\d{1,2}/i},l="ontouchstart"in window&&!(r.test(r.isChrome)&&r.test(r.isWindowsVistaThrough8orAbove));return{scope:{options:"=",mediaLink:"=",selectedFile:"=",onSave:"&",onDelete:"&",onCancel:"&"},transclude:!0,restrict:"E",controller:"fw.ui.ImageEditorController",controllerAs:"editor",templateUrl:"directives/image-editor/image-editor.html",link:function(n,r,l,s){function c(){return g}function u(){return p}function d(){var n=e.defer(),a=i();return a.$promise.then(function(e){n.resolve(e)},function(e){n.reject(e)}),null==o?g.appendChild(a):g.replaceChild(a,o),t(function(){a.click()}),n.promise}function f(){return h}angular.extend(s.options,n.options);var m=r[0],p=document.createElement("canvas");angular.element(p).addClass("previewCanvas"),angular.element(p).addClass("fw-text-center"),m.querySelector("#previewCanvasContainer").appendChild(p),a(n,s,p);var g=document.createElement("div");g.style.display="none",m.appendChild(g);var h=document.createElement("img");g.appendChild(h),angular.extend(n,{getHiddenEl:c,getCanvas:u,getFile:d,getImage:f}),n.selectedFile&&s.loadFile(n.selectedFile)}}}]).config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|blob):|data:image\//)}]),angular.module("fw-ui").controller("fw.ui.ImageEditorController",["$scope","$q","$fw.ui.CanvasManipulation","$fw.ui.Blob",function(e,t,n,a){function i(e){return e.type.indexOf("image/")>=0}function o(t){var n=e.getCanvas(),a=n.getBoundingClientRect();return{x:(t.x-a.left)/(a.right-a.left)*n.width,y:(t.y-a.top)/(a.bottom-a.top)*n.height}}function r(){var t=e.getCanvas();if(y.options.cropDrag){var a={height:y.options.maxHeight,width:y.options.maxWidth};if(n.isPortrait(t)||n.isSquared(t)&&!n.isPortrait(a)){var i=Math.round((t.height-y.options.maxHeight)/2);T={x:0,y:i,width:y.options.maxWidth,height:y.options.maxHeight}}else{var i=Math.round((t.width-y.options.maxWidth)/2);T={x:i,y:0,width:y.options.maxWidth,height:y.options.maxHeight}}}else T={x:0,y:0,width:y.options.maxWidth,height:y.options.maxHeight}}function l(t){var a=e.getCanvas(),i={height:y.options.maxHeight,width:y.options.maxWidth},o=0,r=0;n.isPortrait(a)||n.isSquared(a)&&!n.isPortrait(i)?r=t.y-b.y:o=t.x-b.x,T.x+=o,T.y+=r,T.x<0&&(T.x=0),T.y<0&&(T.y=0),T.x+T.width>a.width&&(T.x=a.width-T.width),T.y+T.height>a.height&&(T.y=a.height-T.height)}function s(){y.showCropMessage=n.renderImage(e.getCanvas(),e.getImage(),{width:y.options.maxWidth,height:y.options.maxHeight,rotation:x,options:y.options}),r(),n.hightlightCroppedArea(e.getCanvas(),T,{fillStyle:k})}function c(){y.showCropMessage=n.renderImage(e.getCanvas(),e.getImage(),{width:y.options.maxWidth,height:y.options.maxHeight,rotation:x,options:y.options}),n.hightlightCroppedArea(e.getCanvas(),T,{fillStyle:k}),C&&window.requestAnimationFrame(c)}function u(e){x+=e,360==x&&(x=0),0>x&&(x+=360),s()}function d(t){if(i(t)){y.uploading=!0;var n=URL.createObjectURL(t),a=e.getImage();a.onload=s,a.src=n,y.file=t}}function f(){e.getFile().then(function(e){var t=e[0];y.file=t,d(y.file)})}function m(e,t){C=!0,b=o(t),reqAnimId=window.requestAnimationFrame(c),e.stopPropagation()}function p(e,t){if(C){e.stopPropagation(),e.preventDefault();var n=o(t);l(n),b=n}}function g(e){C&&(e.stopPropagation(),e.preventDefault(),C=!1,b=null)}function h(){var i=t.defer(),o=e.onSave();o&&o(i.promise);var r=n.cropCanvas(e.getCanvas(),T),l=null,s=null;try{l=r.toDataURL(),s=a.getBlob(l),i.resolve({blob:s,filename:y.file.name,dataURL:l})}catch(c){i.reject("profile.error.taintedImage")}return i.promise}function w(){var n=t.defer(),a=e.onCancel();a&&a(n.promise),n.resolve()}function v(){var n=t.defer(),a=e.onDelete();a&&a(n.promise),n.resolve()}var y=this;y.showCropMessage=!1;var b,x=0,k="rgba(235,235,235,0.8)",C=!1,T=null;angular.extend(y,{file:null,uploading:!1,error:"",addPhoto:f,rotate:u,save:h,cancel:w,loadFile:d,deleteImage:v,onCanvasDown:m,onCanvasUp:g,onCanvasMove:p,options:{cropDrag:!1,allowRotation:!0}})}]),angular.module("fw-ui").service("$fw.ui.CanvasManipulation",[function(){function e(e){return e.height>e.width}function t(e){return e.height==e.width}function n(e,t,n,a,i,o){var r={width:0,height:0,fScaleToTargetWidth:!0};if(0>=e||0>=t||0>=n||0>=a)return r;var l=n,s=a,c=n,u=a;(90==o||270==o)&&(a!=n&&e!=t&&(l=a,s=n),(n>a&&t>e||a>n&&e>t)&&(c=l,u=s));var d=c,f=t*l/e,m=e*s/t,p=u,g=m>=c;return g=g?i:!i,g?(r.width=Math.floor(d),r.height=Math.floor(f),r.fScaleToTargetWidth=!0):(r.width=Math.floor(m),r.height=Math.floor(p),r.fScaleToTargetWidth=!1),r.width!=r.height&&(r.targetleft=Math.floor((90==o||270==o)&&a>n?(u-r.width)/2:(c-r.width)/2),r.targettop=Math.floor((90==o||270==o)&&t>e&&n>a?(c-r.height)/2:(u-r.height)/2)),r}function a(t,a,i){angular.element(t).removeClass("landscape portrait");var o,r,l=t.getContext("2d"),s=i.options.fixedSize?!0:!1,c=n(a.naturalWidth,a.naturalHeight,i.width,i.height,s,i.rotation),u=c&&c.height==i.height&&c.width==i.width;return 90==i.rotation||270==i.rotation?(i.options.fixedSize||(t.width=c.height,t.height=c.width,t.width<i.width&&(t.width=i.width,c.height=i.width),t.height<i.height&&(t.height=i.height,c.width=i.height)),i.fixedSize?(o=0,r=0):(o=void 0!=c.targettop&&0!=c.targettop?-c.targettop:c.targetleft?c.targetleft:0,r=void 0!=c.targettop&&0!=c.targettop?c.targettop:c.targetleft?-c.targetleft:0)):(t.width=c.width,t.height=c.height,c.width<i.width&&(t.width=i.width,c.height=i.width),c.height<i.height&&(t.height=i.height,c.width=i.height),o=0,r=0),angular.element(t).addClass(e(t)?"portrait":"landscape"),l.clearRect(0,0,l.canvas.width,l.canvas.height),l.save(),0!=i.rotation&&null!=i.rotation&&(l.translate(l.canvas.width/2,l.canvas.height/2),l.rotate(Math.PI/(180/i.rotation)),l.translate(-l.canvas.width/2,-l.canvas.height/2)),l.drawImage(a,o,r,c.width,c.height),l.restore(),!u}function i(n,a,i){var o=n.getContext("2d");o.fillStyle=i.fillStyle,e(n)||t(n)&&!e(a)?(o.fillRect(0,0,a.width,a.y),o.fillRect(0,a.y+a.height,a.width,n.height)):(o.fillRect(0,0,a.x,a.height),o.fillRect(a.x+a.width,a.y,n.width,a.height))}function o(e,t){var n=document.createElement("canvas"),a=n.getContext("2d");return n.width=t.width,n.height=t.height,a.save(),a.drawImage(e,t.x,t.y,t.width,t.height,0,0,n.width,n.height),a.restore(),n}return{isPortrait:e,isSquared:t,renderImage:a,hightlightCroppedArea:i,cropCanvas:o}}]),angular.module("fw-ui").directive("fwIconStatus",[function(){"use strict";return{scope:{},bindToController:{fwNotStarted:"@",fwInProgress:"@",fwCompleted:"@",fwWaitingForApproval:"@",fwObjectStatus:"=",fwIconOptions:"@"},restrict:"EA",templateUrl:"directives/icon-status/icon-status.html",controller:"fw.fw-ui.iconStatusController",controllerAs:"ctl"}}]),angular.module("fw-ui").controller("fw.fw-ui.iconStatusController",[function(){"use strict";var e=this;switch(e.statusClass=e.fwIconOptions?e.fwIconOptions+" ":"",e.fwObjectStatus){case e.fwNotStarted:e.statusClass+="fa fa-circle-o";break;case e.fwInProgress:e.statusClass+="fa fa-adjust";break;case e.fwCompleted:e.statusClass+="fa fa-circle";break;case e.fwWaitingForApproval:e.statusClass+="fa fa-exclamation-circle";break;default:e.statusClass+="fa fa-circle-o"}}]),angular.module("fw-ui").directive("fwDateTimer",[function(){return{restrict:"E",controller:"fwDateTimerController",scope:{timestamp:"=",interval:"=",dayText:"@",hoursText:"@",minsText:"@"},template:'<span ng-if="showText"><span ng-if="days">{{days}} {{dayText}}</span><span ng-if="hours"> {{hours}} {{hoursText}}</span> <span ng-if="mins">{{mins}} {{minsText}}</span>&nbsp;</span>'}}]),angular.module("fw-ui").controller("fwDateTimerController",["$scope","$filter","$interval","$element",function(e,t,n,a){function i(){var n=e.timestamp,a=Date.now(),i=864e5,o=36e5,r=n-a;return e.days=Math.floor(r/i),e.hours=Math.floor(r/o-24*e.days),e.mins=t("date")(r,"m"),e.showText=!0,a>n&&(e.showText=!1),r}timeoutId=n(function(){var t=i();e.showText&&t||!angular.isDefined(timeoutId)||n.cancel(timeoutId)},e.interval),i(),a.on("$destroy",function(){angular.isDefined(timeoutId)&&n.cancel(timeoutId)})}]),angular.module("fw-ui").directive("fwMdDatepickerFullClickable",[function(){"use strict";return{restrict:"A",link:function(e,t){t.find("input")[0].setAttribute("readonly","true"),t.find("input").bind("click",function(){t.find("button")[0].click()})}}}]),angular.module("fw-ui").directive("fwIfOnce",[function(){return{restrict:"A",terminal:!0,transclude:"true",scope:{fwIfOnce:"="},link:function(e,t,n,a,i){var o=e.$watch("fwIfOnce",function(e){e===!0&&(o(),o=null,i(function(e){t.replaceWith(e)}))})}}}]),angular.module("fw-ui").directive("fwFixDatepickerBlurIssue",[function(){return{restrict:"A",link:function(e){var t=document.querySelectorAll(".md-datepicker-input"),n=Object.keys(t).map(function(e,t){return"fwFixDatepickerBlurIndex"+t});e.$watchGroup(n,function(e,n){e.forEach(function(a,i){!e[i]&&n[i]&&t.forEach(function(e){e.blur()})})})}}}]),angular.module("fw-ui").directive("fwAddActionBarBottomGap",[function(){return{scope:{},restrict:"A",link:function(e,t){var n=new MutationObserver(function(){var e=angular.element(document.querySelector("body"));angular.element(document.querySelector(".fw-fullscreen-buttons")).length?e.addClass("has-bottom-action-bar"):e.removeClass("has-bottom-action-bar")});n.observe(t[0],{childList:!0,subtree:!0})}}}]),angular.module("fw-ui").directive("fwFilterChips",[function(){return{restrict:"E",controller:"fw.ui.filter-chips.fwFilterChipsController",controllerAs:"ctl",templateUrl:"directives/filter-chips/filter-chips.html",scope:{selectedFilters:"=",onClear:"&",onRemove:"&",addCleanAfter:"=?"},link:function(e,t,n,a){function i(){var e=angular.element(document).find("md-chip-template"),t=e.length;if(t>a.addCleanAfter){var n=e[t-1];if(angular.element(n).hasClass("fw-clear")){var i=angular.element(n).parent().parent();i.addClass("fw-clear-chip")}}a.chipsReady=!0}angular.element(document).ready(function(){i()})}}}]),angular.module("fw-ui").controller("fw.ui.filter-chips.fwFilterChipsController",["$scope",function(e){function t(){return n.chipsReady&&n.selectedFilters.length>0}var n=this;return n.chipsReady=!1,n.selectedFilters=e.selectedFilters,n.addCleanAfter=e.addCleanAfter||3,n.selectedFilters.length>=n.addCleanAfter&&n.selectedFilters.push({name:"label.clearAll",cd:"CLEAR_ALL",type:"clear"}),angular.extend(n,{buttonsReady:t}),n}]),angular.module("fw-ui").directive("fwEapActionCreator",[function(){"use strict";return{scope:{locationId:"=?",actionableData:"=",fwReadOnly:"&",callback:"&",changeStatus:"&?",actionType:"@",visibility:"=?",fwOfflineService:"=?",getPreviousAction:"&?",logStatus:"=?",logScheduleDate:"=?",logId:"=?",defaults:"=?"},restrict:"AE",templateUrl:"directives/eap-action-creator/action-create.html",controller:"fw.eap.action.create.createController",controllerAs:"ctl"}}]),angular.module("fw-ui").controller("fw.eap.action.create.createController",["$scope","$rootScope","$fw.ui.ToastService","$mdDialog","$timeout","$fw.common.actions-create","$fw.common.actions-selectors","$fw.common.action","$fw.common.payload-config","$fw.common.rest.actions","$fw.common.utilities","$translate","$state","$stateParams","$filter",function(e,t,n,a,i,o,r,l,s,c,u,d,f,m,p){"use strict";function g(e,t,n){return N?$q.reject():(N=!0,a.show({templateUrl:"directives/eap-action-creator/error-warning-modal.html",controller:["$scope","$mdDialog",function(e,t){e.confirm=function(){return t.hide()}}],locals:{errorDialogTitle:p("translate")(e),errorDialogText:p("translate")(t)},bindToController:!0,controllerAs:"ctl",clickOutsideToClose:0!=n,escapeToClose:0!=n}))}function h(a){if(e.actionForm.$valid){a&&(U=Date.now());var i=new c(L.action);return i.hasOwnProperty("resolution")&&delete i.resolution,l.save(i,e.logId,U).then(function(e){return L.action=e,L.actionIsSet=!0,L.action.media=[],e}).catch(function(){t.isOffline&&(L.disabledOffline=!0,e.changeStatus&&"function"==typeof e.changeStatus&&e.changeStatus({action:L.action}),e.fwOfflineService.offlineQueue.queue().$promise.then(function(){return L.disabledOffline=!1,L.save()}))}).then(function(t){return e.callback({actionableData:e.actionableData,actionId:t?t.id:null,isUpdate:!1,timestamp:U})})}L.showErrors=!0,n.show(d.instant("actions.error.notAllFieldsSet"),1500,"fw-toast")}function w(a){if(e.actionForm.$valid){L.resolution.actionId=L.action.id,a&&(U=Date.now());var i=new c(L.action);return l.update(i,L.resolution).then(function(e){return L.action=e,L.action.media=[],L.resolution=e.resolution,L.resolution.media=[],n.show(d.instant("eap.message.saved"),1500,"fw-toast"),L.status=L.resolution.status,e}).then(function(t){return e.callback({actionableData:e.actionableData,actionId:t.id,isUpdate:!0,timestamp:U})}).catch(function(){t.isOffline?(L.disabledOffline=!0,e.changeStatus&&"function"==typeof e.changeStatus&&e.changeStatus(),L.resolution.status==F.action.resolution.RESOLVED&&(L.resolution.status=F.action.resolution.IN_PROGRESS,g("confirm.error.title","agenda.logs.compliance.offline").then(function(){N=!1})),e.fwOfflineService.offlineQueue.queue("updateAction()#"+_.id).$promise.then(function(){return L.disabledOffline=!1,L.update()
})):(L.showErrors=!0,b())})}}function v(){return L.resolution.status!==F.action.resolution.RESOLVED&&L.resolution&&null!==L.resolution.payload.resolutionText&&L.resolution.payload.resolutionText.length>0?!0:!1}function y(){L.resolution.status=L.resolution.status===F.action.resolution.RESOLVED?F.action.resolution.IN_PROGRESS:F.action.resolution.RESOLVED}function b(){n.show(d.instant("eap.message.error"),1500,"fw-toast fw-toast-error")}function x(){return L.action.hasOwnProperty("id")}function k(e){L.action.mediaLinks=I(e,L.action.mediaLinks)}function C(e){L.action.resolution.mediaLinks=I(e,L.resolution.mediaLinks)}function T(e,t){L.action.mediaLinks=A(e,t,L.action.mediaLinks)}function O(e,t){L.resolution.mediaLinks=A(e,t,L.resolution.mediaLinks)}function I(e,t){for(var n=e,a=0;a<t.length;a++)n===t[a].id&&t.splice(a,1);return t}function A(e,t,n){return n.forEach(function(n){n.id===t&&(n.caption=e)}),n}function S(t,n,a){var i={payload:{}};return null!==a&&(i.locationId=a),"routineLog"===n?(i.payload.logId=e.actionableData.id,t=o.createRoutineLogActionPayload(i)):"mwtRoutineLog"===n?(i.payload.logId=e.actionableData.id,t=o.createMWTRoutineLogActionPayload(i)):"logAttribute"===n?(i.payload.logId=e.logId,i.payload.lookLogAttributeId=e.actionableData.lookAttribute,t=o.createLogAttributeActionPayload(i)):"mwtLogAttribute"===n?(i.payload.logId=e.logId,i.payload.lookLogAttributeId=e.actionableData.lookAttribute,t=o.createMWTLogAttributeActionPayload(i)):"cookout"===n?(i.payload.lookMenuItemId=e.actionableData.menuItem.id,i.payload.logId=e.logId,t=o.createTemperatureCookoutActionPayload(i)):"qualitycheck"===n?(i.payload.locationEquipmentId=e.actionableData.locationEquipment.id,i.payload.logId=e.logId,t=o.createTemperatureQualityCheckActionPayload(i)):"userLog"===n?t=o.createUserLogActionPayload(i):"holdingLog"===n?(i.payload.logId=e.actionableData.id,t=o.createHoldingTemperatureLogActionPayload(i)):"receivingLog"===n?(i.payload.logId=e.actionableData.id,t=o.createReceivingTemperatureLogActionPayload(i)):"calibrationLog"===n?(i.payload.logId=e.logId,i.payload.entryId=e.actionableData.id,t=o.createCalibrationLogActionPayload(i)):"calibrationLogEntry"===n?(i.payload.logId=e.logId,i.payload.entryId=e.actionableData.id,t=o.createCalibrationLogEntryActionPayload(i)):t=o.createTextAction({locationId:L.locationId}),t}function M(e,t){var n=s.getConfigByPayload(e.payloadType);return{payload:{"@class":n.resolutionPayload,resolutionText:""},actionId:e.id,media:[],mediaLinks:[],status:t.action.resolution.IN_PROGRESS}}function $(){_.visibility=e.visibility?e.visibility:["ROOT","SYSADMINS","EXECUTIVES","OPERATIONS","OWNERS","MANAGERS","TEAM_MEMBERS"]}function E(){_.hasOwnProperty("resolution")&&null!==_.resolution?(P=_.resolution,P.media=[]):(P=M(_,F),_.resolution=P)}function D(){if(!e.getPreviousAction)return void(_=S(_,e.actionType,L.locationId));var t=e.getPreviousAction({attributeId:e.actionableData.id});t?(_=t,_.media=_.media?_.media:[],R=!0):_=S(_,e.actionType,L.locationId)}function q(){var n=angular.isUndefined(e.fwReadOnly)?!1:e.fwReadOnly();return(t.currentUser.hasOneRight("EAP_EDIT")||t.currentUser.hasOneRight("EAP_CREATE"))&&!n}var L=this,_={media:[],mediaLinks:[]},P={media:[],mediaLinks:[]},R=!1;L.canAddMedia=t.currentUser.hasOneRight("EAP_ADD_MEDIA"),L.locationId=null,e.locationId&&(L.locationId=e.locationId,l.setLocationId(L.locationId));var F={action:{resolution:{RESOLVED:"RESOLVED",IN_PROGRESS:"IN_PROGRESS"}}},N=!1;D(),E(),$();var U=Date.now();e.$watch("ctl.resolution.payload.resolutionText",function(e){""===e&&(L.resolution.status="IN_PROGRESS")}),e.logStatus&&e.$watch("logStatus",function(e,t){e!==t&&(L.canEdit=q())}),angular.extend(L,{save:h,resolveAction:y,canResolve:v,update:w,isActionSet:x,deleteMediaLinkAction:k,deleteMediaLinkResolution:C,saveMediaCaptions:A,saveMediaCaptionsAction:T,saveMediaCaptionsResolution:O,selectors:r,action:_,resolution:P,actionIsSet:R,refreshHappened:!0,validMediaTypes:["image/png","image/gif","image/bmp","image/jpeg","image/jpg"],resolveCheck:"RESOLVED"===P.status}),L.action.media=L.action.media?L.action.media:[],L.action.resolutionWithin?L.action.resolutionWithin=L.action.resolutionWithin:e.defaults&&e.defaults.resolutionWithin&&(L.action.resolutionWithin=e.defaults.resolutionWithin),L.action.severity?L.action.severity=L.action.severity:e.defaults&&e.defaults.severity&&(L.action.severity=e.defaults.severity),L.status=L.action.resolution.status,L.canEdit=q()}]),angular.module("fw-ui").controller("fw.ui.file-chooser.ImageChooserModalController",["$scope","$mdDialog","imageFile","cropDrag","cropHeight","cropWidth","allowRotation",function(e,t,n,a,i,o,r){"use strict";function l(){}function s(e){e.then(function(e){t.hide(e)})}function c(){t.hide()}var u=this;angular.extend(u,{save:s,remove:l,cancel:c,imageSettings:{maxWidth:a&&o>0?o:200,maxHeight:a&&i>0?i:200,fixedSize:!1,trimExcess:!0,cropDrag:a,allowRotation:r},selectedFile:n})}]),angular.module("fw-ui").directive("fwFileChooser",["$q","$timeout","$document","$mdDialog","$mdToast","$translate","$rootScope",function(e,t,n,a,i,o,r){"use strict";function l(){var t=e.defer(),a=n[0].createElement("input");return a.type="file",a.onchange=function(){t.resolve([].slice.call(a.files))},a.onerror=function(){t.reject()},a.$promise=t.promise,a}function s(i,s,d){function f(){return S}function m(e){return!e.type&&e.name&&(e.type=u[e.name.slice(e.name.lastIndexOf(".")+1)]||"",console.log("FwFileChooser directive found empty file.type and set it to "+e.type)),e}function p(e){return e=m(e),k?e.type in k:!0}function g(e){if(!i.fwMaxSize)return!0;var t=i.fwUnit?i.fwUnit:"mb";return e.size*c[t]<=i.fwMaxSize}function h(e){return e.type.indexOf("image/")>=0}function w(e){return a.show({templateUrl:"directives/file-chooser/image-chooser-modal.html",controller:"fw.ui.file-chooser.ImageChooserModalController",controllerAs:"ctl",locals:{medialink:null,imageFile:e,cropDrag:T,cropHeight:O,cropWidth:I,allowRotation:A}})}function v(e){return a.show({templateUrl:"directives/file-chooser/error-form.html",controller:["$scope","$mdDialog",function(e,t){e.ok=function(){t.hide()}}],locals:{msjPopup:e},bindToController:!0,controllerAs:"ctl"})}function y(){var n=l();n.$promise.then(function(t){return t.some(function(e){return!p(e)})?o("validation.invalidType").then(function(t){return v(t).then(function(){return e.reject("invalid_type")})}):t.some(function(e){return!g(e)})?o("validation.invalidSize").then(function(t){return v(t).then(function(){return e.reject("invalid_size")})}):t}).then(function(e){return e.reduce(function(e,t){return!h(t)||x?(t.caption=t.name,e.push(t),e):void w(t).then(function(t){return r.$emit("IMAGE_CHOOSER_CLOSED"),t&&(t.type=t.blob?t.blob.type:null,t.caption=t.filename,angular.isArray(e)||(e=[]),e.push(t)),e}).catch(function(){return null})},i.fwMedia)}).then(function(e){if(!i.fwMultiple&&e)for(;e.length>1;)e.shift()}),null==C?S.appendChild(n):S.replaceChild(n,C),t(function(){n.click()})}var b=s[0],x="fwNoImageEdit"in d,k=null,C=null,T=i.cropDrag?!0:!1,O=i.fwCropHeight?i.fwCropHeight:0,I=i.fwCropWidth?i.fwCropWidth:0,A=0==i.fwAllowRotation?i.fwAllowRotation:!0;"fwWhiteList"in i&&(k=i.fwWhiteList.reduce(function(e,t){return e[t]=1,e},{})),d.$observe("disabled",function(e){i.disableFileUpload=e});var S=n[0].createElement("div");S.style.display="none",b.appendChild(S),angular.extend(i,{addMedia:y,getHiddenEl:f,cropDrag:T,cropWidth:I,cropHeight:O,allowRotation:A})}var c={gb:9.31*Math.pow(10,-10),mb:9.54*Math.pow(10,-7),kb:9.77*Math.pow(10,-4)},u={mp4:"video/mp4",avi:"video/avi",mov:"video/quicktime",flv:"video/x-flv",wmv:"video/x-ms-wmv",mpeg:"video/mpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp",jpg:"image/jpeg",jpeg:"image/jpeg",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};return{scope:{fwMedia:"=",fwMultiple:"=?",fwWhiteList:"=?",cropDrag:"=?",fwMaxSize:"=?",fwUnit:"@?",fwCropHeight:"=?",fwCropWidth:"=?",fwAllowRotation:"=?"},restrict:"AE",template:'<md-button class="fw-appBtn fw-mb10" ng-disabled="disableFileUpload" ng-click="addMedia($event)" fw-test-id="fileChooserUploadButton"><i class="fa fa-upload fa-2x"></i></md-button>',link:s}}]),angular.module("fw-ui").directive("fwOnErrorSrc",function(){return{link:function(e,t,n){t.bind("error",function(){n.src!==n.fwOnErrorSrc&&n.$set("src",n.fwOnErrorSrc)})}}}),angular.module("fw-ui").service("$fw.ui.dagService2",["$fw.ui.rest.service.dag","$fw.ui.dagLCA","$q",function(e,t,n){function a(){g=null,h={}}function i(e,t){return e.activeNodes.length?(e.activeNodes.forEach(function(e){o(e,t)}),t):t}function o(e,n){var a=e.parent&&e.parent.parentId?e.parent:e,i=a;if(!a||e.id===n.id)return n;if(i.id===n.id)a=i;else for(;a&&a.parentId!==n.id&&a!==e;)a=a.parent;if(g){var o=t.commonAncestor(e,g);null!=o&&(o.children=o.children||[],r(n,function(e){e.id===o.id&&(l(e.children,o.children,"id"),o.children.forEach(function(t){t.parent=e}))}))}else for(var s=0;s<n.children.length;++s){var c=n.children[s];c.id===a.id&&(n.children[s]=a,a.parent=n)}return g=e,n}function r(e,t){var n=[];for(n.push(e);n.length;){var a=n.pop();a.children&&a.children.forEach(function(e){n.push(e)}),t&&t(a)}}function l(e,t,n){e=e||[];var a=e.reduce(function(e,t){return e[t[n]]=t,e},{});return t.forEach(function(t){a[t[n]]||e.push(t)}),e}function s(t){return"object"==typeof t?n.when(t):e.get({dagId:t}).$promise}function c(t){return e.getPath({dagId:t}).$promise}function u(e,t){a();var o=[],r=t.map(function(e){return s(e)});return n.all(r).then(function(e){for(var t=0;t<e.length;++t){var a=e[t];a.parentId&&o.push(m(a))}return n.all({activeLists:n.all(o),activeNodes:e})}).then(function(t){return d(e).then(function(e){return i(t,e)})})}function d(e){return s(e).then(function(e){return f(e).then(function(t){return e.children=t,e.children.forEach(function(t){t.parent=e}),e})})}function f(t){return e.getChildren({dagId:t.id}).$promise}function m(e){return s(e.parentId).then(function(t){return e.parent=t,t.children=[e],t.parentId?n.when(m(t)):t})}function p(t){return angular.isObject(t)?f(t).then(function(e){t.children=t.children||e;var a=t.children.map(function(e){return f(e)});return n.all(a).then(function(){return n.when(t)})}):e.get({dagId:t}).$promise.then(function(e){return f(e)})}var g,h={};return{fetchChildrenLazily:u,fetchChildren:f,fetchAll:p,fetchNode:s,getPath:c}}]),angular.module("fw-ui").directive("fwDag2",[function(){return{scope:{fwDagRoot:"=?",fwCutTree:"=?",fwModel:"=?",fwDagName:"=?",fwShowControls:"@",fwStartExpanded:"@",fwUnselectable:"=?",fwOnlySelectable:"=?",fwMandatorySelection:"@?",fwReadOnly:"@",fwSearchDag:"@",fwIsMulti:"@?",fwAttributeNeeded:"=?"},templateUrl:"directives/dag2/dag.html",controller:"fw.ui.dag2",controllerAs:"ctl"}}]),angular.module("fw-ui").controller("fw.ui.dag2",["$scope","$timeout","$fw.ui.dagService2","$rootScope",function(e,t,n){function a(e){var t=w.dags.indexOf(e);-1===t&&w.dags.push(e)}function i(e){var t=w.dags.indexOf(e);-1!==t&&w.dags.splice(t,1)}function o(t){var n=O[t.id]||""!=T&&!t.attributes[T],o=r(t.id);e.fwCutTree&&t.parent&&(I=t.parent.id===e.fwCutTree),v||n||!o||I||((!C||t.active&&1==w.dags.length)&&C||(t.active=!t.active),y?(t.active?a(t.id):i(t.id),g(t),h(t),e.fwModel=w.dags):(l(t),e.fwModel=t.active?t.id:null))}function r(e){var t=0===x.length;return x.length>0&&(t=A[e]),t}function l(e){u(w.rootNode,function(t){t.id!==e.id&&(t.active=!1)})}function s(e,t,a){return!e.children||a?n.fetchChildren(e).then(function(t){if(e.children=e.children||[],a){var n=e.children.reduce(function(e,t){return e[t.id]=t,e},{}),i=t.filter(function(e){return!n[e.id]});i.forEach(function(t){t.parent=e}),e.children=e.children.concat(i)}else e.children=t,e.children.forEach(function(t){t.parent=e});return t}):void 0}function c(){e.$broadcast("angular-ui-tree:collapse-all",!0)}function u(e,t){var n=[];for(n.push(e);n.length;){var a=n.pop();a.children&&a.children.forEach(function(e){n.push(e)}),t&&t(a)}}function d(e){function t(e){if(e.active)for(;e&&e.parent;)e.parent.expandNode=!0,e=e.parent,s(e,null,!0)}return u(e,t)}function f(e,t,n){e.parentId!==k&&(t.toggle(),n.stopPropagation(),s(e,t))}function m(e,t){return n.fetchChildrenLazily(e,t).then(function(e){return w.rootNode=e,w.dagTreeItr=[w.rootNode],p(w.rootNode),d(w.rootNode),w.rootNode})}function p(e){u(e,function(e){S[e.id]&&(e.active=!0)})}function g(e){u(e,function(t){e.id!==t.id&&(i(t.id),t.active=!1)})}function h(e){e.parent&&(e.parent.active=!1,i(e.parent.id),h(e.parent))}var w=this,v="true"===e.fwReadOnly,y=!!e.fwIsMulti&&"false"!==e.fwIsMulti,b=e.fwUnselectable||[],x=e.fwOnlySelectable||[],k=-1,C="true"===e.fwMandatorySelection||e.fwMandatorySelection===!0,T=e.fwAttributeNeeded||"",O=b.reduce(function(e,t){return e[t]=1,e},{}),I=!1,A=x.reduce(function(e,t){return e[t]=1,e},{});w.dags=e.fwModel?e.fwModel.constructor===Array?e.fwModel:[e.fwModel]:[];var S=w.dags.reduce(function(e,t){return e[t]=1,e},{});e.fwCutTree?(k=e.fwCutTree,m(e.fwDagRoot,w.dags)):m(e.fwDagRoot,w.dags),angular.extend(w,{choose:o,collapseAll:c,treeFullyLoaded:!1,showControls:"true"===e.fwShowControls?!0:!1,fetchChildren:s,depthFirstTraversal:u,dagNodeArrowClick:f})}]),angular.module("fw-ui").service("$fw.ui.dagService",["$fw.ui.rest.service.dag","$q",function(e,t){function n(a,i,o){var i=i||0;return l(a,i,o,!0)?void(a.depth||(a.depth=i)):angular.isObject(a)?(a.depth=i++,a.leaf?t.when(a):e.getChildren({dagId:a.id}).$promise.then(function(e){a.nodes=e;var n=r(a.nodes,i,o);return t.all(n).then(function(){return t.when(a)})})):e.get({dagId:a}).$promise.then(function(e){return n(e,i,o)})}function a(i,o,c,d){var o=o||0;return l(i,o,c,u)?void(i.depth=o++):angular.isObject(i)?(i.depth=o++,i.leaf?t.when(i):i.id===d?(u=!0,n(i,o,c)):e.getChildren({dagId:i.id}).$promise.then(function(e){var a=[];if(u=u?u:s(e,d),i.nodes=e,u)if(c>0)a=r(i.nodes,o,c);else{var l=o+1;i.nodes.forEach(function(e){e.depth=l,e.id===d&&a.push(n(e,o,1))})}else a=r(i.nodes,o,c,d);return t.all(a).then(function(){return t.when(i)})})):e.get({dagId:i}).$promise.then(function(e){return i===d?(u=!0,n(e,o,c)):a(e,o,c,d)})}function i(e){function t(e){a++>c||(n.push(e),e.nodes&&e.nodes.forEach(t))}var n=[],a=0;return t(e),n}function o(){u=!1}function r(e,t,i,o){var r=[];return e.forEach(function(e){r.push(o?a(e,t,i-1,o):n(e,t,i-1))}),r}function l(e,t,n,a){var i;return i=a?!e||t>c||0>=n:!e||t>c}function s(e,t){var n=!1;return e.forEach(function(e){e.id===t&&(n=!0)}),n}var c=150,u=!1;return{fetchChildrenConservatively:n,fetchChildrenConservativelyUntilTargetNode:a,flatten:i,clean:o}}]),angular.module("fw-ui").directive("fwDag",[function(){return{scope:{fwDagRoot:"=?",fwModel:"=?",fwDagName:"=?",fwShowControls:"@",fwStartExpanded:"@",fwReadOnly:"@",fwSearchDag:"@"},templateUrl:"directives/dag/dag.html",controller:"fw.ui.dag",controllerAs:"ctl"}}]),angular.module("fw-ui").controller("fw.ui.dag",["$scope","$timeout","$fw.ui.dagService","$fw.ui.dagTreeUtility",function(e,t,n,a){function i(t){if(!h){var n=e.fwModel==t.id;t.active=n?!t.active:!0,e.fwModel=t.active?t.id:void 0,e.fwDagName=t.active?t.name:void 0,u()}}function o(e,t){if(!t.collapsed&&!v){var a=t.childNodes();r(a)&&n.fetchChildrenConservatively(e,e.depth,g).then(function(e){t.$modelValue=e,m.allNodes=n.flatten(m.rootNode),u()})}}function r(e){var t,n;return e?(t=e.filter(function(e){return e.hasChild()}),n=e.filter(function(e){return!e.$modelValue.leaf}),t.length<1&&n.length>0):!0}function l(){e.$broadcast("angular-ui-tree:collapse-all",!0)}function s(){m.treeFullyLoaded?e.$broadcast("angular-ui-tree:expand-all",!0):c(e.fwDagRoot,0,9999).then(function(){t(function(){e.$broadcast("angular-ui-tree:expand-all",!0),m.treeFullyLoaded=!0},0)})}function c(e,t,i,o){return n.fetchChildrenConservativelyUntilTargetNode(e,t,i,o).then(function(e){if(m.rootNode=e,m.dagTreeItr=[e],m.allNodes=n.flatten(e),!w){var t=a.getTraverseTreePath(m.rootNode,o);t.forEach(function(e){e.node.expandNode=!0}),t[t.length-1].node.expandNode=!1}return u(),n.clean(),m.rootNode})}function u(){if(f(m.allNodes,null),e.fwModel){var t=_.find(m.allNodes,"id",parseInt(e.fwModel));t&&(t.active=!0,w?d(t):f(m.allNodes,t))}}function d(e){for(var t=n.flatten(e),a=0;a<t.length;t[a++].active=!0);}function f(e,t){null===t&&(t={id:null}),e.forEach(function(e){t.id!==e.id&&(e.active=!1)})}var m=this,p=3,g=2,h="true"===e.fwReadOnly?!0:!1,w="true"===e.fwSearchDag?!0:!1,v="true"===e.fwStartExpanded?!0:!1,y=w?1:e.fwModel;v&&(p=9999),c(e.fwDagRoot,0,p,y),angular.extend(m,{choose:i,collapseAll:l,expandAll:s,fetchNextLevel:o,treeFullyLoaded:!1,showControls:"true"===e.fwShowControls?!0:!1,isSearchDag:w,startExpanded:v})}]),angular.module("fw-ui").service("$fw.ui.dagTreeUtility",[function(){function e(e,t){function n(e,t){return l?void 0:(s=a(s,e.depth),s.push({key:t,node:e}),r(e)?(l=e,e):o(e)?e:void i(e))}function a(e,t){for(var n=e,a=e.length-1,i=a;i>0;i--)e[i].node.depth>=t?n.pop():i=0;return n}function i(e){e.nodes.forEach(function(e,t){return!o(e)||r(e)?n(e,t):void 0})}function o(e){return e.leaf||!e.hasOwnProperty("nodes")||e.nodes.length<1}function r(e){return e.id===t}var l,s=[];return n(e,null),s}return{getTraverseTreePath:e}}]),angular.module("fw-ui").directive("fwCommentList",function(){return{scope:{},bindToController:{fwCommentable:"=",fwDecorator:"@",fwMaxLength:"=",fwFlaggable:"=",fwEditable:"=",fwDeletable:"=",fwHasCommentRights:"=",fwIsOpen:"=",fwPreventAutofocus:"=",fwForceShow:"=",fwOnCreate:"&",fwOnDelete:"&",fwLimit:"@",fwShowMore:"@"},restrict:"AE",controller:"fw.ui.CommentListController",controllerAs:"ctl",templateUrl:"directives/comment-list/comment-list.html"}}),angular.module("fw-ui").controller("fw.ui.CommentListController",["$rootScope","$scope",function(e,t){"use strict";function n(){return!0}function a(){return!0}function i(){t.editing=!1}function o(){d(),m.fwOnCreate&&m.fwOnCreate()}function r(e,t){m.comments[t].splice(m.comments[t].indexOf(e),1),m.fwOnDelete&&m.fwOnDelete()}function l(e){console.log("Changed: "+e.text)}function s(e){console.log("Edit: "+e.text)}function c(e){console.log("Cancel: "+e.text)}function u(e){t.limitIncrement&&!e?t.limit+=t.limitIncrement:t.limit=null}function d(){var t=e.currentUser.avatar,n=e.currentUser.id,a={createdUserAvatar:t,createdUserId:n,currentUserAvatar:t,currentUserId:n,canManage:!0};m.comment=new(m.fwCommentable[p]())({text:"",auditProps:a}),m.comments["new"].unshift(m.comment)}function f(){if(m.fwCommentable){var e="$fwComment";m.fwDecorator&&(e=m.fwDecorator),m.fwCommentable[e]().query().$promise.then(function(e){m.comments.old.splice.apply(m.comments.old,[0,0].concat(e)),d()})}}var m=this,p="$fwComment";m.fwDecorator&&(p=m.fwDecorator),m.comments={"new":[],old:[]},m.fwLimit&&(t.limit=isNaN(m.fwLimit)?Number(m.fwLimit):3,m.fwShowMore&&(t.limitIncrement=isNaN(m.limitIncrement)?Number(m.fwLimit):t.limit)),m.fwCommentable.commentCount>0?f():d(),t.$watch("ctl.fwForceShow",function(e){e&&u(!0)}),angular.extend(m,{refreshComments:f,newComment:d,showMore:u,canView:n,canManage:a,cancel:i,onEdit:s,onCancel:c,onCreate:o,onUpdate:l,onDelete:r,maxLength:m.fwMaxLength||200})}]),angular.module("fw-ui").directive("fwCommentDetails",[function(){return{scope:{},bindToController:{comment:"=",fwCommentable:"=",fwDecorator:"@",fwMaxLength:"=",fwFlaggable:"=",fwEditable:"=",fwDeletable:"=",fwHasCommentRights:"=",fwPreventAutofocus:"=",fwIsOpen:"=",fwOnEdit:"&",fwOnCancel:"&",fwOnCreate:"&",fwOnUpdate:"&",fwOnDelete:"&"},restrict:"AE",controller:"fw.ui.CommentDetailsController",controllerAs:"ctl",templateUrl:"directives/comment-details/comment-details.html"}}]),angular.module("fw-ui").controller("fw.ui.CommentDetailsController",["$rootScope","$scope","$mdDialog","$timeout",function(e,t,n){"use strict";function a(){return null==p.comment.id}function i(){return!0}function o(){return a()||e.currentUser.id===p.comment.auditProps.updatedUserId}function r(){return"undefined"!=typeof p.fwEditable?p.fwEditable:!0}function l(){return"undefined"!=typeof p.fwDeletable?p.fwDeletable:!0}function s(){return"undefined"!=typeof p.fwFlaggable?p.fwFlaggable:!0}function c(){p.editing=!0,p.fwOnEdit({comment:p.comment})}function u(){p.editing=!1,p.text=p.comment.text,p.fwOnCancel({comment:p.comment})}function d(){p.text&&(p.editing=!1,p.text!==p.comment.text&&(p.comment.text=p.text,p.isNew()?p.fwCommentable[g]().save(p.comment).$promise.then(function(e){angular.copy(e,p.comment),p.fwOnCreate({comment:p.comment})}):p.fwCommentable[g]().update(p.comment).$promise.then(function(e){angular.copy(e,p.comment),p.fwOnUpdate({comment:p.comment})})))}function f(){p.fwCommentable[g]().delete({commentId:p.comment.id}).$promise.then(function(){p.fwOnDelete({comment:p.comment})}),p.editing=!1}function m(){n.show({templateUrl:"directives/comment-details/comment-confirm-modal.html",locals:{actions:{remove:!0}},controller:"fw.ui.CommentDetailsController.CommentConfirmController",controllerAs:"ctl",bindToController:!0,clickOutsideToClose:!1,escapeToClose:!0}).then(function(){return p.remove()})}var p=this,g="$fwComment";p.fwDecorator&&(g=p.fwDecorator),p.editing=a(),p.text=p.comment.text||"",angular.extend(p,{confirmRemove:m,canView:i,canManage:o,canEdit:r,canDelete:l,canFlag:s,isNew:a,edit:c,cancel:u,save:d,remove:f})}]).controller("fw.ui.CommentDetailsController.CommentConfirmController",["$scope","$mdDialog",function(e,t){var n=this;n.cancel=function(){t.cancel()},n.confirm=function(){t.hide()}}]),angular.module("fw-ui").directive("fwCalendarEvent",[function(){return{scope:{event:"=",mainImageOverride:"=?"},restrict:"EA",templateUrl:"directives/calendar-event/event.html",controllerAs:"ctl",controller:"fw.ui.CalendarEventController",link:function(){}}}]),angular.module("fw-ui").controller("fw.ui.CalendarEventController",["$rootScope","$scope","$fw.common.utilities","$fwConfigContent",function(e,t,n){function a(e){var t=!1;return e.length>0&&(t=e.filter(function(e){return"$mainImage"===e.mediaTag}),t=t.length>0?t[0].media:!1),t}function i(e){var t=a(e);return t?t.referenceUrl:!1}function o(e){var t=a(e);if(t){var n=t.mediaType;if(n.startsWith("video/"))return!0}return!1}function r(e){if(o(e)){var t=a(e);if(t){var n=t.referenceUrl;return n}return!1}}var l=this,s=t.event.payload.when.startDateInt,c=t.event.payload.when.endDateInt;if("number"==typeof s){var u=n.convertUrlDateToDateObject(s);t.event.payload.when.startDateInt=u}if("number"==typeof c){var d=n.convertUrlDateToDateObject(c);t.event.payload.when.endDateInt=d}angular.extend(l,{event:t.event,mainImage:i(t.event.mediaLinks),mainImageOverride:t.mainImageOverride,currentUser:e.currentUser,isVideo:o(t.event.mediaLinks),configVideo:{mediaPath:r(t.event.mediaLinks)}}),t.$watch("mainImageOverride",function(e,t){e!==t&&(l.mainImageOverride=e)}),t.$watch("event.payload.when",function(e,a){if(e.startDateInt!==a.startDateInt&&"number"==typeof e.startDateInt){var i=n.convertUrlDateToDateObject(e.startDateInt);t.event.payload.when.startDateInt=i}if(e.endDateInt!==a.endDateInt&&"number"==typeof e.endDateInt){var o=n.convertUrlDateToDateObject(e.endDateInt);t.event.payload.when.endDateInt=o}},!0)}]),angular.module("fw-ui").directive("fwBusySpinner",["$rootScope",function(e){function t(t,n){var a=t.tracker||e.loadingTracker;a&&(t.$watch(a.active,function(e){n[0].style.display=e?"":"none"}),n[0].style.display=a.active()?"":"none")}return{restrict:"AE",scope:{tracker:"=fwBusySpinner"},link:t,templateUrl:"directives/busy-spinner/busy-spinner.html"}}]),angular.module("fw-ui").service("$fw.action.ActionButton",[function(){var e={};return{config:function(t){angular.forEach(t,function(e){angular.isArray(e.iconRef)||(e.iconRef=[e.iconRef])}),e=t},getConfig:function(){return e},getEventHandler:function(e){return"on"+e.substr(0,1).toUpperCase()+e.substr(1)},reset:function(){for(var t in e){e[t].state="hide";var n=this.getEventHandler(t);delete e[t][n]}}}}]),angular.module("fw-ui").directive("fwActionButtons",function(){return{scope:{onConfig:"=",onAdd:"=",onSave:"=",onCancel:"=",onEdit:"=",onCopy:"=",onSearch:"=",onPrint:"=",onHelp:"="},controller:"fw.ui.ActionButtonController",controllerAs:"ctl",templateUrl:"directives/action-buttons/action-buttons.html",link:function(e,t,n,a){e.$watch("onConfig",function(e,t){e!==t&&(a.config=e)},!0),e.iconClasses=function(e){var t=[];return"string"==typeof e&&""!==e&&(t.push(e),-1===e.indexOf("ai-")&&t.push("fa")),t.join(" ")}}}}),angular.module("fw-ui").controller("fw.ui.ActionButtonController",["$q","$scope","$state","$window","$mdMedia","$fw.action.ActionButton",function(e,t,n,a,i,o){function r(e){var n="on"+e.action.substr(0,1).toUpperCase()+e.action.substr(1);s.config[e.action][n]?s.config[e.action][n].call():angular.isDefined(t[n])?t[n].call():console.log("No such action method",e.action)}function l(e){var t=("show"===e.state||"disabled"===e.state||"hide-mobile-only"===e.state&&a.innerWidth>=450)&&e.security&&e.editRights;return t}var s=this;s.$mdMedia=i,angular.extend(s,{config:o.getConfig(),buttonClick:r,showButton:l})}]),angular.module("fw-ui").directive("fwActionPayload",[function(){"use strict";return{replace:!0,scope:{action:"=",mode:"@",ngDisabled:"="},restrict:"E",templateUrl:"directives/actions/action-payload.html",link:function(){}}}]),angular.module("fw-ui").controller("fw.actions.ui.ActionPayloadController",["$scope",function(e){"use strict";function t(t){e.validation.call(thisObj,t)}var n=this;angular.extend(n,{setPayloadValidation:t})}]),angular.module("fw-ui").directive("fwAbstractActionPayload",[function(){"use strict";return{scope:!1,restrict:"E",templateUrl:"directives/actions/abstract-action-payload.html",link:function(){}}}]),angular.module("fw-ui").directive("fwAccordion",["$rootScope",function(e){return{restrict:"E",transclude:!0,controller:"fw.ui.accordion.accordionController",controllerAs:"accordionCtl",scope:{single:"@",onExpand:"&",noToggle:"=",expanded:"=?",afterToggle:"&?",selectedTitle:"=?"},link:function(t,n,a,i,o){function r(){t.noToggle!==!0&&(n.hasClass("fw-accordion--active")?s(!0):l(!0))}function l(i){t.single&&e.$emit("fw-accordion.activated"),e.$broadcast("fw-accordion.activated"),t.onExpand&&t.onExpand(),n.removeClass("fw-accordion--inactive").addClass("fw-accordion--active"),t.afterToggle&&i&&t.afterToggle({id:a.id})}function s(i){e.$broadcast("fw-accordion.deactivated"),n.removeClass("fw-accordion--active").addClass("fw-accordion--inactive"),t.afterToggle&&i&&t.afterToggle({id:a.id})}angular.extend(i,{toggle:r}),n.addClass("fw-accordion fw-accordion__container"),n.addClass("fw-accordion--inactive").removeClass("fw-accordion--active"),o(t.$parent,function(e){n.append(e)}),t.single&&e.$on("fw-accordion.activated",function(){s()}),t.expanded&&l(!0),angular.element(document).ready(function(){t.selectedTitle&&t.selectedTitle==a.id&&l(!0)}),e.$on("expandAllAccordions",function(){n.removeClass("fw-accordion--inactive").addClass("fw-accordion--active")}),e.$on("closeAllAccordions",function(){n.removeClass("fw-accordion--active").addClass("fw-accordion--inactive")})}}}]),angular.module("fw-ui").controller("fw.ui.accordion.accordionController",[function(){}]),angular.module("fw-ui").directive("fwAccordionTitle",["$rootScope",function(){return{restrict:"E",transclude:!0,scope:{preventToggle:"&"},require:"^fwAccordion",link:function(e,t,n,a,i){t.addClass("fw-accordion"),t.addClass("fw-accordion__title"),i(e.$parent,function(e){t.append(e)}),("undefined"==typeof e.preventToggle()||e.preventToggle()>0)&&(t.on("click",a.toggle),t.on("$destroy",function(){t.off("click",a.toggle)}))}}}]),angular.module("fw-ui").directive("fwAccordionBody",[function(){return{restrict:"E",transclude:!0,require:"^fwAccordion",link:function(e,t,n,a,i){t.addClass("fw-accordion"),t.addClass("fw-accordion__body"),i(e,function(e){t.append(e)})}}}]),angular.module("fw-ui").service("$fw.ui.pollsquiz.service",function(){function e(e,t,n){var a=Math.round(e[t]/n*100),i=0,o=a;angular.forEach(e,function(a,r){if(r!==t&&!isNaN(parseInt(r))){var l=Math.round(e[r]/n*100);i+=l,l>o&&(o=l)}});var r=i+a;return 100==r||a!=o?a:100>r?a+(100-r):r>100?a-(r-100):void 0}var t=this;return angular.extend(t,{distributeRounds:e}),t}),angular.module("fw-ui").service("$fw.ui.LocationList",["$http","$rootScope","$q","$fwConfig",function(e,t,n,a){function i(t,a,i){if(!t)return n.reject();i=i===!0;var o=t+"_"+a+"_"+i;if(o in s)return s[o];var r=n.defer();return e.get(l+"?"+fw.xhr.encodeMap({countryCd:a,userId:t,includeUnopened:i})).success(function(e){var t=new fw.core.DataTable;t.fromJSON(e),s[o]=r.promise,r.resolve(t)}).error(function(e){r.reject(e)}),r.promise}function o(e,n){var a=t.currentUser;return e=e||a.countryCd,i(a.userId,e,n)}var r=this,l=a.urls.svcBase+"/service/location/v2/locations",s={};angular.extend(r,{getLocationList:o,getLocationListForUser:i})}]),angular.module("fw-ui").service("$fw.ui.LocationChange",["$fw.core.emitter.service",function(e){var t=new e,n="locationChange";return{on:function(e){t.on(n,e)},off:function(e){t.off(n,e)},change:function(e){t.emit(n,e)}}}]),angular.module("fw-ui").service("$fw.ui.Blob",function(){function e(e){var a=atob(n(e)),i=a.split("").map(t);return new Uint8Array(i)}function t(e){return e.charCodeAt()}function n(e){return i(e)[3]}function a(e){return i(e)[1]}function i(e){return e.split(/:|;|,/)}return{getBlob:function(t){var n=e(t),i=a(t);return new Blob([n],{type:i})}}}),angular.module("fw-ui").config(["$fw.ui.help.helpProvider",function(e){e.setDefaultResolver(["$fwConfig",function(e){return{url:e.urls.cdnBaseSecure+"/help/general.jpg"}}])}]),angular.module("fw-ui").service("$fw.ui.ModalService",["$mdDialog","$filter",function(e,t){function n(n,a,i){return e.show({templateUrl:"modals/simple-confirm-text-modal/simple-confirm-text-modal.html",controller:"fw.ui.modal.simpleConfirmTextModalController",locals:{title:t("translate")(n),dialogText:t("translate")(a)},controllerAs:"ctl",clickOutsideToClose:0!=i,escapeToClose:0!=i})}function a(t,n,a,i){return e.show({controller:"fw.ui.modal.infoModalController",templateUrl:"modals/info-modal/info-modal.template.html",parent:angular.element(document.body),clickOutsideToClose:!0,controllerAs:"ctl",locals:{title:t,showTextTitles:a,textObj:n,isBulleted:i}})}var i=angular.extend({showSimpleConfirmTextModal:n,showInfoModal:a});return i}]),angular.module("fw-ui").filter("fwUnique",[function(){function e(e,t){var n=[],a=[];return angular.forEach(e,function(e){var i=e[t];-1===a.indexOf(i)&&(a.push(i),n.push(e))}),n}return e}]),angular.module("fw-ui").filter("fwMediaUrl",["$fw.ui.Media",function(e){return function(t){return t?e.getLink(t):t}}]),angular.module("fw-ui").filter("fwLocaleTime",["$rootScope","$filter",function(e,t){function n(e){var n=0,a=new Date,i=a.getFullYear(),o=new Date(i+"/01/15"),r=e/100,l=Math.floor(r),s=r%1>0,c=l;return s&&(e+="",n=e.substr(e.length-2)),o.setHours(c,n),t("date")(o,"h:mm a")}return n}]),angular.module("fw-ui").filter("fwTimeSlots",["$rootScope","$filter",function(e,t){function n(e,n){var a="";if(e>=0&&2400>=n){var i=t("fwLocaleTime")(e).split(" "),o=t("fwLocaleTime")(n).split(" ");e=i[0].split(":")[1]>0?i[0]:i[0].split(":")[0];var r=o[0].split(":")[1]>0?o[0]:o[0].split(":")[0],l=i[1];i.length>2&&(i.splice(0,1),l=i.join(""));var s=o[1];return o.length>2&&(o.splice(0,1),s=o.join("")),e+l+" - "+r+s}return a}return n}]),angular.module("fw-ui").filter("fwSingleTimeSlots",["$rootScope","$filter",function(e,t){function n(e){var n=e.split(" "),a=t("fwLocaleTime")(n[0]).split(" ");return timeResult=a[0].split(":")[1]>0?a[0]:a[0].split(":")[0],n.length>1?(n.shift(),timeResult+" "+a[1]+" "+n.join(" ")):timeResult+" "+a[1]}return n}]),angular.module("fw-ui").filter("fw-i18n",["$rootScope",function(e){return function(t,n){var a;if(a="string"==typeof t?t?fw.propGetter(messages,t):void 0:t,"undefined"!=typeof a&&null!=a){console.log(e);var i=e.lang,o=a[i];if(null==o&&(o=a.en),o){if(n){var r=fw.replaceTextDataAsArrayOrNull(o,n);
return r instanceof Array&&(r=r.join("")),null==r?o:r}return o}}}}]),angular.module("fw-ui").filter("fwFriendlyTime",["$rootScope","$filter",function(e,t){return function(n){var a=(e.lang,1e3),i=60*a,o=60*i,r=24*o,l=7*r,s=[{name:"week",value:l},{name:"day",value:r},{name:"hour",value:o},{name:"minute",value:i}],c={week:t("translate")("opslink.weekAgo"),day:t("translate")("opslink.dayAgo"),hour:t("translate")("opslink.hourAgo"),minute:t("translate")("opslink.minAgo")},u={week:t("translate")("opslink.weeksAgo"),day:t("translate")("opslink.daysAgo"),hour:t("translate")("opslink.hoursAgo"),minute:t("translate")("opslink.minsAgo")},d=Date.now(),f=d-n,m=s.filter(function(e){return e.value<f})[0],p=m&&Math.round(f/m.value)||0,g="";if(m&&"day"==m.name){var h=new Date;h.setHours(0,0,1,999),d=h.getTime(),f=d-n,p=Math.ceil(f/m.value)}p>1?g=u[m.name]:1===p&&(g=c[m.name]);var w=p?[p,m&&g].join(" "):"1 "+c.minute;return"fr-fr"==e.lang||"fr-ca"==e.lang?t("translate")("opslink.ago")+" "+w:w+" "+t("translate")("opslink.ago")}}]),angular.module("fw-ui").filter("fwDateObj",[function(){function e(e){var t=e.split("-"),n=Number(t[0]),a=Number(t[1])-1,i=Number(t[2]);return new Date(n,a,i)}return e}]),angular.module("fw-ui").directive("fwRelinkEvent",[function(){return{transclude:!0,restrict:"A",link:function(e,t,n,a,i){function o(){console.log("trigger-link",n.fwRelinkEvent),r&&(r.remove(),r=null),i(function(e){t.append(e),r=e})}var r=null;o();var l=e.$on(n.fwRelinkEvent,o);e.$on("$destroy",function(){console.log("eventOff"),l=l()})}}}]),angular.module("fw-ui").directive("fwFastClick",["$parse",function(e){return{restrict:"A",link:function(t,n,a){var i=e(a.fwFastClick),o=function(e){t.$apply(function(){i(t,{$event:e})})};n.on("click",o),t.$on("$destroy",function(){n.unbind("click"),delete i,delete o})}}}]),angular.module("fw-ui").directive("fwAutoFocus",["$timeout","$parse",function(e,t){return{restrict:"A",link:function(n,a,i){var o=t(i.fwAutoFocus);n.$watch(o,function(t){t===!0&&e(function(){a[0].focus()})})}}}]),angular.module("fw-ui-demo",["fw-ui","ui.router"]).config(["$urlRouterProvider","$stateProvider",function(e,t){e.otherwise("/"),t.state("demo",{url:"/",controller:"fw.ui.demo.demoController",controllerAs:"ctl",templateUrl:"demo/main.html"})}]).run(["$rootScope","$location",function(e,t){e.isActive=function(e){return e===t.path()}}]),angular.module("fw-ui-demo").controller("fw.ui.demo.demoController",["$scope",function(){var e=this;angular.extend(e,{accordion:[{title:"Standard Passage",body:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},{title:"Section 1.10.32",body:"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"}]}),console.log("Started controller demoController for module fw-ui-demo")}]),angular.module("fw-ui").run(["$templateCache",function(e){e.put("demo/footer.html",'<footer class="footer"><p style="text-align: center;" class="container">Built with <a target="_blank" href="https://github.com/kosz/generator-modular">generator-modular v0.0.4</a> | <a target="_blank" href="https://github.com/kosz/generator-modular/issues?state=open">Issues</a></p></footer>'),e.put("demo/header.html",'<md-toolbar><h2 class="md-toolbar-tools"><md-button ng-class="{ \'md-primary\': !isActive(\'/\') }" href="/" class="md-raised">Home</md-button>&nbsp;<md-button ng-class="{ \'md-primary\': !isActive(\'/example-route\') }" href="/example-route" class="md-raised">Example</md-button></h2></md-toolbar>'),e.put("demo/main.html",'<div layout="row" layout-sm="column" class="modular_content"><md-whiteframe class="md-whiteframe-z1" flex=""><h3>Examples: fw-ui.</h3><p>Write your examples and docs for this module here</p><md-card><h1>Accordion</h1><fw-accordion ng-repeat="entry in ctl.accordion"><fw-accordion-title>{{entry.title}}</fw-accordion-title><fw-accordion-body>{{entry.body}}</fw-accordion-body></fw-accordion></md-card><p style="font-size: 11px">This is a demo page for this module. This page is not part of the module project, but only meant to showcase your module\'s API. <a href="https://github.com/kosz/generator-modular/wiki/Anatomy-of-a-Module-Project">What does this mean ?</a></p></md-whiteframe></div>'),e.put("directives/action-buttons/action-buttons.html",'<md-button ng-repeat="button in ctl.config" ng-class="{ \'md-fab--cancel\': button.action==\'cancel\', \'fw-multiple\': button.iconRef.length > 1, \'fw-button-with-text\': (button.titleOn || button.titleOff), \'fw-button-with-text-on\': (button.titleOn && button.on), \'fw-button-with-text-off\': (button.titleOff && !button.on), }" class="fw-action-button md-fab fw-no-animation" ng-disabled="button.state == \'disabled\'" ng-click="ctl.buttonClick(button)" ng-show="ctl.showButton(button)" fw-test-id="fwActionButton"><div layout="row" layout-align="center center"><md-tooltip ng-if="button.tooltip && button.tooltipState == button.state">{{ button.tooltip }}</md-tooltip><span ng-if="button.titleOff && !button.on && !ctl.$mdMedia(\'xs\')">{{ button.titleOff }}</span> <span ng-if="button.titleOn && button.on && !ctl.$mdMedia(\'xs\')">{{ button.titleOn }}</span> <span ng-if="button.shortTitleOff && !button.on && ctl.$mdMedia(\'xs\')">{{ button.shortTitleOff }}</span> <span ng-if="button.shortTitleOn && button.on && ctl.$mdMedia(\'xs\')">{{ button.shortTitleOn }}</span> <i class="material-icons" ng-if="button.titleOn && button.on">close</i> <i ng-repeat="iconRef in button.iconRef" ng-class="iconClasses(iconRef)" ng-if="!(button.titleOn && button.on)"></i></div></md-button>'),e.put("directives/actions/abstract-action-payload.html",'<div ng-switch="vm.mode"><p ng-switch-when="READ_ONLY" ng-bind="action.payload.actionText"></p><md-input-container class="fw-full-width" ng-switch-default=""><label>{{::\'eap.label.actionRequired\' | translate}}</label> <textarea ng-disabled="ngDisabled" class="fw-full-width" ng-model="action.payload.actionText" maxlength="150" md-maxlength="150" required=""></textarea></md-input-container></div>'),e.put("directives/actions/action-payload.html",'<section ng-switch="action.payloadType"><section ng-switch-default=""><fw-abstract-action-payload action="action" ng-disabled="{{ngDisabled}}"></fw-abstract-action-payload></section></section>'),e.put("directives/busy-spinner/busy-spinner.html",'<div class="fw-busy-spinner"><div class="fw-busy-spinner fw-busy-spinner__shroud"></div><div class="fw-busy-spinner fw-busy-spinner__content-container"><div class="fw-busy-spinner fw-busy-spinner__ring blue"></div><div class="fw-busy-spinner fw-busy-spinner__content"><div class="fw-busy-spinner__message-container"><p class="fw-busy-spinner__message" ng-bind-html="\'busySpinner.pleaseWait\' | translate"></p></div></div></div></div>'),e.put("directives/calendar-event/event.html",'<md-card-content class="newscard" layout-padding=""><div layout="row" layout-wrap=""><div flex="100" class="fw-text-center" ng-show="ctl.mainImageOverride || ctl.mainImage"><img ng-show="ctl.mainImageOverride && ! ctl.isVideo" ng-src="{{ctl.mainImageOverride}}" style="max-width:100%; max-height: 200px;"> <img ng-hide="ctl.mainImageOverride || ctl.isVideo" ng-src="{{ctl.mainImage}}" style="max-width:100%; max-height: 200px;"><fw-ui-video-player ng-if="ctl.isVideo" config="ctl.configVideo" autoplay="false" video-poster="assets/images/fw_poster.jpg" show-controls="true"></fw-ui-video-player></div><table style="table-layout: fixed" flex="100" layout-padding=""><col width="16em"><col width="100%"><tbody><tr layout-align="start start" ng-show="ctl.event.payload.what"><td class="fw-bolder fw-accent-color-text">{{::\'calendar.labels.what\' | translate}}:&nbsp;</td><td>{{ctl.event.payload.what}}</td></tr><tr layout-align="start start" ng-show="ctl.event.payload.who"><td class="fw-bolder fw-accent-color-text">{{::\'calendar.labels.who\' | translate}}:&nbsp;</td><td>{{ctl.event.payload.who}}</td></tr><tr layout-align="start start" ng-show="ctl.event.payload.when.startDateInt || ctl.event.payload.when.endDateInt"><td class="fw-bolder fw-accent-color-text">{{::\'calendar.labels.when\' | translate}}:&nbsp;</td><td>{{ctl.event.payload.when.startDateInt | date : \'MMMM d, yyyy\'}} <i class="fa fa-long-arrow-right fa-lg" ng-show="ctl.event.payload.when.startDateInt && ctl.event.payload.when.endDateInt"></i> {{ctl.event.payload.when.endDateInt | date : \'MMMM d, yyyy\'}}</td></tr><tr layout-align="start start" ng-show="ctl.event.payload.actionsNeeded"><td class="fw-bolder fw-accent-color-text">{{::\'calendar.labels.actions\' | translate}}<br>{{::\'calendar.labels.needed\' | translate}}:&nbsp;</td><td>{{ctl.event.payload.actionsNeeded}}</td></tr></tbody></table></div></md-card-content>'),e.put("directives/comment-details/comment-confirm-modal.html",'<md-dialog><md-content><md-toolbar class="fw-toolbar" layout="row" layout-align="space-between center"><div class="fw-toolbar__title">{{\'comment.confirm.title\' | translate}}</div></md-toolbar><div ng-if="ctl.actions.remove" layout="row" layout-padding="">{{\'comment.confirm.action.remove\' | translate}}</div><div layout="row" layout-align="center center" layout-padding=""><md-button class="fw-appBtn fw-spacing-sm" ng-click="ctl.confirm();">{{\'button.confirm\' | translate}}</md-button><md-button class="fw-appBtn fw-spacing-sm" md-autofocus="" ng-click="ctl.cancel();">{{\'button.cancel\' | translate}}</md-button></div></md-content></md-dialog>'),e.put("directives/comment-details/comment-details.html",'<div class="fw-comment fw-mb10" ng-if="ctl.canView()"><div class="fw-full-width" layout="row" layout-align="start start" ng-if="!ctl.editing"><img ng-if="ctl.comment.auditProps.createdUserAvatar" class="fw-comment-pic" ng-src="{{ctl.comment.auditProps.createdUserAvatar.referenceUrl}}"> <img ng-if="!ctl.comment.auditProps.createdUserAvatar" class="fw-comment-pic" src="../navigation/assets/images/navigation/user-1.jpg"><div><div class="fw-h6" layout="row" layout-align="start center"><div><span class="fw-bolder">{{ ctl.comment.auditProps.createdUserDisplayName }}</span> | {{ctl.comment.auditProps.createdDateTime | fwFriendlyTime:lang }}</div><div><md-button ng-click="ctl.flag()" ng-show="ctl.canFlag()"><i class="fa fa-flag"></i></md-button><md-button ng-click="ctl.edit()" ng-if="ctl.canManage() && ctl.canEdit() && !ctl.editing"><i class="fa fa-pencil"></i></md-button><md-button ng-click="ctl.confirmRemove()" ng-if="ctl.canManage() && ctl.canDelete() && !ctl.editing"><i class="fa fa-trash"></i></md-button></div></div><div>{{ctl.text}}</div></div></div><div class="fw-full-width fw-comment-editing" layout="row" layout-align="start start" ng-if="ctl.editing"><img ng-if="ctl.comment.auditProps.createdUserAvatar && ctl.fwHasCommentRights" class="fw-comment-pic" ng-src="{{ctl.comment.auditProps.createdUserAvatar.referenceUrl}}"> <img ng-if="!ctl.comment.auditProps.createdUserAvatar && ctl.fwHasCommentRights" class="fw-comment-pic" src="../navigation/assets/images/navigation/user-1.jpg"><form flex="" name="fwCommentForm" layout="row" layout-align="start center" ng-if="ctl.fwHasCommentRights"><div flex=""><md-input-container class="fw-full-width fw-no-margin"><textarea id="{{ctl.fwCommentable.id}}" flex="" ng-model="ctl.text" rows="1" maxlength="ctl.fwMaxLength" md-maxlength="ctl.fwMaxLength" name="text" fw-auto-focus="ctl.fwIsOpen && !ctl.fwPreventAutofocus"></textarea><div ng-messages="fwCommentForm.text.$error"><div ng-message="md-maxlength">{{\'form.error.maxlength\' | translate}}</div></div></md-input-container></div><md-button class="fw-appBtn" style="margin:0 10px;" type="submit" ng-click="ctl.save()"><i class="fa fa-paper-plane fa-lg fa-fw"></i></md-button><md-button class="fw-appBtn" style="margin:0 10px;" ng-click="ctl.cancel()" ng-if="!ctl.isNew()"><i class="fa fa-times fa-lg fa-fw"></i></md-button></form></div></div>'),e.put("directives/comment-list/comment-list.html",'<div class="fw-h5 fw-bolder fw-mb10">{{\'comment.list.title\' | translate}}</div><div ng-repeat="comment in ctl.comments.new" ng-if="ctl.comments.new.length > 0"><div fw-comment-details="" fw-commentable="ctl.fwCommentable" comment="comment" fw-decorator="{{fwDecorator}}" fw-has-comment-rights="ctl.fwHasCommentRights" fw-on-edit="ctl.onEdit(comment)" fw-on-cancel="ctl.onCancel(comment)" fw-on-create="ctl.onCreate(comment)" fw-on-update="ctl.onUpdate(comment)" fw-prevent-autofocus="ctl.fwPreventAutofocus" fw-is-open="ctl.fwIsOpen" fw-deletable="ctl.fwDeletable" fw-editable="ctl.fwEditable" fw-flaggable="ctl.fwFlaggable" fw-on-delete="ctl.onDelete(comment, \'new\')" fw-max-length="ctl.maxLength"></div></div><div ng-repeat="comment in ctl.comments.old | limitTo: limit as results"><div fw-comment-details="" fw-commentable="ctl.fwCommentable" comment="comment" fw-has-comment-rights="ctl.fwHasCommentRights" fw-on-edit="ctl.onEdit(comment)" fw-on-cancel="ctl.onCancel(comment)" fw-on-create="ctl.onCreate(comment)" fw-on-update="ctl.onUpdate(comment)" fw-deletable="ctl.fwDeletable" fw-editable="ctl.fwEditable" fw-flaggable="ctl.fwFlaggable" fw-on-delete="ctl.onDelete(comment, \'old\')" fw-max-length="ctl.maxLength"></div></div><md-button class="fw-appBtn fw-mb20" ng-hide="results.length === ctl.comments.old.length" ng-click="ctl.showMore()">{{\'button.showMore\' | translate}} ({{results.length}} / {{ctl.comments.old.length}})</md-button>'),e.put("directives/dag/dag.html",'<script type="text/ng-template" id="nodes_renderer.html"><div ui-tree-handle class="fw-ui-tree tree-node tree-node-content angular-ui-tree-handle" ng-class="{\'angular-ui-tree-active\':node.active}" ng-click="ctl.choose(node)" ng-init="node.expandNode ? expand(this) : null"> <!--ng-if="node.nodes && node.nodes.length > 0--> <md-button ng-if="!node.leaf" data-nodrag ng-click="toggle(this); $event.stopPropagation(); ctl.fetchNextLevel(node, this);"> <span class="fa" ng-class="{\'fa-chevron-right\': collapsed || node.leaf,\'fa-chevron-down\': !collapsed}"></span> </md-button> {{node.name}} </div> <ol ui-tree-nodes="" ng-model="node.nodes" ng-class="{hidden: collapsed}"> <li ng-repeat="node in node.nodes | orderBy:\'name.trim()\'" data-nodrag ui-tree-node data-collapsed="{{!ctl.startExpanded || node.collapsed}}" ng-int="node.element = \'TEST\'"> <div ng-include="\'nodes_renderer.html\'"></div> </li> </ol></script><div layout="row"><div flex="" ui-tree="" id="tree-root" class="fw-ui-tree"><div ng-if="::ctl.showControls"><md-button ng-click="::ctl.expandAll();">{{::\'dag.expandAll\' | translate}}</md-button><md-button ng-click="::ctl.collapseAll();">{{::\'dag.collapseAll\' | translate}}</md-button></div><ol ui-tree-nodes="" ng-model="ctl.dagTreeItr"><li ng-repeat="node in ctl.dagTreeItr | orderBy:\'name.trim()\' track by id" ui-tree-node="" data-nodrag="" data-collapsed="node.collapsed"><div ng-include="\'nodes_renderer.html\'"></div></li></ol></div></div>'),e.put("directives/dag2/dag.html",'<script type="text/ng-template" id="nodes_renderer2.html"><div ui-tree-handle class="fw-ui-tree tree-node tree-node-content angular-ui-tree-handle" ng-class="{\'angular-ui-tree-active\':node.active}" ng-click="ctl.choose(node)" ng-init="node.expandNode ? expand(this) : null"> <!--ng-if="node.children && node.children.length > 0--> <md-button ng-if="!node.leaf" data-nodrag ng-click="ctl.dagNodeArrowClick(node, this, $event)"> <span class="fa" ng-class="{\'fa-chevron-right\': collapsed || node.leaf,\'fa-chevron-down\': !collapsed}"></span> </md-button> {{node.name}} </div> <ol ui-tree-nodes="" ng-model="node.children" ng-class="{hidden: collapsed}"> <li ng-repeat="node in node.children | orderBy:\'name.trim()\'" data-nodrag ui-tree-node data-collapsed="{{!ctl.startExpanded || node.collapsed}}" ng-int="node.element = \'TEST\'"> <div ng-include="\'nodes_renderer2.html\'"></div> </li> </ol></script><div layout="row"><div flex="" ui-tree="" id="tree-root" class="fw-ui-tree fw-no-padding"><div ng-if="::ctl.showControls"><md-button ng-click="::ctl.expandAll();">{{::\'dag.expandAll\' | translate}}</md-button><md-button ng-click="::ctl.collapseAll();">{{::\'dag.collapseAll\' | translate}}</md-button></div><ol ui-tree-nodes="" ng-model="ctl.dagTreeItr"><li ng-repeat="node in ctl.dagTreeItr | orderBy:\'name.trim()\' track by id" ui-tree-node="" data-nodrag="" data-collapsed="node.collapsed"><div ng-include="\'nodes_renderer2.html\'"></div></li></ol></div></div>'),e.put("directives/eap-action-creator/action-create.html",'<ng-form name="actionForm" ng-class="{\'showErrors\': ctl.showErrors, \'fw-shim\': ctl.disabledOffline }"><div class="fw-mb20" layout="row" layout-wrap="" layout-padding=""><div ng-show="ctl.disabledOffline" layout="row" layout-align="center center"><md-button class="fw-appBtn fw-mb10" ng-disabled="ctl.disabledOffline">{{\'navigation.main.offline\' | translate}}</md-button></div><div flex-xs="100" flex-gt-xs="50"><md-input-container class="fw-full-width"><label>{{::\'eap.label.severity\' | translate}}</label><md-select ng-disabled="!ctl.canEdit" required="" ng-model="ctl.action.severity" placeholder="{{::\'eap.label.severity\' | translate}}"><md-option ng-value="severity" ng-repeat="severity in ::ctl.selectors.severity">{{\'eap.severities.\' + severity + \'.long\' | translate}}</md-option></md-select></md-input-container></div><div flex-xs="100" flex-gt-xs="50"><md-input-container class="fw-full-width"><label>{{::\'eap.label.resolutionWithin\' | translate}}</label><md-select ng-disabled="!ctl.canEdit" required="" ng-model="ctl.action.resolutionWithin" ng-attr-placeholder="{{::\'eap.label.resolutionWithin\' | translate}}"><md-option ng-value="resolutionWithin" ng-repeat="resolutionWithin in ::ctl.selectors.resolutionWithin">{{\'eap.label.resolutionWithinValue.\' + resolutionWithin | translate}}</md-option></md-select></md-input-container></div><div flex="100"><fw-action-payload ng-disabled="!ctl.canEdit" required="" action="ctl.action" mode="{{ctl.mode}}"></fw-action-payload></div></div><div flex="" layout="row" layout-padding="" layout-wrap="" layout-align="start start" ng-show="ctl.isActionSet()"><div flex="100"><md-input-container class="fw-full-width"><label>{{::\'eap.label.resolution\' | translate}}</label> <textarea name="resolutionText" class="fw-full-width" ng-required="ctl.resolution.status === \'RESOLVED\'" ng-model="ctl.resolution.payload.resolutionText" md-maxlength="150" ng-disabled="!ctl.canEdit">\n        </textarea><div ng-messages="actionForm.resolutionText.$error" ng-show="actionForm.resolutionText.$dirty"><div ng-message="required">{{::\'agenda.logs.general.resolve\' | translate}}</div></div></md-input-container></div><div flex="100"><md-input-container class="fw-full-width"><md-checkbox ng-model="ctl.resolveCheck" ng-checked="ctl.resolution.status === \'RESOLVED\'" ng-click="ctl.resolveAction()" ng-disabled="!ctl.canEdit || ctl.disabledOffline">{{::\'eap.button.resolve\' |translate}}</md-checkbox></md-input-container></div></div><div fw-if-once="ctl.canAddMedia"><div layout="row" layout-wrap=""><div flex-gt-xs="50" flex-xs="100" layout-padding=""><md-toolbar class="fw-toolbar--headings fw-toolbar-dark-background" layout-align="center start">{{::\'eap.label.addMedia\' | translate}}</md-toolbar><div class="fw-mt10" layout="row" layout-align="start start" layout-wrap=""><fw-file-chooser ng-hide="!ctl.canEdit" class="fw-mr20" fw-media="ctl.action.media" fw-white-list="::ctl.validMediaTypes"></fw-file-chooser><div ng-hide="!ctl.canEdit"><fw-media-preview fw-read-only="::true" media="ctl.action.media" layout-align="start start"></fw-media-preview></div><fw-media-list layout-align="start start" fw-on-delete="ctl.deleteMediaLinkAction(mediaId)" fw-on-blur="ctl.saveMediaCaptionsAction" of="ctl.action" ng-disabled="!ctl.canEdit" fw-is-read-only="!ctl.canEdit"></fw-media-list></div></div><div flex-gt-xs="50" flex-xs="100" layout-padding="" ng-show="ctl.actionIsSet"><md-toolbar class="fw-toolbar--headings fw-toolbar-dark-background" layout-align="center start">{{::\'eap.label.addResolutionMedia\' | translate}}</md-toolbar><div class="fw-mt10" layout="row" layout-align="start start" layout-wrap=""><fw-file-chooser ng-hide="!ctl.canEdit" class="fw-mr20" fw-media="ctl.resolution.media" fw-white-list="::ctl.validMediaTypes"></fw-file-chooser><div ng-hide="!ctl.canEdit"><fw-media-preview fw-read-only="::true" media="ctl.resolution.media" layout-align="start start"></fw-media-preview></div><fw-media-list layout-align="start start" fw-on-delete="ctl.deleteMediaLinkResolution(mediaId)" fw-on-blur="ctl.saveMediaCaptionsResolution" of="ctl.resolution" ng-disabled="!ctl.canEdit" fw-is-read-only="!ctl.canEdit"></fw-media-list></div></div></div></div><div layout="row" layout-align="center center"><md-button class="fw-appBtn fw-mb10" ng-disabled="actionForm.$invalid ||!ctl.canEdit" ng-click="ctl.save(true);" ng-show="!ctl.actionIsSet">{{::\'button.saveAction\' | translate}}</md-button><md-button class="fw-appBtn fw-mb10" ng-disabled="actionForm.$invalid ||!ctl.canEdit" ng-click="ctl.update(true);" ng-show="ctl.actionIsSet">{{::\'button.updateAction\' | translate}}</md-button></div></ng-form>'),e.put("directives/eap-action-creator/error-warning-modal.html",'<md-dialog><md-content><md-toolbar class="fw-toolbar" layout="row" layout-align="space-between center"><div class="fw-toolbar__title">{{:: ctl.errorDialogTitle }}</div></md-toolbar><div layout="row" layout-padding="">{{:: ctl.errorDialogText }}</div><div layout="row" layout-align="center center" layout-padding=""><div><md-button class="fw-appBtn fw-full-width" ng-click="::confirm();">{{::\'label.ok\' | translate}}</md-button></div></div></md-content></md-dialog>'),e.put("directives/file-chooser/error-form.html",'<md-dialog><md-content><md-toolbar class="fw-toolbar" layout="row" layout-align="space-between center"><div class="fw-toolbar__title">{{::\'confirm.error.title\' | translate}}</div></md-toolbar><div layout="row" layout-padding=""><label ng-bind-html="::ctl.msjPopup"></label></div><div layout="row" layout-align="center center" layout-padding=""><md-button class="fw-appBtn fw-spacing-sm" ng-click="::ok();">OK</md-button></div></md-content></md-dialog>'),e.put("directives/file-chooser/image-chooser-modal.html",'<md-dialog aria-label=""><md-content class="fw-outerbox fw-upload" style="min-width: 250px;"><fw-image-editor selected-file="ctl.selectedFile" on-save="ctl.save" on-delete="ctl.remove" on-cancel="ctl.cancel" options="ctl.imageSettings"></fw-image-editor></md-content></md-dialog>'),e.put("directives/filter-chips/filter-chips.html",'<div class="fw-md-chips-container" layout="row" ng-show="ctl.buttonsReady()"><md-chips ng-model="ctl.selectedFilters" md-removable="true" readonly="true" md-on-remove="onRemove()"><md-chip-template ng-class="{\'fw-clear\': $chip.type ==\'clear\'}" ng-click="$chip.type!=\'clear\' ? $mdChipsCtrl.removeChipAndFocusInput($index) : onClear()"><span>{{:: $chip.name |translate }}</span></md-chip-template><button class="fw-remove-chip" md-chip-remove="" ng-show="$chip.type!=\'clear\'"><i class="material-icons md-18 filter-bttn-icon" aria-hidden="true">add_circle_outline</i></button></md-chips></div>'),e.put("directives/filters/filters.html",'<md-button class="fw-appBtn fw-spacing-sm" ng-click="ctl.filter()" ng-disabled="ctl.fwIsDisabled"><i class="fa fa-filter fa-lg"></i> <span class="fw-h6">{{ctl.filterCount}}</span></md-button>'),e.put("directives/icon-status/icon-status.html",'<i ng-class="::ctl.statusClass"></i>'),e.put("directives/image-editor/image-editor.html",'<div class="upload-photo"><div layout="column" class="fw-mt20 fw-mb20" layout-align="center center"><div ng-if="editor.file.name && !options.hideFilename" class="file-name fw-mb20"><span class="fa fa-camera-retro fa-lg">&nbsp;</span> <span ng-bind="editor.file.name"></span></div><div ng-if="editor.uploading == false && !options.hideFilename && mediaLink != null" class="file-name fw-mb20"><span class="fa fa-camera-retro fa-lg">&nbsp;</span> <span ng-bind="mediaLink.description"></span></div><div class="fw-text-center" ng-if="!options.readOnly" ng-click="editor.addPhoto()"><md-button md-autofocus="" class="fw-appBtn" ng-if="editor.uploading == false && mediaLink == null"><span lang="en">{{\'label.addPhoto\' | translate}}</span></md-button><md-button class="fw-appBtn" ng-if="editor.uploading || mediaLink != null"><span lang="en">{{\'button.change\' | translate}}</span></md-button></div></div><hr><div class="photo"><div class="default-photo" ng-if="mediaLink == null" ng-hide="editor.uploading == true"><div ng-transclude=""></div></div><div class="avatarView fw-text-center" ng-if="mediaLink != null && !editor.uploading"><img ng-src="{{mediaLink.referenceUrl}}" height="200"></div><div class="previewContainer fw-text-center" ng-show="editor.uploading == true"><div id="previewCanvasContainer" class="fw-text-center"></div><div layout="row" layout-align="center center" ng-if="editor.options.allowRotation"><a ng-disabled="!editor.file.name" class="btn fa fa-rotate-left fa-2x" style="text-decoration: none !important;" ng-click="editor.rotate(-90)"></a> <span class="fw-spacing-sm">{{\'button.rotate\' | translate}}</span> <a ng-disabled="!editor.file.name" class="btn fa fa-rotate-right fa-2x" style="text-decoration: none !important;" ng-click="editor.rotate(90)"></a></div><p class="dragInstructions smallNote fw-text-center fw-bolder" ng-if="options.cropDrag && editor.showCropMessage"><span class="fw-h4" lang="en">{{\'message.imageAdjust\' | translate}}</span></p></div></div><div class="well error" ng-hide="editor.error == \'\'"><span ng-bind="editor.error"></span></div><div layout="row" layout-align="center center" layout-padding="" layout-wrap=""><div flex="50"><md-button md-autofocus="" class="fw-appBtn fw-full-width" lang="en" ng-disabled="!editor.file.name" ng-click="editor.save()"><span>{{\'button.save\' | translate}}</span></md-button></div><div flex="50"><md-button class="fw-appBtn fw-full-width" ng-click="editor.cancel()"><span lang="en">{{\'button.cancel\' | translate}}</span></md-button></div><div flex="100" ng-if="!options.readOnly && mediaLink != null"><md-button class="fw-appBtn fw-full-width" ng-click="editor.deleteImage()"><span lang="en">{{\'button.delete\' | translate}}</span></md-button></div></div></div>'),e.put("directives/location-details/location-details-modal.html",'<div class="restInfoDialog dialogContainer"><div class="dialogContentContainer"><div class="controls"><a href="javascript: void(0);" ng-click="hide()" class="closeLnk"><img src="../onboarding/images/title-close.png"></a></div><h1><span lang="en">Restaurant</span> <span lang="fr">Restaurant</span> - <span data-ng-bind="location.locationCd"></span><div class="house"><img src="/afhome/mod/fw.tapp.ui-0.3.0/resources/house.png"> <img class="houseAttr" src="/afhome/mod/fw.tapp.ui-0.3.0/resources/t.png" data-ng-show="location.isTrad"> <img class="houseAttr" src="/afhome/mod/fw.tapp.ui-0.3.0/resources/nt.png" data-ng-hide="location.isTrad"> <img class="houseAttr" src="/afhome/mod/fw.tapp.ui-0.3.0/resources/ice_cream.png" data-ng-show="location.coldstone"></div><span ng-if="finalScore.display" class="finalScore ng-class:{ high:finalScore.indicatorLevel == 1, medium:finalScore.indicatorLevel == 2, low:finalScore.indicatorLevel == 3 }" ng-bind="finalScore.actualNm"></span></h1><h3><span lang="en">Info</span> <span lang="fr">Info</span></h3><div class="infobox info"><table><tr><td><span lang="en">Address:</span> <span lang="fr">Adresse :</span></td><td><span data-ng-bind="location.address"></span><br><span data-ng-bind="location.city"></span>, <span data-ng-bind="location.province"></span>, <span data-ng-bind="location.postalCd"></span></td></tr><tr><td><span lang="en">Type:</span> <span lang="fr">Type :</span></td><td data-i18n="common.storetype.{{location.locationType}}"></td></tr><tr><td><span lang="en">Open:</span> <span lang="fr">Ouvert :</span></td><td data-i18n="common.opentype.{{location.hoursOperations}}"></td></tr><tr><td><span lang="en">Opening Date:</span> <span lang="fr">Date d\'Ouverture :</span></td><td data-ng-bind="location.openingDate | date:\'yyyy-MM-dd\'"></td></tr><tr><td><span lang="en">Owners:</span> <span lang="fr">Propri&eacute;taires :</span></td><td><div data-ng-repeat="owner in location.ownerName" data-ng-bind="owner"></div></td></tr></table></div><h3><span lang="en">Operations</span> <span lang="fr">Op&eacute;rations</span></h3><div class="infobox ops"><table><tr><td><span lang="en">Director, Business Development:</span> <span lang="fr">Directeur, d&eacute;veloppement des affaires :</span></td><td><span data-ng-hide="location.directorName" data-i18n="noDataShort"></span> <span data-ng-show="location.directorName" data-ng-bind="location.directorName"></span></td></tr><tr><td><span lang="en">Manager, Business Development:</span> <span lang="fr">Conseiller, d&eacute;veloppement des affaires :</span></td><td><span data-ng-hide="location.dmName" data-i18n="noDataShort"></span> <span data-ng-show="location.dmName" data-ng-bind="location.dmName"></span></td></tr><tr><td><span lang="en">Manager, Operations Standards:</span> <span lang="fr">Conseiller, standards op&eacute;rationnels :</span></td><td><span data-ng-hide="location.mosName" data-i18n="noDataShort"></span> <span data-ng-show="location.mosName" data-ng-bind="location.mosName"></span></td></tr><tr><td><span lang="en">Manager, Regional Training:</span> <span lang="fr">Conseiller, formation r&eacute;gionale :</span></td><td><span data-ng-hide="location.mrtName" data-i18n="noDataShort"></span> <span data-ng-show="location.mrtName" data-ng-bind="location.mrtName"></span></td></tr></table></div><h3><span lang="en">Details</span> <span lang="fr">D&eacute;tails</span></h3><div class="infobox details"><table><tr><td><span lang="en">Drive-thru:</span> <span lang="fr">Service au volant :</span></td><td><span data-ng-show="location.isDriveThru" data-i18n="common.yes"></span> <span data-ng-show="location.isDriveThru" lang="en">- {{location.attributes[\'DT_QUEUE_SIZE\'].value}} car stack</span> <span data-ng-show="location.isDriveThru" lang="fr">- file d\'attente : {{location.attributes[\'DT_QUEUE_SIZE\'].value}}</span> <span data-ng-hide="location.isDriveThru" data-i18n="common.no"></span></td></tr><tr><td><span lang="en">AF Baking On Site:</span> <span lang="fr">Cuisson sur place :</span></td><td><span data-ng-show="location.bakingOnSite == null"><span lang="en">Unknown</span> <span lang="fr">Inconnu</span></span> <span data-ng-show="location.bakingOnSite == true" data-i18n="common.yes"></span> <span data-ng-show="locaiton.bakingOnSite == false" data-i18n="common.no"></span></td></tr><tr><td><span lang="en">Security Level:</span> <span lang="fr">Niveau de Securit&eacute; :</span></td><td data-ng-bind="location.securityLevel"></td></tr><tr><td><span lang="en">Sq Feet:</span> <span lang="fr">pi. ca. :</span></td><td><span data-ng-hide="location.squareFeet != null && location.squareFeet >= 0"><span lang="en">Unknown</span> <span lang="fr">Inconnu</span></span> <span data-ng-show="location.squareFeet >= 0" data-ng-bind="location.squareFeet"></span></td></tr></table></div><div data-ng-show="(currentUser.hasRight(\'OM_VIEW\') || currentUser.hasRight(\'OM_ENTRY\')) && currentUser.hasLocation(location.locationCd)"><h3><span lang="en">Operating Margin</span> <span lang="fr">Profits d\'exploitation</span></h3><div class="infobox details" data-ng-hide="location.pl"><span lang="en">N/A</span> <span lang="fr">S.O.</span></div><div class="infobox details" data-ng-show="location.pl"><table><tr><td><span lang="en">Date:</span> <span lang="fr">Date :</span></td><td><span data-ng-bind="location.pl.asOfDate | date:\'yyyy-MM\'"></span></td></tr><tr><td><span lang="en">Total Sales:</span> <span lang="fr">Total ventes :</span></td><td><span data-ng-bind="location.pl.totalSales | currency:\'$\'"></span></td></tr><tr><td><span lang="en">Operating Margin:</span> <span lang="fr">Profits d\'exploitation :</span></td><td><span data-ng-bind="location.pl.operatingMargin | currency:\'$\'"></span> (<span data-ng-bind="location.pl.operatingMarginPct | number: 2"></span>%)</td></tr></table></div></div></div></div>'),e.put("directives/location-selector/location-selector.html",'<div class="fw-location-selector"><md-autocomplete md-require-match="true" md-selected-item="ctl.selectedLocation" md-search-text="ctl.queryStr" md-min-length="0" md-items="item in ctl.query()" md-item-text="item.locationCd" md-selected-item-change="ctl.select(item)" md-no-cache="true" md-select-on-match="" placeholder="{{\'label.location\' | translate}}" md-floating-label="{{fwLabel || \' \'}}" ng-required="isRequired == true" md-input-name="inputName" md-search-text-change="ctl.searchTxtChange(ctl.queryStr)" fw-autocomplete-force-select=""><md-item-template><span>{{item.locationCd}}</span></md-item-template></md-autocomplete></div>'),e.put("directives/media-display/media-display.html",'<img ng-if="display.isImage(media.mediaType)" ng-src="{{ media.referenceUrl }}" width="100%">'),e.put("directives/media-list/media-list.html",'<div ng-if="!fabMode" ng-repeat="medium in media.list" class="fw-media-preview" layout="row" layout-align="start center"><a ng-href="{{medium.media.referenceUrl|fwMediaUrl}}" target="_blank"><i class="fw-mr10 fa fa-2x {{ media.getIcon(medium.media) }}"></i></a><div layout="row" class="fw-full-width" ng-if="!fwIsReadOnly"><input ng-blur="media.blur(medium.caption, medium.id)" ng-model="medium.caption"><div class="fw-media-preview__close" ng-if="media.canDelete" ng-click="media.removeMedia(medium.id)"><i class="fa fa-times"></i></div></div><div ng-if="fwIsReadOnly" class="fw-media-list__caption fw-text-center">{{medium.caption}}</div></div><md-button class="md-fab" ng-if="fabMode" ng-repeat="medium in media.list" href="{{medium.media.referenceUrl|fwMediaUrl}}" target="_blank"><md-tooltip class="fw-media-list__description" md-direction="top">{{medium.media.description}}</md-tooltip><i class="fa fa-paperclip fa-lg"></i></md-button>'),e.put("directives/media-preview/media-preview.html",'<div ng-repeat="file in media" class="fw-media-preview" layout="row" layout-align="{{layoutAlign || \'start center\'}}"><i class="fw-mr10 fa fa-2x fa-file-{{ preview.mediaType(file) }}-o"></i><div layout="row" class="fw-full-width"><input ng-if="!fwReadOnly" class="fw-full-width" ng-model="file.caption"> <input ng-if="fwReadOnly" class="fw-full-width" ng-model="file.caption" readonly=""><div class="fw-media-preview__close" ng-click="preview.removeMedia(file)"><i class="fa fa-times"></i></div></div></div>'),e.put("directives/opslink-poll/opslink-poll.html",'<div layout="row" layout-align="start center" layout-wrap=""><div flex-xs="100" flex-gt-xs="25" layout="row" layout-align="center center" layout-padding=""><img class="fw-full-width fw-opslink-card-image" src="/fw-ui/assets/images/poll.png"></div><div flex-xs="100" flex-gt-xs="75"><div class="fw-h3">{{::\'opslink.survey.teamMemberPoll\' | translate}}</div><div class="fw-p" style="font-size: 20px">{{fwSurvey.promptHtml}}</div><div layout="row" layout-padding="" layout-wrap="" ng-if="ctl.showQuestions()"><div flex-xs="100" flex-gt-xs="33" ng-repeat="choice in fwChoices"><md-button class="fw-full-width fw-appBtn" ng-disabled="fwDisableButtons" ng-click="ctl.answer(choice)" fw-test-id="answerChoice">{{choice.promptHtml}}</md-button></div></div><div ng-if="ctl.showResults()" layout-padding=""><div layout="row" layout-aign="start center" layout-wrap="" ng-repeat="r in fwResponse"><div flex-xs="100" flex="30" class="fw-h5 fw-bolder">{{fwChoiceIdx[r.id].promptHtml}} <i ng-if="fwChoiceIdx[r.id].correct" class="fa fa-check fw-success"></i></div><div flex-xs="85" flex="55"><fw-progress-bar percent="{{r.pct}}"></fw-progress-bar></div><div flex-xs="10" flex="10" class="fw-ml10">{{r.pct}}%</div></div><div class="fw-h5">{{fwSurvey.postScriptHtml}}</div></div></div></div><div layout="row" layout-align="center center" layout-padding="" ng-if="ctl.isHideable"><md-button class="fw-appBtn" ng-click="ctl.next()">{{::\'opslink.modal.next\' | translate}} &mdash; {{ctl.secondsLeft}}</md-button></div>'),e.put("directives/opslink-quiz/opslink-quiz.html",'<div layout="row" layout-align="start center" layout-wrap=""><div flex-xs="100" flex-gt-xs="25" layout="row" layout-align="center center" layout-padding=""><img class="fw-full-width fw-opslink-card-image" src="/fw-ui/assets/images/quiz.png"></div><div flex-xs="100" flex-gt-xs="75"><div class="fw-h3">{{::\'opslink.survey.teamMemberQuiz\' | translate}}</div><div class="fw-p" style="font-size: 20px">{{fwSurvey.promptHtml}}</div><div layout="row" layout-padding="" layout-wrap="" ng-if="ctl.showQuestions()"><div flex-xs="100" flex-gt-xs="33" ng-repeat="choice in fwChoices"><md-button class="fw-full-width fw-appBtn" ng-disabled="fwDisableButtons" ng-click="ctl.answer(choice)" fw-test-id="answerChoice">{{choice.promptHtml}}</md-button></div></div><div ng-if="ctl.showResults()" layout-padding=""><div layout="row" layout-aign="start center" layout-wrap="" ng-repeat="r in fwResponse"><div flex-xs="100" flex="30" class="fw-h5 fw-bolder">{{fwChoiceIdx[r.id].promptHtml}} <i ng-if="fwChoiceIdx[r.id].correct" class="fa fa-check fw-success"></i></div><div flex-xs="85" flex="55"><fw-progress-bar percent="{{r.pct}}"></fw-progress-bar></div><div flex-xs="10" flex="10" class="fw-ml10">{{r.pct}}%</div></div><div class="fw-h5">{{fwSurvey.postScriptHtml}}</div></div></div></div><div layout="row" layout-align="center center" layout-padding=""><md-button class="fw-appBtn" ng-if="ctl.isHideable" ng-click="ctl.next()">{{::\'opslink.modal.next\' | translate}} &mdash; {{ctl.secondsLeft}}</md-button></div>'),e.put("directives/opslink-survey/opslink-survey.html",'<md-content><div ng-switch="fwIsQuiz"><div ng-switch-when="false"><fw-opslink-poll fw-card="fwCard" fw-id="fwId" fw-close-date-time="fwCloseDateTime" fw-is-today="fwIsToday" fw-full="fwFull" fw-from-mandatory="fwFromMandatory" fw-on-answer="fwOnAnswer" fw-force-response="fwForceResponse" fw-force-questions="fwForceQuestions" fw-disable-buttons="fwDisableButtons" fw-mandatory-card-handler="fwMandatoryCardHandler"></fw-opslink-poll></div><div ng-switch-when="true"><fw-opslink-quiz fw-card="fwCard" fw-id="fwId" fw-close-date-time="fwCloseDateTime" fw-is-today="fwIsToday" fw-full="fwFull" fw-from-mandatory="fwFromMandatory" fw-on-answer="fwOnAnswer" fw-force-response="fwForceResponse" fw-force-questions="fwForceQuestions" fw-disable-buttons="fwDisableButtons" fw-mandatory-card-handler="fwMandatoryCardHandler"></fw-opslink-quiz></div></div></md-content>'),e.put("directives/owner-selector/owner-selector.html",'<section class="owner-selector"><select class="form-control" ng-model="ctl.owner.selected" ng-options="owner.ownerId as owner.fullLastFirstName + \' (\' + owner.locations.length + \')\' for owner in ctl.owner.list" ng-change="ctl.setInput()"></select></section>'),e.put("directives/pagination/pagination.html",'<div layout="row" class="fw-mb20" ng-class="{\'fw-mt20\':ctl.isBottom}"><div fw-test-id="paginationResultCount" class="paginationResultCount" ng-if="!ctl.isBottom"><div ng-hide="ctl.hideMessage"><span ng-show="ctl.total > 0">{{ctl.paginationString}}</span> <span class="fw-extra-message" ng-show="ctl.total > 0 && ctl.extraMessage">{{ctl.extraMessage}}</span></div></div><div class="fw-pagination" ng-if="ctl.isBottom"><div layout="row" layout-align="center center"><md-button class="fw-pagination__btn fw-pagination__btn--first" ng-disabled="!ctl.hasPreviousPage" ng-click="ctl.prevPage()"><i class="fa fa-caret-left"></i></md-button><md-button class="fw-pagination__btn" ng-show="ctl.hasPreviousGroup" ng-click="ctl.prevGroup()">&hellip;</md-button><div ng-repeat="group in ctl.current_group"><md-button class="fw-pagination__btn" ng-repeat="page in group" ng-class="{\'fw-pagination__btn--selected\' : page === ctl.current_page}" ng-click="ctl.setPage(page)"><span class="fw-h4 fw-no-margin" ng-bind="page">1</span></md-button></div><md-button class="fw-pagination__btn" ng-click="ctl.nextGroup()" ng-show="ctl.hasNextGroup">&hellip;</md-button><md-button class="fw-pagination__btn fw-pagination__btn--last" ng-disabled="!ctl.hasNextPage" ng-click="ctl.nextPage()"><i class="fa fa-caret-right"></i></md-button></div></div></div>'),e.put("directives/progress-bar/progress-bar.html",'<div class="fw-progress fw-full-width" layout="row" layout-align="start center"><span class="fw-progress__fill {{getProgressColor()}}" ng-style="getProgressStyle()"></span></div>'),e.put("directives/saml-sp/saml-sp.html",'<div style="padding:0;margin:0"><form action="{{::idpUrl}}" method="post" target="{{::target}}" novalidate=""><input type="hidden" name="access_token" value="{{::access_token}}"> <input type="hidden" name="locale" value="{{::locale}}"> <input type="hidden" name="providerId" value="{{::sp.providerId}}"> <input type="hidden" name="shire" value="{{::sp.acs}}"> <input type="hidden" name="target" value="{{::sp.relayState}}"> <input type="hidden" name="country" value="{{::country}}"><md-button class="fw-appBtn" ng-if="label && !hasTransclusion" ng-click="doSubmit()">{{::label}}</md-button></form></div>'),e.put("directives/scheduler/scheduler.html",'<div class="fw-h3 fw-mt10 fw-mr10"><span ng-if="!ctl.defaultAllDay && !fwTitle">{{\'task.schedule.schedule\' | translate}}</span> <span ng-if="ctl.defaultAllDay && !fwTitle">{{\'calendar.recurrence\' | translate}}</span> <span ng-if="fwTitle">{{fwTitle | translate}}</span> <span class="fw-h6" ng-if="!fwEditable">({{\'task.schedule.currentSchedule\' | translate}}: {{ ctl.currentScheduleText | translate }})</span></div><div ng-if="fwEditable"><div class="fw-light-grey-bg" style="padding-bottom:15px"><div class="fw-outerbox fw-mt20 fw-mb20 fw-text-left"><md-radio-group ng-model="ctl.currentSchedule.timeType" ng-hide="ctl.defaultAllDay" required=""><div layout="row" layout-align="start start" layout-wrap="" ng-hide="fwForceSchedule"><md-radio-button class="fw-mt10 fw-mr20" ng-value="\'none\'">{{\'task.schedule.none\' | translate}}</md-radio-button></div><div layout="row" layout-align="start center" layout-wrap=""><md-radio-button class="fw-mt10 fw-mr20" ng-value="\'time\'">{{\'task.schedule.time\' | translate}}</md-radio-button><md-radio-button class="fw-mt10" ng-value="\'offset\'" ng-if="!ctl.defaultAllDay">{{\'task.schedule.offsetTime\' | translate}}</md-radio-button></div></md-radio-group><div layout="row" ng-if="ctl.currentSchedule.timeType !== \'none\'" layout-align="start start" layout-wrap="" layout-padding=""><div flex-xs="100" flex-gt-xs="33" ng-show="ctl.currentSchedule.timeType == \'time\' && !ctl.defaultAllDay" layout="row" layout-align="start end" layout-wrap=""><md-input-container class="fw-full-width"><label>{{\'task.schedule.time\' | translate}}</label><md-select ng-model="ctl.currentSchedule.fixedTimeHHMM" ng-required="ctl.currentSchedule.timeType == \'time\'"><md-option ng-value="true">{{\'task.schedule.allDay\' | translate}}</md-option><md-option ng-repeat="time in fwTimes" ng-value="time.military">{{time.military | fwLocaleTime}}</md-option></md-select></md-input-container></div><div flex-xs="100" flex-gt-xs="33" ng-show="ctl.currentSchedule.timeType == \'offset\'" layout="row" layout-align="start end" layout-wrap=""><md-input-container flex-xs="100" flex-gt-xs="100" class="fw-full-width"><label>{{\'task.schedule.offsetTime\' | translate}}</label><md-select ng-model="ctl.currentSchedule.offsetMin" ng-required="ctl.currentSchedule.timeType == \'offset\'"><md-option ng-repeat="offset in fwOffsets" ng-value="offset.intVal">{{offset.ui}}</md-option></md-select></md-input-container><md-input-container flex-xs="100" flex-gt-xs="100" class="fw-full-width"><label>{{\'task.schedule.beforeAfter\' | translate}}</label><md-select ng-model="ctl.currentSchedule.offsetDirection" ng-required="ctl.currentSchedule.timeType == \'offset\'"><md-option ng-value="\'task.schedule.before\'">{{\'task.schedule.before\' | translate}}</md-option><md-option ng-value="\'task.schedule.after\'">{{\'task.schedule.after\' | translate}}</md-option></md-select></md-input-container><md-input-container flex-xs="100" flex-gt-xs="100" class="fw-full-width"><label>{{\'task.schedule.offsetEvent\' | translate}}</label><md-select ng-model="ctl.currentSchedule.offsetEvent" ng-required="ctl.currentSchedule.timeType == \'offset\'"><md-option ng-repeat="event in fwEvents" ng-value="event.cd">{{event.name}}</md-option></md-select></md-input-container></div><div flex-xs="100" flex-gt-xs="33" layout="row" layout-align="start start" layout-wrap=""><md-input-container flex="100" class="fw-full-width"><label>{{\'task.schedule.frequency\' | translate}}</label><md-select ng-model="ctl.currentSchedule.frequency" ng-change="ctl.watchForDaily(ctl.currentSchedule.frequency)" required=""><md-option ng-repeat="frequency in fwFrequencies" ng-value="frequency.frequency">{{frequency.frequency | translate}}</md-option></md-select></md-input-container><div flex="100" ng-show="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.daily\') && fwContext == \'repository\'"><md-input-container flex="100" class="fw-full-width"><label>{{\'task.schedule.every\' | translate}}</label><md-select ng-model="ctl.currentSchedule.everyHourDaily" ng-required="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.daily\') && fwContext == \'repository\'"><md-option ng-repeat="hour in fwHours track by $index" ng-value="{{hour.value}}">{{hour.ui}}</md-option></md-select></md-input-container></div><div flex="100" ng-show="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.weekly\')" class="fw-mt10" layout="row" layout-align-sm="center center" layout-align="start end" layout-wrap=""><div flex="100" layout="row" layout-align="start center"><div class="fw-mr10">{{\'task.schedule.every\' | translate}} :&nbsp;</div></div><div flex="100" layout="row" layout-align="start center" layout-wrap=""><md-button class="fw-day-select" ng-class="{\'fw-day-select__active\':weekday.active || ctl.daysOfWeekArray[$index]}" layout="row" layout-align="center center" ng-repeat="weekday in fwWeekdays" ng-click="ctl.setBool($index, \'daysOfWeekArray\', ctl.daysOfWeekArray, weekday)">{{weekday.day | translate}} <i class="fa fa-check"></i></md-button></div></div><div flex="100" ng-show="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.yearly\', \'task.schedule.monthly\', \'task.schedule.quarterly\', \'task.schedule.semiAnnually\')"><md-radio-group class="fw-mt10" layout="row" layout-align-sm="start center" ng-model="ctl.currentSchedule.customFrequency"><md-radio-button class="fw-mt10 fw-mr20" ng-value="false">{{\'task.schedule.each\' | translate}}</md-radio-button><md-radio-button class="fw-mt10" ng-value="true">{{\'task.schedule.onThe\' | translate}}</md-radio-button></md-radio-group></div><div flex="100" ng-show="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.yearly\')"><div>{{\'task.schedule.inTheseMonths\' | translate}}</div><div flex-xs="100" layout="row" layout-align="start center" layout-wrap=""><md-button class="fw-day-select" ng-class="{\'fw-day-select__active\':month.active || ctl.monthsArray[$index]}" layout="row" layout-align="center center" ng-repeat="month in fwMonths" ng-click="ctl.setBool($index, \'monthsArray\', ctl.monthsArray, month)">{{month.month | translate}} <i class="fa fa-check"></i></md-button></div></div><div flex="100" ng-show="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.quarterly\')"><div>{{\'task.schedule.onTheMonthQtr\' | translate}}</div><div flex-xs="100" layout="row" layout-align="start center" layout-wrap=""><md-button class="fw-day-select" ng-class="{\'fw-day-select__active\':opt.active || ctl.monthsArray[$index]}" layout="row" layout-align="center center" ng-repeat="opt in fwQtrOptions" ng-click="ctl.setBool($index, \'monthsArray\', ctl.monthsArray, opt)">{{opt.option | translate}} <i class="fa fa-check"></i></md-button></div></div><div flex="100" ng-show="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.semiAnnually\')"><div>{{\'task.schedule.onTheMonthSemi\' | translate}}</div><div flex-xs="100" layout="row" layout-align="start center" layout-wrap=""><md-button class="fw-day-select" ng-class="{\'fw-day-select__active\':opt.active || ctl.monthsArray[$index]}" layout="row" layout-align="center center" ng-repeat="opt in fwSemiAnnualOptions" ng-click="ctl.setBool($index, \'monthsArray\', ctl.monthsArray, opt)">{{opt.option | translate}} <i class="fa fa-check"></i></md-button></div></div><div flex="100" ng-show="ctl.currentSchedule.customFrequency == false && ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.yearly\', \'task.schedule.monthly\', \'task.schedule.quarterly\', \'task.schedule.semiAnnually\')"><div>{{\'task.schedule.onTheseDays\' | translate}}</div><div flex-xs="100" layout="row" layout-align="start center" layout-wrap=""><md-button class="fw-day-select" ng-class="{\'fw-day-select__active\':day.active || ctl.daysOfMonthArray[$index] && !ctl.currentSchedule.customFrequency}" layout="row" layout-align="center center" ng-repeat="day in fwDays" ng-click="ctl.setBool($index, \'daysOfMonthArray\', ctl.daysOfMonthArray, day)">{{day.day}} <i class="fa fa-check"></i></md-button></div></div><div flex="100" flex-xs="100" ng-show="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.monthly\', \'task.schedule.yearly\', \'task.schedule.quarterly\', \'task.schedule.semiAnnually\') && ctl.currentSchedule.customFrequency == true"><md-input-container><md-select ng-model="ctl.currentSchedule.monthWeekNumOffset" ng-required="ctl.currentSchedule.customFrequency == true"><md-option ng-repeat="theDay in fwAlternativeFrequencyOptions" ng-value="theDay.intVal">{{theDay.option | translate}}</md-option></md-select></md-input-container><div layout="row" layout-align="start center" layout-wrap=""><md-button class="fw-day-select" ng-class="{\'fw-day-select__active\':weekday.active || ctl.daysOfWeekArray[$index]}" layout="row" layout-align="center center" ng-repeat="weekday in fwWeekdays" ng-click="ctl.setBool($index, \'daysOfWeekArray\', ctl.daysOfWeekArray, weekday, true)">{{weekday.day | translate}} <i class="fa fa-check"></i></md-button></div></div></div><div flex-xs="100" flex-gt-xs="33" ng-show="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.daily\') && ctl.currentSchedule.timeType != \'offset\' && ctl.currentSchedule.everyHourDaily != 0 && ctl.currentSchedule.everyHourDaily != undefined && ctl.currentSchedule.fixedTimeHHMM != undefined && fwContext == \'repository\' && ctl.currentSchedule.fixedTimeHHMM != true" layout="row" layout-align="start end" layout-wrap=""><md-input-container class="fw-full-width"><label>{{\'task.schedule.endTime\' | translate}}</label><md-select ng-cloak="" ng-model="ctl.currentSchedule.endTime" ng-required="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.daily\') && ctl.currentSchedule.everyHourDaily != 0 && ctl.currentSchedule.everyHourDaily != undefined && ctl.currentSchedule.fixedTimeHHMM != undefined && ctl.currentSchedule.fixedTimeHHMM != true && fwContext == \'repository\' && ctl.currentSchedule.fixedTimeHHMM != true"><md-option ng-repeat="time in fwTimes" ng-value="time.military">{{time.military | fwLocaleTime}}</md-option></md-select></md-input-container></div><div flex-xs="100" flex-gt-xs="33" ng-show="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.daily\') && ctl.currentSchedule.timeType == \'offset\' && ctl.currentSchedule.everyHourDaily != 0 && fwContext == \'repository\'" layout="row" layout-align="start end" layout-wrap=""><md-input-container flex-xs="100" flex-gt-xs="100" class="fw-full-width"><label>{{\'task.schedule.offsetTimeEnd\' | translate}}</label><md-select ng-model="ctl.currentSchedule.endOffsetMin" ng-required="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.daily\') && ctl.currentSchedule.timeType == \'offset\' && ctl.currentSchedule.everyHourDaily != 0 && fwContext == \'repository\'"><md-option ng-repeat="offset in fwOffsets" ng-value="offset.intVal">{{offset.ui}}</md-option></md-select></md-input-container><md-input-container flex-xs="100" flex-gt-xs="100" class="fw-full-width"><label>{{\'task.schedule.beforeAfter\' | translate}}</label><md-select ng-model="ctl.currentSchedule.offsetDirectionEnd" ng-required="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.daily\') && ctl.currentSchedule.timeType == \'offset\' && ctl.currentSchedule.everyHourDaily != 0 && fwContext == \'repository\'"><md-option ng-value="\'task.schedule.before\'">{{\'task.schedule.before\' | translate}}</md-option><md-option ng-value="\'task.schedule.after\'">{{\'task.schedule.after\' | translate}}</md-option></md-select></md-input-container><md-input-container flex-xs="100" flex-gt-xs="100" class="fw-full-width"><label>{{\'task.schedule.offsetEvent\' | translate}}</label><md-select ng-model="ctl.currentSchedule.endOffsetEvent" ng-required="ctl.shouldShowDayMonthOptions(ctl.currentSchedule.frequency, \'task.schedule.daily\') && ctl.currentSchedule.timeType == \'offset\' && ctl.currentSchedule.everyHourDaily != 0 && fwContext == \'repository\'"><md-option ng-repeat="event in fwEvents" ng-value="event.cd">{{event.name}}</md-option></md-select></md-input-container></div><div flex-xs="100" flex-gt-xs="33" ng-if="!ctl.noEndDate && !fwForceSchedule"><md-input-container class="fw-full-width"><label>{{ \'eap.label.endDate\' | translate }}</label><md-datepicker ng-model="ctl.endDate" ng-change="ctl.userChangedEndDate(ctl.endDate)"></md-datepicker></md-input-container></div></div></div></div></div>'),e.put("directives/stack-bar/stack-bar.html",'<div class="fw-stack-progress fw-full-width" layout="row" layout-align="start center"><span ng-repeat="bar in barList track by $index" class="fw-stack-progress__fill {{getColor($index, bar)}}" ng-style="getStyle(bar)"></span></div>'),e.put("directives/sticky-bar-buttons/sticky-bar-buttons.html",'<div layout="row" layout-align="center center" layout-padding="" class="fw-fullscreen-buttons" ng-if="ctl.showStickyBar()"><md-button ng-repeat-start="button in ctl.config" ng-if="button.action === \'cancel\' && ctl.showButton(button)" class="fw-button fw-button-small fw-button-cancel typography-uppercase" ng-disabled="button.state == \'disabled\'" ng-click="ctl.buttonClick(button)" fw-test-id="fwActionButtonCancel">{{\'button.cancel\' | translate}}</md-button><md-button ng-if="button.action === \'save\' && ctl.showButton(button)" class="fw-button fw-button-small fw-button-regular typography-uppercase" ng-disabled="button.state == \'disabled\'" ng-click="ctl.buttonClick(button)" fw-test-id="fwActionButtonSave">{{\'button.save\' | translate}}</md-button><md-button ng-if="button.action === \'complete\' && ctl.showButton(button)" class="fw-button fw-button-small fw-button-primary typography-uppercase" ng-disabled="button.state == \'disabled\'" ng-click="ctl.buttonClick(button)" fw-test-id="fwActionButtonComplete">{{\'button.complete\' | translate}}</md-button><md-button ng-repeat-end="" ng-if="button.action === \'edit\' && ctl.showButton(button)" class="fw-button fw-button-small fw-button-regular typography-uppercase" ng-disabled="button.state == \'disabled\'" ng-click="ctl.buttonClick(button)" fw-test-id="fwActionButtonEdit">{{\'button.edit\' | translate}}</md-button></div>'),e.put("directives/user-visibility/user-visibility.html",'<div layout="row" layout-align="start start" layout-wrap=""><div class="fw-h4 fw-no-margin fw-mr10" ng-hide="fwHideLabel">{{\'label.visibility\' | translate}}</div><div layout="row" layout-align="start start" layout-wrap=""><md-checkbox flex="100" ng-repeat="visibility in ctl.visibility.visibilities" ng-disabled="fwIsReadOnly" ng-if="visibility.show" ng-model="visibility.value" ng-click="ctl.changeVisibility(visibility)" ng-checked="visibility.value == true"><span>{{\'label.roles.\' + visibility.role | translate}}</span></md-checkbox></div></div>'),e.put("directives/video-player/video-player.html",'<div class="fw-mb10 fw-mt20" layout="row" layout-align="center center"><div class="fw-video-player"><div layout="row" layout-align="center center" class="fw-video-player__video-container"><video class="fw-video-player__video" preload="auto" show-controls="true" poster="{{videoPoster}}"></video></div><p ng-if="ccOverlay" ng-show="lang && cc" class="fw-video-player__cc-overlay">{{cc}}</p><div ng-show="showControls || small" class="fw-video-player__controls" layout="row" layout-align="space-between center" layout-padding=""><div flex="" layout="row" layout-align="start center"><md-button class="btn-play-pause" title="{{\'lc.videoplayer.pause\' | translate}}"><i class="fa fa-play fa-lg"></i></md-button><md-button ng-hide="showScrubber || small" class="btn-back" title="{{\'lc.videoplayer.back\' | translate}}"><i class="fa fa-step-backward fa-lg"></i></md-button><md-button ng-hide="showScrubber || small" class="btn-rewind" title="{{\'lc.videoplayer.rewind\' | translate}}"><i class="fa fa-rotate-left fa-lg"></i></md-button></div><div ng-hide="small" fw-scrubber="" disable-scrubber="disableScrubber" val="scrubber" loaded="loaded" update="setCurrentTime(percentage)" flex="{{flexScrubber}}" class="fw-video-player__scrubber"></div><div ng-hide="small" flex="20">{{videoCurrentTime}}/{{videoDuration}}</div><md-input-container class="fw-no-margin" ng-hide="small"><md-select ng-model="lang" placeholder="CC Off" class="fw-video-player__cc-lang" ng-show="langList.length > 1"><md-option ng-value="">CC Off</md-option><md-option ng-repeat="item in langList" ng-value="item.code">{{item.label}}</md-option></md-select></md-input-container></div><p ng-if="!ccOverlay" ng-show="lang && cc" class="fw-video-player__cc">{{cc}}</p></div></div><div ng-if="(bandwidth != \'high\')" class="fw-text-center fw-disbaled"><span>{{\'lc.label.lowBandwidth\' | translate}}</span></div>'),e.put("modals/info-modal/info-modal.template.html",'<md-dialog class="fw-small-dialog layout-padding {{ctl.isBulleted}}"><div class="fw-top-right"><md-button class="md-icon-button" ng-click="ctl.cancel()"><i class="material-icons">close</i></md-button></div><div class="fw-h5 fw-text-center fw-pl30 fw-pr30">{{::ctl.title | translate}}</div><md-content><div ng-repeat="textList in ctl.textObj"><h4 ng-if="ctl.showTextTitle && textList.data.length">{{::textList.title | translate}}</h4><ul><li ng-repeat="item in textList.data">{{::item.value | translate}}</li></ul></div></md-content></md-dialog>'),e.put("modals/simple-confirm-text-modal/simple-confirm-text-modal.html",'<md-dialog><md-content><md-toolbar class="fw-toolbar fw-app-toolbar" layout="row" layout-align="space-between center"><div class="fw-toolbar__title">{{:: ctl.title }}</div></md-toolbar><div layout="row" layout-padding="">{{:: ctl.dialogText }}</div><div layout="row" layout-align="center center" layout-padding=""><div><md-button class="fw-appBtn fw-full-width" ng-click="ctl.confirm();">{{::\'label.ok\' | translate}}</md-button></div></div></md-content></md-dialog>'),e.put("routes/equipment-search/equipment-results.html",'<div class="fw-outerbox"><fw-pagination set-page-data="ctl.page_data"></fw-pagination><md-toolbar class="fw-toolbar--headings fw-grey-bg fw-mt20" layout="row" hide-xs="" layout-align="start center"><div flex="20">{{::\'equipment.type\' | translate}}</div><div flex="20">{{::\'equipment.manufacturer\' | translate}}</div><div flex="20">{{::\'equipment.model\' | translate}}</div><div flex="20">{{::\'label.description\' | translate}}</div><div flex="20" class="fw-text-right">{{\'equipment.action\' | translate}}</div></md-toolbar><md-list class="fw-list"><md-list-item class="fw-list-item" layout="row" layout-align="start center" layout-wrap="" ng-repeat="equipment in ctl.searchResults"><div flex-xs="100" flex="20"><span class="fw-h6 fw-bold" hide-gt-xs="">{{::\'equipment.type\' | translate}}:</span> <span>{{::ctl.lookTypeId[equipment.equipmentType]}}</span></div><div flex-xs="100" flex="20"><span class="fw-h6 fw-bold fw-text-left" hide-gt-xs="">{{::\'equipment.manufacturer\' | translate}}:</span> <span>{{::ctl.manufacturerId[equipment.manufacturer]}}</span></div><div flex-xs="100" flex="20"><span class="fw-h6 fw-bold" hide-gt-xs="">{{::\'equipment.model\' | translate}}:</span> <span>{{::equipment.model}}</span></div><div flex-xs="100" flex="20"><span class="fw-h6 fw-bold" hide-gt-xs="">{{::\'label.description\' | translate}}:</span> <span>{{::equipment.description}}</span></div><div flex-xs="100" flex="20" class="fw-text-right fw-block" layout="row" layout-align="center center" layout-wrap=""><md-button class="fw-appBtn fw-appBtn--icon fw-blue-icon" ng-click="ctl.action(equipment.id)"><i class="material-icons fw-iconBtn" ng-if="ctl.callingAppType === \'repository\'">remove_red_eye</i> <i class="material-icons fw-iconBtn" ng-if="ctl.callingAppType === \'location\'">add_circle</i></md-button><md-button class="fw-appBtn fw-appBtn--icon fw-ml10" ng-click="ctl.deleteEquipment(equipment.id)" ng-if="ctl.callingAppType === \'repository\'"><i class="material-icons fw-iconBtn">delete</i></md-button></div></md-list-item></md-list><fw-pagination set-page-data="ctl.page_data" is-bottom="true"></fw-pagination></div>'),e.put("routes/equipment-search/equipment-search.html",'<div class="fw-outerbox"><div class="fw-h3 fw-text-center">{{\'equipment.equipmentDetails\' | translate}}</div><div class="fw-mr20 fw-text-center fw-warning fw-h5 fw-lowercase" ng-if="ctl.callingApp.unlisted" ng-click="ctl.create()"><a>{{\'equipment.goUnlisted\' | translate}}</a></div><form ng-submit="ctl.search()"><div layout="row" layout-wrap="" layout-padding="" layout-align-gt-sm="center center"><div flex-xs="100" flex-sm="50" flex-gt-sm="33"><md-input-container class="fw-full-width"><label>{{\'equipment.type\' | translate}}</label><md-select ng-model="ctl.searchCriteria.equipmentType"><md-option ng-value="type.id" ng-repeat="type in ctl.lookType | orderBy:\'name\'">{{ type.name }}</md-option></md-select></md-input-container></div><div flex-xs="100" flex-sm="50" flex-gt-sm="33"><md-input-container class="fw-full-width"><label>{{\'equipment.manufacturer\' | translate}}</label><md-select ng-model="ctl.searchCriteria.manufacturer"><md-option ng-value="manufacturer.id" ng-repeat="manufacturer in ctl.lookManufacturer | orderBy:\'name\'">{{ manufacturer.name }}</md-option></md-select></md-input-container></div><div flex-xs="100" flex-sm="50" flex-gt-sm="33"><md-input-container class="fw-full-width"><label>{{\'equipment.model\' | translate}}</label> <input type="text" ng-model="ctl.searchCriteria.model"></md-input-container></div></div><fw-accordion ng-show="!ctl.location" ng-click="ctl.showPlus = ctl.showPlus ? false : true"><fw-accordion-title><i class="fa fa-lg fw-mr10 fw-mb10 fw-mt10" ng-class="{\'fa-plus-square\' : !ctl.showPlus, \'fa-minus-square\' : ctl.showPlus}"></i> {{ \'label.dagFilter\' | translate: { dagName: \'\' + ctl.searchCriteria.dagName } }}</fw-accordion-title><fw-accordion-body><div class="fw-p">{{ \'label.dagFilterDescription\' | translate: { dagName: \'\' + ctl.searchCriteria.dagName } }}</div><fw-dag2 fw-dag-root="ctl.rootDag" fw-model="ctl.searchCriteria.dag" fw-dag-name="ctl.searchCriteria.dagName"></fw-dag2></fw-accordion-body></fw-accordion><div layout="row" layout-padding="" layout-wrap="" layout-align="center" class="fw-mb20 fw-text-center"><md-button class="fw-button fw-button-small fw-button-cancel typography-uppercase" layout="row" layout-align="center" ng-click="ctl.clear();">{{\'button.clear\' | translate}}</md-button><md-button class="fw-button fw-button-small fw-button-regular typography-uppercase" layout="row" layout-align="center" ng-click="ctl.search();">{{\'button.search\' | translate}}</md-button></div></form></div>'),e.put("routes/filters/filter.html",'<form name="smartFilterForm" novalidate=""><md-content><div ng-if="ctl.isFilterActive(\'LOCATION\')"><md-toolbar class="fw-toolbar" layout="row" layout-align="space-between center"><div layout="row" layout-align="start center"><md-button class="fw-ml10" ng-click="ctl.goBack()" ng-if="ctl.enableBackButton"><i class="fa fa-chevron-left"></i></md-button><div class="fw-toolbar__title">{{\'label.locationFilters\' | translate}}</div></div></md-toolbar><md-list class="fw-list"><div class="fw-list-item" layout="row" layout-align="start end" ng-repeat="filter in ctl.filters[\'location\']" layout-padding="" layout-wrap=""><div flex="" flex-xs="100" ng-if="!filter.applyOnlyIfMatched"><md-select class="fw-no-margin" ng-disabled="!ctl.isEditable || ctl.isFilterReadOnly(\'LOCATION\') || filter.systemFilter" ng-model="filter.filterType" placeholder="{{ \'validation.selectFilterType\' | translate}}"><md-option ng-value="filterType" ng-repeat="filterType in ctl.locationFilterTypes" ng-selected="filterType == filter.filterType">{{\'filterTypes.location.\' + filterType | translate}}</md-option></md-select></div><div flex="" flex-xs="100" ng-if="filter.applyOnlyIfMatched">{{\'filterTypes.location.\' + filter.filterType | translate}}</div><div flex="" flex-xs="100" ng-if="!filter.applyOnlyIfMatched"><fw-smart-filter-input fw-filter-value="filter.filterValue" fw-filter-type="filter.filterType" fw-valid-items="ctl.validItems" fw-is-read-only="(filter.systemFilter || !ctl.isEditable || ctl.isFilterReadOnly(\'LOCATION\'))"></fw-smart-filter-input></div><div flex="" flex-xs="100" ng-if="filter.applyOnlyIfMatched"><md-input-container>{{\'label.filterNA\' | translate}}</md-input-container></div><div flex="" flex-xs="100" flex-gt-xs="15" hide-xs="" ng-if="!filter.applyOnlyIfMatched"><md-select class="fw-no-margin" ng-model="filter.includeExcludeFlag" ng-disabled="!ctl.isEditable || ctl.isFilterReadOnly(\'LOCATION\') || filter.systemFilter"><md-option ng-repeat="flag in ctl.flags" ng-value="flag" ng-selected="(flag == \'I\' && filter.includeExcudeFlag != \'E\') || (flag == \'E\' && filter.includeExcludeFlag == \'E\')">{{\'filterTypes.flags.\' + flag | translate}}</md-option></md-select></div><div flex="" flex-xs="100" flex-gt-xs="15" hide-xs="" ng-if="filter.applyOnlyIfMatched">{{\'filterTypes.flags.\' + filter.includeExcludeFlag | translate }}</div><div flex="" flex-xs="100" flex-gt-xs="15" layout="row" layout-align="space-between center" hide-gt-xs="" ng-if="!filter.applyOnlyIfMatched"><md-input-container class="fw-full-width"><md-select class="fw-no-margin" ng-model="filter.includeExcludeFlag" ng-disabled="!ctl.isEditable || ctl.isFilterReadOnly(\'LOCATION\') || filter.systemFilter"><md-option ng-repeat="flag in ctl.flags" ng-value="flag" ng-selected="(flag == \'I\' && filter.includeExcudeFlag != \'E\') || (flag == \'E\' && filter.includeExcludeFlag == \'E\')">{{\'filterTypes.flags.\' + flag | translate}}</md-option></md-select></md-input-container></div><div flex="" flex-xs="100" flex-gt-xs="15" layout="row" layout-align="space-between center" hide-gt-xs="" ng-if="filter.applyOnlyIfMatched"><div class="fw-inline-block">{{\'filterTypes.flags.\' + filter.includeExcludeFlag | translate }}</div></div><div flex="" flex-xs="100" flex-gt-xs="15" class="fw-text-center" ng-if="!filter.applyOnlyIfMatched && ctl.isEditable && !ctl.isFilterReadOnly(\'LOCATION\') && !filter.systemFilter"><md-button class="fw-appBtn" ng-click="ctl.delete(\'location\', $index)"><i class="fa fa-trash fa-lg"></i></md-button></div><div flex="" flex-xs="100" flex-gt-xs="15" class="fw-text-center" hide-xs="" ng-if="filter.applyOnlyIfMatched">&nbsp;</div></div></md-list><div class="fw-mt10" layout="row" layout-padding="" layout-align="space-between center" ng-if="ctl.isEditable && !ctl.isFilterReadOnly(\'LOCATION\')"><md-button class="fw-appBtn" ng-click="ctl.add(\'location\')">{{\'button.addFilter\' | translate}}</md-button></div></div><div ng-if="ctl.isFilterActive(\'USER\')"><md-toolbar class="fw-toolbar" layout="row" layout-align="space-between center"><div layout="row" layout-align="start center"><md-button class="fw-ml10" ng-click="ctl.goBack()" ng-if="ctl.enableBackButton && !ctl.isFilterActive(\'LOCATION\')"><i class="fa fa-chevron-left"></i></md-button><div class="fw-toolbar__title">{{\'label.userFilters\' | translate}}</div></div></md-toolbar><md-list class="fw-list"><md-list-item class="fw-list-item" layout="row" layout-align="start start" ng-repeat="filter in ctl.filters[\'user\']" layout-padding="" layout-wrap=""><div flex="" flex-xs="100" ng-if="!filter.applyOnlyIfMatched"><md-input-container class="fw-full-width"><md-select ng-disabled="!ctl.isEditable || ctl.isFilterReadOnly(\'USER\') || filter.systemFilter" ng-model="filter.filterType" placeholder="{{ \'validation.selectFilterType\' | translate}}"><md-option ng-value="filterType" ng-repeat="filterType in ctl.userFilterTypes" ng-selected="filterType == filter.filterType">{{\'filterTypes.user.\' + filterType | translate}}</md-option></md-select></md-input-container></div><div flex="" flex-xs="100" ng-if="filter.applyOnlyIfMatched">{{\'filterTypes.location.\' + filter.filterType | translate}}</div><div flex-xs="100" flex-gt-xs="25" ng-if="!filter.applyOnlyIfMatched && filter.filterType === \'V_MASK_MATCHES\'"><fw-user-visibility ng-if="filter.filterType === \'V_MASK_MATCHES\'" fw-bitmask-value="filter.filterValue" fw-bitmask-map="ctl.bitmaskMap" fw-active="{{ctl.createVisibilityArray(filter.filterValue)}}" fw-is-read-only="filter.systemFilter || !ctl.isEditable || ctl.isFilterReadOnly(\'USER\')" fw-disabled="ctl.visibilityConfig.visibility.dismiss" fw-lower-visibility="true" fw-hide-label="true"></fw-user-visibility></div><div flex="" flex-xs="100" ng-if="!filter.applyOnlyIfMatched && filter.filterType != \'V_MASK_MATCHES\'"><fw-smart-filter-input fw-filter-value="filter.filterValue" fw-filter-type="filter.filterType" fw-valid-items="ctl.validItems" fw-is-read-only="(filter.systemFilter || !ctl.isEditable || ctl.isFilterReadOnly(\'USER\'))"></fw-smart-filter-input></div><div flex="" flex-xs="100" ng-if="filter.applyOnlyIfMatched"><md-input-container class="fw-full-width">{{\'label.filterNA\' | translate}}</md-input-container></div><div flex-xs="100" flex-gt-xs="25" hide-xs="" ng-if="!filter.applyOnlyIfMatched"><md-input-container class="fw-full-width"><md-select ng-disabled="!ctl.isEditable || ctl.isFilterReadOnly(\'USER\') || filter.systemFilter" ng-model="filter.includeExcludeFlag"><md-option ng-repeat="flag in ctl.flags" ng-value="flag" ng-selected="(flag == \'I\' && filter.includeExcudeFlag != \'E\') || (flag == \'E\' && filter.includeExcludeFlag == \'E\')">{{\'filterTypes.flags.\' + flag | translate}}</md-option></md-select></md-input-container></div><div flex-xs="100" flex-gt-xs="25" hide-xs="" ng-if="filter.applyOnlyIfMatched"><div class="fw-inline-block">{{\'filterTypes.flags.\' + filter.includeExcludeFlag | translate }}</div></div><div flex-xs="100" flex-gt-xs="25" layout="row" layout-align="space-between center" hide-gt-xs="" ng-if="!filter.applyOnlyIfMatched"><md-input-container class="fw-full-width"><md-select ng-disabled="!ctl.isEditable || ctl.isFilterReadOnly(\'USER\') || filter.systemFilter" ng-model="filter.includeExcludeFlag"><md-option ng-repeat="flag in ctl.flags" ng-value="flag" ng-selected="(flag == \'I\' && filter.includeExcudeFlag != \'E\') || (flag == \'E\' && filter.includeExcludeFlag == \'E\')">{{\'filterTypes.flags.\' + flag | translate}}</md-option></md-select></md-input-container></div><div flex-xs="100" flex-gt-xs="10" class="fw-text-center" ng-if="!filter.applyOnlyIfMatched && ctl.isEditable && !ctl.isFilterReadOnly(\'USER\') && !filter.systemFilter"><md-button class="fw-appBtn" ng-click="ctl.delete(\'user\', $index)"><i class="fa fa-trash fa-lg"></i></md-button></div><div flex-xs="100" flex-gt-xs="25" hide-xs="" ng-if="filter.applyOnlyIfMatched">&nbsp;</div></md-list-item></md-list><div class="fw-mt10" layout="row" layout-padding="" layout-align="space-between center" ng-if="ctl.isEditable && !ctl.isFilterReadOnly(\'USER\')"><md-button class="fw-appBtn" ng-click="ctl.add(\'user\')">{{\'button.addFilter\' | translate}}</md-button></div></div><hr><div class="fw-mt10" layout="row" layout-padding="" layout-align="center center" layout-wrap=""><div flex-xs="100" flex-sm="50" flex-gt-sm="25"><md-button class="fw-appBtn fw-full-width" ng-if="ctl.isEditable" ng-click="ctl.cancel()">{{\'button.cancel\' | translate}}</md-button></div><div flex-xs="100" flex-sm="50" flex-gt-sm="25"><md-button class="fw-appBtn fw-full-width" ng-if="ctl.isEditable" ng-click="ctl.save()">{{\'button.save\' | translate}}</md-button></div></div></md-content></form>'),e.put("routes/menu-search/confirm-delete-modal.html",'<md-dialog><md-content><md-toolbar class="fw-toolbar" layout="row" layout-align="space-between center"><div class="fw-toolbar__title">{{ ::\'confirm.delete.title\' | translate}}</div></md-toolbar><div layout="row" layout-padding="">{{ ::\'confirm.delete.warning\' | translate}}</div><div layout="row" layout-align="center center" layout-padding=""><md-button md-autofocus="" class="fw-appBtn fw-spacing-sm" ng-click="ctl.confirm();">{{ ::\'button.confirm\' | translate}}</md-button><md-button class="fw-appBtn fw-spacing-sm" ng-click="ctl.cancel();">{{ ::\'button.cancel\' | translate}}</md-button></div></md-content></md-dialog>'),e.put("routes/menu-search/menu.html",'<div ui-view=""></div><div class="fw-outerbox"><div ui-view="search@ui"></div><div ui-view="results@ui"></div></div>'),e.put("routes/menu-search/results.html",'<div><fw-pagination auto-update="true" set-page-data="ctl.page_data"></fw-pagination><div class="fw-bolder fw-text-center" ng-if="ctl.callingApp == \'location\'">{{\'menu.label.instructions\' | translate}}</div><md-toolbar class="fw-toolbar--headings fw-grey-bg fw-mt20" layout="row" hide-xs="" layout-align="start center"><div flex="20">{{\'menu.label.name\' | translate}}</div><div flex="25">{{\'menu.label.menuGroup\' | translate}}</div><div flex="30">{{\'menu.label.category\' | translate}}</div><div flex="25" class="fw-text-right">{{\'menu.label.action\' | translate}}</div></md-toolbar><md-list class="fw-list"><md-list-item class="fw-list-item" ng-repeat="menuItem in ctl.searchResults | orderBy: \'name\'"><div class="fw-full-width" layout="row" layout-align="start center" layout-wrap=""><div flex-xs="100" flex="20"><span class="fw-h5 fw-bold fw-mobile" hide-gt-xs="">{{\'menu.label.name\' | translate}}:</span> <span ng-bind-html="menuItem.name"></span></div><div flex-xs="100" flex="25"><span class="fw-h5 fw-bold fw-mobile" hide-gt-xs="">{{\'menu.label.menuGroup\' | translate}}:</span> <span>{{::ctl.lookMenuItemGroupMap[menuItem.menuGroup].name}}</span></div><div flex-xs="100" flex="30"><span class="fw-h5 fw-bold fw-mobile" hide-gt-xs="">{{ \'menu.label.category\' | translate}}:</span> <span>{{ctl.displayCats(menuItem.tempLogCategories)}}</span></div><div flex-xs="100" flex="25" layout="row" layout-align-xs="center center" layout-align="end center" layout-wrap=""><md-button class="fw-appBtn fw-appBtn--icon fw-blue-icon" ng-click="ctl.userClickedViewMenuItem(menuItem.id)" ng-show="ctl.canViewDetails"><i class="material-icons fw-iconBtn">remove_red_eye</i></md-button><md-button class="fw-appBtn fw-appBtn--icon fw-ml10" ng-click="ctl.sharedActionButton(menuItem)" ng-disabled="ctl.locationMenuItemsIdx[menuItem.id] === true"><i class="material-icons fw-iconBtn">delete</i></md-button></div></div></md-list-item></md-list><fw-pagination set-page-data="ctl.page_data" is-bottom="true"></fw-pagination></div>'),e.put("routes/menu-search/search.html",'<div layout-row="" layout-align="center center"><div class="fw-h3 fw-text-center">{{\'menu.label.search\' | translate}}</div></div><form ng-submit="ctl.search()"><div layout="row" layout-wrap="" layout-padding=""><div flex-xs="50" flex-gt-xs="33"><md-input-container class="fw-full-width"><label>{{\'menu.label.name\' | translate}}</label> <input type="text" ng-model="ctl.searchCriteria.name"></md-input-container></div><div flex-xs="50" flex-gt-xs="33" ng-if="ctl.lookMenuItemGroups && ctl.lookMenuItemGroups.length > 0"><md-input-container class="fw-full-width"><label>{{\'menu.label.menuGroup\' | translate}}</label><md-select name="menuItemGroup" ng-model="ctl.searchCriteria.menuGroup" ng-change="ctl.searchCriteria.isAllMenu = ctl.searchCriteria.menuGroup === -1 ? \'true\':\'false\'"><md-option ng-value="-1">{{\'menu.label.all\' | translate}}</md-option><md-option ng-value="group.id" ng-repeat="group in ctl.lookMenuItemGroups">{{ group.name }}</md-option><md-option ng-value="0">{{\'menu.label.other\' | translate}}</md-option></md-select></md-input-container></div><div flex-xs="50" flex-gt-xs="33"><md-input-container class="fw-full-width"><label>{{\'menu.label.category\' | translate}}</label><md-select ng-model="ctl.searchCriteria.tempLogCategories"><md-option ng-value="category.id" ng-repeat="category in ctl.logCategories">{{ category.name }}</md-option></md-select></md-input-container></div></div><div layout="row" layout-wrap="" layout-padding=""><div flex="100"><fw-accordion class="fw-dag2-accordion" ng-if="!ctl.location" ng-click="ctl.showPlus = ctl.showPlus ? false : true"><fw-accordion-title><i class="fa fa-lg fw-mr10 fw-mb10 fw-mt10" ng-class="{\'fa-plus-square\' : !ctl.showPlus, \'fa-minus-square\' : ctl.showPlus}"></i> {{ \'label.dagFilter\' | translate: { dagName: \'\' + ctl.searchCriteria.dagName } }}</fw-accordion-title><fw-accordion-body><div class="fw-p">{{ \'label.dagFilterDescription\' | translate: { dagName: \'\' + ctl.searchCriteria.dagName } }}</div><fw-dag2 fw-dag-root="ctl.dag" fw-model="ctl.searchCriteria.dag" fw-dag-name="ctl.searchCriteria.dagName"></fw-dag2></fw-accordion-body></fw-accordion></div></div><div layout="row" layout-wrap="" layout-padding="" layout-align="center center"><div class="fw-text-right" flex-xs="50" flex-sm="50" flex-gt-sm="25"><md-button class="fw-button fw-button-small fw-button-cancel typography-uppercase" ng-click="ctl.clear();"><span>{{\'button.clear\' | translate}}</span></md-button></div><div flex-xs="50" flex-sm="50" flex-gt-sm="25"><md-button type="submit" class="fw-button fw-button-small fw-button-regular typography-uppercase" ng-click="ctl.search();"><span>{{\'button.search\' | translate}}</span></md-button></div></div></form>'),e.put("services/confirm-delete/confirm-delete-modal.html",'<md-dialog><md-content><md-toolbar class="fw-toolbar" layout="row" layout-align="space-between center"><div class="fw-toolbar__title">{{ ::\'confirm.delete.title\' | translate}}</div></md-toolbar><div layout="row" layout-padding="">{{ ::\'confirm.delete.warning\' | translate}}</div><div layout="row" layout-align="center center" layout-padding=""><md-button md-autofocus="" class="fw-appBtn fw-spacing-sm" ng-click="ctl.confirm();">{{ ::\'button.confirm\' | translate}}</md-button><md-button class="fw-appBtn fw-spacing-sm" ng-click="ctl.cancel();">{{ ::\'button.cancel\' | translate}}</md-button></div></md-content></md-dialog>'),e.put("services/help/help.html",'<md-dialog class="fw-help"><md-toolbar class="fw-toolbar help" layout="row" layout-align="space-between center"><div class="fw-toolbar__title">{{\'label.help\' | translate}}</div><md-button class="md-button md-ink-ripple fw-right-navbar__btn fw-right-navbar__btn--toggle-right" ng-click="ctl.hide()"><i class="fa fa-times fa-lg fw-light-text"></i></md-button></md-toolbar><img class="fw-full-width" style="max-width:1200px; object-fit:contain;" ng-src="{{ctl.imgUrl | fwMediaUrl}}"></md-dialog>'),e.put("directives/charts/donut-chart/donut-chart.html",'<highchart id="donut" config="ctl.chartConfig"></highchart><div class="fw-donut-chart__pct" layout="row" layout-align="center center">{{::fwPct}}%</div>'),e.put("routes/filters/directives/smart-filter-input/smart-filter-input.html",'<md-chips ng-model="ctl.selectedItems" md-require-match="true" md-autocomplete-snap="" readonly="fwIsReadOnly"><md-autocomplete md-search-text="ctl.searchText" md-items="item in ctl.query(searchText)" md-item-text="item.label" md-no-cache="true" placeholder="{{ \'validation.enterOne\' | translate}}"><md-item-template><span md-highlight-text="ctl.searchText">{{item.label}}</span></md-item-template></md-autocomplete><md-chip-template><span ng-bind-html="$chip.label"></span></md-chip-template></md-chips>')
}]);