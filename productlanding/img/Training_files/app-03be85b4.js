"use strict";function GD(){function e(e){return e?(angular.forEach(e,function(e){for(var o in t)e.splice(e.length-1,0,o)}),angular.merge(e,t)):{}}var t={menuContextReady:["$rootScope",function(e){return e.menuContextReady.promise}]};return{decorate:e,$get:function(){return{decorate:e}}}}angular.module("fw-context",["fw-core","fw-user","ng.deviceDetector"]),angular.module("fw-context").provider("$fw.context",[function(){function e(e){n=e}function t(){return n}function o(e,o,n,r,u,a){function c(){function t(t,o){e.lang=o.ngLocaleId}var n=r.one("me").get().then(function(e){return a.getRegionAttrs({cd:e._homeLocationCd}).$promise.then(function(t){return e.hasRegionAskus=t.hasOwnProperty("SYS_ASKUS_INCLUSION"),e})}),c=Date.now();return angular.extend(e,{contextReady:!1}),e.$on("$fw.core.locale.localeChanged",t),e.allReady=o.all({fwUser:n}).then(function(t){return angular.extend(e,{lang:u.getActive(),currentUser:angular.extend(t.fwUser.plain(),{isCorporate:function(){return!0},countryCd:"CA"}),locationCd:"",contextReady:!0}),console.log("contextBootstrap done - "+(Date.now()-c)+"ms."),t}).then(function(t){return t.fwUser.hasOneRight("REPORT")?t.fwUser.$fwLookReport.query().$promise.then(function(t){var o=[];return t.length>0&&(o=t.sort(function(e,t){return e.id-t.id})),angular.extend(e.currentUser,{lookReports:o,hasReports:t.length>0})}):angular.extend(e.currentUser,{hasReports:!1})}),e.menuContextReady=o.defer(),e.$on("$destroy",function(){e.$off("$fw.core.locale.localeChanged",t)}),e.allReady}return{bootstrapContext:c,isManual:t}}var n=!1;return{$get:["$rootScope","$q","$timeout","$fw.user.rest.User","$fw.core.locale","$fw.location.rest.LookRegion",o],setManual:e}}]),angular.module("fw-context").run(["$rootScope","$timeout","$injector",function(e,t,o){if(o.has("$urlRouter")){var n=o.get("$urlRouter");n.listen()}}]),angular.module("fw-context").config(["$urlRouterProvider",function(e){e.deferIntercept()}]).run(["$fw.context",function(e){e.isManual()||e.bootstrapContext()}]),angular.module("fw-context").config(["$stateProvider","fw.context.godDependenciesProvider",function(e,t){e.decorator("parent",function(e,o){return t.decorate(e.self.resolve),o(e)})}]),angular.module("fw-context").provider("fw.context.godDependencies",[GD]),angular.module("fw-context-demo",["fw-context","ui.router"]).value("demoVersion",{getVersion:function(){return"0.1"}}).config(["$urlRouterProvider","$stateProvider",function(e,t){e.otherwise("/"),t.state("demo",{url:"/",templateUrl:"demo/demo.html",controller:"fw.context.demo.demoController",controllerAs:"ctl"})}]).run(["$rootScope","$location",function(e,t){e.isActive=function(e){return e===t.path()}}]),angular.module("fw-context-demo").controller("fw.context.demo.demoController",["$scope","demoVersion",function(e,t){var o=this;angular.extend(o,{}),console.log("Started controller demoCtrl for module fw-context version "+t.getVersion())}]),angular.module("fw-context").run(["$templateCache",function(e){e.put("demo/demo.html",'<div>demo page<div>Username : <span ng-bind="$root.currentUser.username"></span></div></div>')}]);